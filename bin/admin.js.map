{
  "version": 3,
  "sources": ["../node_modules/fn-annotate/index.js", "../node_modules/util-deprecate/browser.js", "../node_modules/faunadb/node_modules/chalk/source/index.js", "../node_modules/boxen/index.js", "../node_modules/cross-fetch/dist/browser-ponyfill.js", "../node_modules/faunadb/src/_util.js", "../node_modules/faunadb/src/Expr.js", "../node_modules/faunadb/src/errors.js", "../node_modules/base64-js/index.js", "../node_modules/util/util.js", "../node_modules/faunadb/src/values.js", "../node_modules/object-assign/index.js", "../node_modules/faunadb/src/query.js", "../node_modules/faunadb/src/_json.js", "../node_modules/faunadb/src/PageHelper.js", "../node_modules/faunadb/src/RequestResult.js", "../node_modules/faunadb/src/_http/errors.js", "(disabled):http2", "../node_modules/faunadb/src/_http/http2Adapter.js", "../node_modules/event-target-shim/src/event.mjs", "../node_modules/event-target-shim/src/event-target.mjs", "../node_modules/abort-controller/src/abort-signal.ts", "../node_modules/abort-controller/src/abort-controller.ts", "../node_modules/abort-controller/polyfill.js", "(disabled):https", "(disabled):http", "../node_modules/faunadb/src/_http/fetchAdapter.js", "(disabled):os", "../node_modules/faunadb/src/_http/index.js", "../node_modules/faunadb/src/stream.js", "../node_modules/faunadb/src/Client.js", "../node_modules/faunadb/src/clientLogger.js", "../node_modules/faunadb/index.js", "../app/fun/sort.ts", "../app/globals.ts", "../app/services/validateAccessToken.ts", "../app/router.ts", "../app/identify.ts", "../app/fun/on.ts", "../app/fun/hookupTriggers.ts", "../app/services/admin.ts", "../app/fun/sum.ts", "../app/services/gl.ts", "../app/fun/ticksInSeconds.ts", "../app/services/ServiceCache.ts", "../app/services/invoices.ts", "../app/fun/split.ts", "../app/gl/AccountManager.ts", "../app/fun/setMode.ts", "../app/admin.ts"],
  "sourcesContent": ["'use strict';\n\nmodule.exports = annotate;\n\nfunction annotate(fn) {\n\n  if (typeof fn !== 'function') {\n    throw new Error('Could not parse function signature for injection dependencies: Object is not a function');\n  }\n\n  if (!fn.length) return [];\n\n  var injects = /^()\\(?([^)=]*)\\)? *=>/.exec(fn + '') ||\n                /^[^(]+([^ \\(]*) *\\(([^\\)]*)\\)/.exec(fn + '');\n\n  if (!injects) {\n    throw new Error('Could not parse function signature for injection dependencies: ' + fn + '');\n  }\n\n  var argumentString = injects[2]\n\n  // Strip multi-line comments:\n  // Uses the lazy-quantifier (.*?): http://www.rexegg.com/regex-quantifiers.html#lazy_solution\n  .replace(/\\/\\*[\\S\\s]*?\\*\\//g, ' ')\n\n  // Strip single-line comments:\n  .replace(/\\/\\/.*/g, ' ');\n\n  function groupSubArguments(_, type, keys) {\n    return type + keys.split(',')\n    .map(function (arg) {\n      return arg && arg.trim();\n    })\n    .filter(Boolean)\n    .join('@');\n  }\n\n  argumentString = argumentString.replace(/(\\{)([^}]*)\\}/g, groupSubArguments);\n  argumentString = argumentString.replace(/(\\[)([^}]*)\\]/g, groupSubArguments);\n\n  return argumentString.split(',')\n  .map(function (arg) {\n    return arg && arg.trim();\n  })\n  .map(function (arg) {\n    if (arg[0] === '{') {\n      return arg.substring(1).split('@');\n    }\n    if (arg[0] === '[') {\n      return { items: arg.substring(1).split('@') };\n    }\n    return arg;\n  })\n  .filter(Boolean);\n\n}\n", "\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n", "", "", "var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n}({}));\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n", "'use strict'\n\nvar packageJson = require('../package.json')\nvar chalk = require('chalk')\nvar boxen = require('boxen')\n\nvar crossGlobal =\n  typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n    ? global\n    : self\n\n/**\n * Inherit the prototype methods from one constructor into another.\n * Source: https://github.com/kaelzhang/node-util-inherits\n * @param {function} ctor Constructor function which needs to inherit the prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n * @private\n */\nfunction inherits(ctor, superCtor) {\n  if (ctor === undefined || ctor === null) {\n    throw new TypeError(\n      'The constructor to \"inherits\" must not be null or undefined'\n    )\n  }\n\n  if (superCtor === undefined || superCtor === null) {\n    throw new TypeError(\n      'The super constructor to \"inherits\" must not be null or undefined'\n    )\n  }\n\n  if (superCtor.prototype === undefined) {\n    throw new TypeError(\n      'The super constructor to \"inherits\" must have a prototype'\n    )\n  }\n\n  ctor.super_ = superCtor\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true,\n    },\n  })\n}\n\n/**\n * Determines if the current environment is a NodeJS environment.\n * @private\n */\nfunction isNodeEnv() {\n  return (\n    typeof window === 'undefined' &&\n    typeof process !== 'undefined' &&\n    process.versions != null &&\n    process.versions.node != null\n  )\n}\n\n/**\n * Resolves environment variable if available.\n *\n * @param {string} envKey A name of env variable.\n * @return {void|string} Returns requested env variable or void.\n * @private\n */\nfunction getEnvVariable(envKey) {\n  var areEnvVarsAvailable = !!(\n    typeof process !== 'undefined' &&\n    process &&\n    process.env\n  )\n\n  if (areEnvVarsAvailable && process.env[envKey] != null) {\n    return process.env[envKey]\n  }\n}\n\n/**\n * JavaScript Client Detection\n * @private\n */\nfunction getBrowserDetails() {\n  var browser = navigator.appName\n  var browserVersion = '' + parseFloat(navigator.appVersion)\n  var nameOffset, verOffset, ix\n\n  // Opera\n  if ((verOffset = navigator.userAgent.indexOf('Opera')) != -1) {\n    browser = 'Opera'\n    browserVersion = navigator.userAgent.substring(verOffset + 6)\n    if ((verOffset = navigator.userAgent.indexOf('Version')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8)\n    }\n  }\n  // MSIE\n  else if ((verOffset = navigator.userAgent.indexOf('MSIE')) != -1) {\n    browser = 'Microsoft Internet Explorer'\n    browserVersion = navigator.userAgent.substring(verOffset + 5)\n  }\n\n  //IE 11 no longer identifies itself as MS IE, so trap it\n  //http://stackoverflow.com/questions/17907445/how-to-detect-ie11\n  else if (\n    browser == 'Netscape' &&\n    navigator.userAgent.indexOf('Trident/') != -1\n  ) {\n    browser = 'Microsoft Internet Explorer'\n    browserVersion = navigator.userAgent.substring(verOffset + 5)\n    if ((verOffset = navigator.userAgent.indexOf('rv:')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 3)\n    }\n  }\n\n  // Chrome\n  else if ((verOffset = navigator.userAgent.indexOf('Chrome')) != -1) {\n    browser = 'Chrome'\n    browserVersion = navigator.userAgent.substring(verOffset + 7)\n  }\n  // Safari\n  else if ((verOffset = navigator.userAgent.indexOf('Safari')) != -1) {\n    browser = 'Safari'\n    browserVersion = navigator.userAgent.substring(verOffset + 7)\n    if ((verOffset = navigator.userAgent.indexOf('Version')) != -1) {\n      browserVersion = navigator.userAgent.substring(verOffset + 8)\n    }\n\n    // Chrome on iPad identifies itself as Safari. Actual results do not match what Google claims\n    //  at: https://developers.google.com/chrome/mobile/docs/user-agent?hl=ja\n    //  No mention of chrome in the user agent string. However it does mention CriOS, which presumably\n    //  can be keyed on to detect it.\n    if (navigator.userAgent.indexOf('CriOS') != -1) {\n      //Chrome on iPad spoofing Safari...correct it.\n      browser = 'Chrome'\n      //Don't believe there is a way to grab the accurate version number, so leaving that for now.\n    }\n  }\n  // Firefox\n  else if ((verOffset = navigator.userAgent.indexOf('Firefox')) != -1) {\n    browser = 'Firefox'\n    browserVersion = navigator.userAgent.substring(verOffset + 8)\n  }\n  // Other browsers\n  else if (\n    (nameOffset = navigator.userAgent.lastIndexOf(' ') + 1) <\n    (verOffset = navigator.userAgent.lastIndexOf('/'))\n  ) {\n    browser = navigator.userAgent.substring(nameOffset, verOffset)\n    browserVersion = navigator.userAgent.substring(verOffset + 1)\n    if (browser.toLowerCase() == browser.toUpperCase()) {\n      browser = navigator.appName\n    }\n  }\n  // trim the browser version string\n  if ((ix = browserVersion.indexOf(';')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n  if ((ix = browserVersion.indexOf(' ')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n  if ((ix = browserVersion.indexOf(')')) != -1)\n    browserVersion = browserVersion.substring(0, ix)\n\n  return [browser, browserVersion].join('-')\n}\n\nfunction getBrowserOsDetails() {\n  var os = 'unknown'\n  var clientStrings = [\n    { s: 'Windows 10', r: /(Windows 10.0|Windows NT 10.0)/ },\n    { s: 'Windows 8.1', r: /(Windows 8.1|Windows NT 6.3)/ },\n    { s: 'Windows 8', r: /(Windows 8|Windows NT 6.2)/ },\n    { s: 'Windows 7', r: /(Windows 7|Windows NT 6.1)/ },\n    { s: 'Windows Vista', r: /Windows NT 6.0/ },\n    { s: 'Windows Server 2003', r: /Windows NT 5.2/ },\n    { s: 'Windows XP', r: /(Windows NT 5.1|Windows XP)/ },\n    { s: 'Windows 2000', r: /(Windows NT 5.0|Windows 2000)/ },\n    { s: 'Windows ME', r: /(Win 9x 4.90|Windows ME)/ },\n    { s: 'Windows 98', r: /(Windows 98|Win98)/ },\n    { s: 'Windows 95', r: /(Windows 95|Win95|Windows_95)/ },\n    { s: 'Windows NT 4.0', r: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/ },\n    { s: 'Windows CE', r: /Windows CE/ },\n    { s: 'Windows 3.11', r: /Win16/ },\n    { s: 'Android', r: /Android/ },\n    { s: 'Open BSD', r: /OpenBSD/ },\n    { s: 'Sun OS', r: /SunOS/ },\n    { s: 'Chrome OS', r: /CrOS/ },\n    { s: 'Linux', r: /(Linux|X11(?!.*CrOS))/ },\n    { s: 'iOS', r: /(iPhone|iPad|iPod)/ },\n    { s: 'Mac OS X', r: /Mac OS X/ },\n    { s: 'Mac OS', r: /(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n    { s: 'QNX', r: /QNX/ },\n    { s: 'UNIX', r: /UNIX/ },\n    { s: 'BeOS', r: /BeOS/ },\n    { s: 'OS/2', r: /OS\\/2/ },\n    {\n      s: 'Search Bot',\n      r: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\\/Teoma|ia_archiver)/,\n    },\n  ]\n  for (var id in clientStrings) {\n    var cs = clientStrings[id]\n    if (cs.r.test(navigator.userAgent)) {\n      os = cs.s\n      break\n    }\n  }\n\n  var osVersion = 'unknown'\n\n  if (/Windows/.test(os)) {\n    osVersion = /Windows (.*)/.exec(os)[1]\n    os = 'Windows'\n  }\n\n  switch (os) {\n    case 'Mac OS':\n    case 'Mac OS X':\n    case 'Android':\n      osVersion = /(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\\.\\_\\d]+)/.exec(\n        navigator.userAgent\n      )[1]\n      break\n\n    case 'iOS':\n      osVersion = /OS (\\d+)_(\\d+)_?(\\d+)?/.exec(navigator.appVersion)\n      osVersion = osVersion[1] + '.' + osVersion[2] + '.' + (osVersion[3] | 0)\n      break\n  }\n  return [os, osVersion].join('-')\n}\n\n/**\n * For checking process.env always use `hasOwnProperty`\n * Some providers could throw an error when trying to access env variables that does not exists\n * @private */\nfunction getNodeRuntimeEnv() {\n  var runtimeEnvs = [\n    {\n      name: 'Netlify',\n      check: function() {\n        return process.env.hasOwnProperty('NETLIFY_IMAGES_CDN_DOMAIN')\n      },\n    },\n    {\n      name: 'Vercel',\n      check: function() {\n        return process.env.hasOwnProperty('VERCEL')\n      },\n    },\n    {\n      name: 'Heroku',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('PATH') &&\n          process.env.PATH.indexOf('.heroku') !== -1\n        )\n      },\n    },\n    {\n      name: 'AWS Lambda',\n      check: function() {\n        return process.env.hasOwnProperty('AWS_LAMBDA_FUNCTION_VERSION')\n      },\n    },\n    {\n      name: 'GCP Cloud Functions',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('_') &&\n          process.env._.indexOf('google') !== -1\n        )\n      },\n    },\n    {\n      name: 'GCP Compute Instances',\n      check: function() {\n        return process.env.hasOwnProperty('GOOGLE_CLOUD_PROJECT')\n      },\n    },\n    {\n      name: 'Azure Cloud Functions',\n      check: function() {\n        return process.env.hasOwnProperty(\n          'WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES'\n        )\n      },\n    },\n    {\n      name: 'Azure Compute',\n      check: function() {\n        return (\n          process.env.hasOwnProperty('ORYX_ENV_TYPE') &&\n          process.env.hasOwnProperty('WEBSITE_INSTANCE_ID') &&\n          process.env.ORYX_ENV_TYPE === 'AppService'\n        )\n      },\n    },\n    {\n      name: 'Mongo Stitch',\n      check: function() {\n        return typeof crossGlobal.StitchError === 'function'\n      },\n    },\n    {\n      name: 'Render',\n      check: function() {\n        return process.env.hasOwnProperty('RENDER_SERVICE_ID')\n      },\n    },\n    {\n      name: 'Begin',\n      check: function() {\n        return process.env.hasOwnProperty('BEGIN_DATA_SCOPE_ID')\n      },\n    },\n  ]\n  var detectedEnv = runtimeEnvs.find(env => env.check())\n\n  return detectedEnv ? detectedEnv.name : 'unknown'\n}\n\n/**\n * If defined, returns the given value. Otherwise, returns the default value.\n * @param {any} obj The given value.\n * @param {any} def The default value.\n * @private\n */\nfunction defaults(obj, def) {\n  if (obj === undefined) {\n    return def\n  } else {\n    return obj\n  }\n}\n\n/**\n * Used for functions that take an options objects.\n * Fills in defaults for options not provided.\n * Throws errors for provided options that aren't recognized.\n * A default value of `undefined` is used to indicate that the option must be provided.\n * @private\n */\nfunction applyDefaults(provided, defaults) {\n  var out = {}\n\n  for (var providedKey in provided) {\n    if (!(providedKey in defaults)) {\n      throw new Error('No such option ' + providedKey)\n    }\n    out[providedKey] = provided[providedKey]\n  }\n\n  for (var defaultsKey in defaults) {\n    if (!(defaultsKey in out)) {\n      out[defaultsKey] = defaults[defaultsKey]\n    }\n  }\n\n  return out\n}\n\n/**\n * Returns a new object without any keys where the value would be null or undefined.\n * @private\n * */\nfunction removeNullAndUndefinedValues(object) {\n  var res = {}\n  for (var key in object) {\n    var val = object[key]\n    if (val !== null && val !== undefined) {\n      res[key] = val\n    }\n  }\n  return res\n}\n\n/**\n * Returns a new object without any keys where the value would be undefined.\n * @private\n * */\nfunction removeUndefinedValues(object) {\n  var res = {}\n  for (var key in object) {\n    var val = object[key]\n    if (val !== undefined) {\n      res[key] = val\n    }\n  }\n  return res\n}\n\n/**\n * Returns a boolean stating if the given object has a given property\n * @private\n * */\nfunction checkInstanceHasProperty(obj, prop) {\n  return typeof obj === 'object' && obj !== null && Boolean(obj[prop])\n}\n\nfunction formatUrl(base, path, query) {\n  query = typeof query === 'object' ? querystringify(query) : query\n  return [\n    base,\n    path ? (path.charAt(0) === '/' ? '' : '/' + path) : '',\n    query ? (query.charAt(0) === '?' ? '' : '?' + query) : '',\n  ].join('')\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || ''\n\n  var pairs = [],\n    value,\n    key\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?'\n\n  for (key in obj) {\n    if (checkInstanceHasProperty(obj, key)) {\n      value = obj[key]\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undefined || isNaN(value))) {\n        value = ''\n      }\n\n      key = encode(key)\n      value = encode(value)\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue\n      pairs.push(key + '=' + value)\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : ''\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input)\n  } catch (e) {\n    return null\n  }\n}\n\n/**\n * Merge two objects into one\n * @param obj1\n * @param obj2\n * @returns obj3 a new object based on obj1 and obj2\n */\nfunction mergeObjects(obj1, obj2) {\n  var obj3 = {}\n  for (var attrname in obj1) {\n    obj3[attrname] = obj1[attrname]\n  }\n  for (var attrname in obj2) {\n    obj3[attrname] = obj2[attrname]\n  }\n  return obj3\n}\n\n/**\n * Resolves which Fetch API compatible function to use. If an override is\n * provided, returns the override. If no override and the global (window) has\n * \"fetch\" property, return the native fetch. Otherwise returns the cross-fetch polyfill.\n *\n * @param {?function} fetchOverride An Fetch API compatible function to use.\n * @returns {function} A Fetch API compatible function.\n * @private\n */\nfunction resolveFetch(fetchOverride) {\n  if (typeof fetchOverride === 'function') {\n    return fetchOverride\n  }\n\n  if (typeof crossGlobal.fetch === 'function') {\n    // NB. Rebinding to global is needed for Safari\n    return crossGlobal.fetch.bind(crossGlobal)\n  }\n\n  return require('cross-fetch')\n}\n\nfunction notifyAboutNewVersion() {\n  var isNotified\n  const checkAndNotify = checkNewVersion => {\n    if (!isNodeEnv() || isNotified || !checkNewVersion) return\n    function onResponse(latestVersion) {\n      var isNewVersionAvailable = latestVersion > packageJson.version\n      if (isNewVersionAvailable) {\n        console.info(\n          boxen(\n            'New ' +\n              packageJson.name +\n              ' version available ' +\n              chalk.dim(packageJson.version) +\n              chalk.reset(' \u2192 ') +\n              chalk.green(latestVersion) +\n              `\\nChangelog: https://github.com/${packageJson.repository}/blob/main/CHANGELOG.md`,\n            { padding: 1, borderColor: 'yellow' }\n          )\n        )\n      }\n    }\n\n    isNotified = true\n    resolveFetch()('https://registry.npmjs.org/' + packageJson.name)\n      .then(resp => resp.json())\n      .then(json => onResponse(json['dist-tags'].latest))\n      .catch(err => {\n        console.error('Unable to check new driver version')\n        console.error(err)\n      })\n  }\n\n  return checkAndNotify\n}\n\nmodule.exports = {\n  notifyAboutNewVersion: notifyAboutNewVersion,\n  crossGlobal: crossGlobal,\n  mergeObjects: mergeObjects,\n  formatUrl: formatUrl,\n  querystringify: querystringify,\n  inherits: inherits,\n  isNodeEnv: isNodeEnv,\n  getEnvVariable: getEnvVariable,\n  defaults: defaults,\n  applyDefaults: applyDefaults,\n  removeNullAndUndefinedValues: removeNullAndUndefinedValues,\n  removeUndefinedValues: removeUndefinedValues,\n  checkInstanceHasProperty: checkInstanceHasProperty,\n  getBrowserDetails: getBrowserDetails,\n  getBrowserOsDetails: getBrowserOsDetails,\n  getNodeRuntimeEnv: getNodeRuntimeEnv,\n  resolveFetch: resolveFetch,\n}\n", "'use strict'\n\nvar util = require('./_util')\n\n/**\n * A representation of a FaunaDB Query Expression. Generally, you shouldn't need\n * to use this class directly; use the Query helpers defined in {@link module:query}.\n *\n * @param {Object} obj The object that represents a Query to be treated as an Expression.\n * @constructor\n */\nfunction Expr(obj) {\n  this.raw = obj\n}\n\nExpr.prototype._isFaunaExpr = true\n\nExpr.prototype.toJSON = function() {\n  return this.raw\n}\n\nExpr.prototype.toFQL = function() {\n  return exprToString(this.raw)\n}\n\nvar varArgsFunctions = [\n  'Do',\n  'Call',\n  'Union',\n  'Intersection',\n  'Difference',\n  'Equals',\n  'Add',\n  'BitAnd',\n  'BitOr',\n  'BitXor',\n  'Divide',\n  'Max',\n  'Min',\n  'Modulo',\n  'Multiply',\n  'Subtract',\n  'LT',\n  'LTE',\n  'GT',\n  'GTE',\n  'And',\n  'Or',\n]\n\n// FQL function names come across the wire as all lowercase letters\n// (like the key of this object). Not all are properly snake-cased\n// on the Core side, which causes improper capitalizations.\n//\n// JS Driver patch: https://faunadb.atlassian.net/browse/FE-540\n// Core update: https://faunadb.atlassian.net/browse/ENG-2110\n\nvar specialCases = {\n  containsstrregex: 'ContainsStrRegex',\n  endswith: 'EndsWith',\n  findstr: 'FindStr',\n  findstrregex: 'FindStrRegex',\n  gt: 'GT',\n  gte: 'GTE',\n  is_nonempty: 'is_non_empty',\n  lowercase: 'LowerCase',\n  lt: 'LT',\n  lte: 'LTE',\n  ltrim: 'LTrim',\n  ngram: 'NGram',\n  rtrim: 'RTrim',\n  regexescape: 'RegexEscape',\n  replacestr: 'ReplaceStr',\n  replacestrregex: 'ReplaceStrRegex',\n  startswith: 'StartsWith',\n  substring: 'SubString',\n  titlecase: 'TitleCase',\n  uppercase: 'UpperCase',\n}\n\n/**\n *\n * @param {Expr} expression A FQL expression\n * @returns {Boolean} Returns true for valid expressions\n * @private\n */\nfunction isExpr(expression) {\n  return (\n    expression instanceof Expr ||\n    util.checkInstanceHasProperty(expression, '_isFaunaExpr')\n  )\n}\n\n/**\n *\n * @param {Object} obj An object to print\n * @returns {String} String representation of object\n * @private\n */\nfunction printObject(obj) {\n  return (\n    '{' +\n    Object.keys(obj)\n      .map(function(k) {\n        return '\"' + k + '\"' + ': ' + exprToString(obj[k])\n      })\n      .join(', ') +\n    '}'\n  )\n}\n\n/**\n *\n * @param {Array} arr An array to print\n * @param {Function} toStr Function used for stringification\n * @returns {String} String representation of array\n * @private\n */\nfunction printArray(arr, toStr) {\n  return arr\n    .map(function(item) {\n      return toStr(item)\n    })\n    .join(', ')\n}\n\n/**\n *\n * @param {String} fn A snake-case FQL function name\n * @returns {String} The correpsonding camel-cased FQL function name\n * @private\n */\nfunction convertToCamelCase(fn) {\n  // For FQL functions with special formatting concerns, we\n  // use the specialCases object above to define their casing.\n  if (fn in specialCases) fn = specialCases[fn]\n\n  return fn\n    .split('_')\n    .map(function(str) {\n      return str.charAt(0).toUpperCase() + str.slice(1)\n    })\n    .join('')\n}\n\nvar exprToString = function(expr, caller) {\n  // If expr is a Expr, we want to parse expr.raw instead\n  if (isExpr(expr)) {\n    if ('value' in expr) return expr.toString()\n    expr = expr.raw\n  }\n\n  // Return early to avoid extra work if null\n  if (expr === null) {\n    return 'null'\n  }\n\n  // Return stringified value if expression is not an Object or Array\n  switch (typeof expr) {\n    case 'string':\n      return JSON.stringify(expr)\n    case 'symbol':\n    case 'number':\n    case 'boolean':\n      return expr.toString()\n    case 'undefined':\n      return 'undefined'\n  }\n\n  // Handle expression Arrays\n  if (Array.isArray(expr)) {\n    var array = printArray(expr, exprToString)\n    return varArgsFunctions.indexOf(caller) != -1 ? array : '[' + array + ']'\n  }\n\n  // Parse expression Objects\n  if ('match' in expr) {\n    var matchStr = exprToString(expr['match'])\n    var terms = expr['terms'] || []\n\n    if (isExpr(terms)) terms = terms.raw\n\n    if (Array.isArray(terms) && terms.length == 0)\n      return 'Match(' + matchStr + ')'\n\n    if (Array.isArray(terms)) {\n      return (\n        'Match(' + matchStr + ', [' + printArray(terms, exprToString) + '])'\n      )\n    }\n\n    return 'Match(' + matchStr + ', ' + exprToString(terms) + ')'\n  }\n\n  if ('paginate' in expr) {\n    var exprKeys = Object.keys(expr)\n    if (exprKeys.length === 1) {\n      return 'Paginate(' + exprToString(expr['paginate']) + ')'\n    }\n\n    var expr2 = Object.assign({}, expr)\n    delete expr2['paginate']\n\n    return (\n      'Paginate(' +\n      exprToString(expr['paginate']) +\n      ', ' +\n      printObject(expr2) +\n      ')'\n    )\n  }\n\n  if ('let' in expr && 'in' in expr) {\n    var letExpr = ''\n\n    if (Array.isArray(expr['let']))\n      letExpr = '[' + printArray(expr['let'], printObject) + ']'\n    else letExpr = printObject(expr['let'])\n\n    return 'Let(' + letExpr + ', ' + exprToString(expr['in']) + ')'\n  }\n\n  if ('object' in expr) return printObject(expr['object'])\n\n  if ('merge' in expr) {\n    if (expr.lambda) {\n      return (\n        'Merge(' +\n        exprToString(expr.merge) +\n        ', ' +\n        exprToString(expr.with) +\n        ', ' +\n        exprToString(expr.lambda) +\n        ')'\n      )\n    }\n\n    return (\n      'Merge(' + exprToString(expr.merge) + ', ' + exprToString(expr.with) + ')'\n    )\n  }\n\n  if ('lambda' in expr) {\n    return (\n      'Lambda(' +\n      exprToString(expr['lambda']) +\n      ', ' +\n      exprToString(expr['expr']) +\n      ')'\n    )\n  }\n\n  if ('filter' in expr) {\n    return (\n      'Filter(' +\n      exprToString(expr['collection']) +\n      ', ' +\n      exprToString(expr['filter']) +\n      ')'\n    )\n  }\n\n  if ('call' in expr) {\n    return (\n      'Call(' +\n      exprToString(expr['call']) +\n      ', ' +\n      exprToString(expr['arguments']) +\n      ')'\n    )\n  }\n\n  if ('map' in expr) {\n    return (\n      'Map(' +\n      exprToString(expr['collection']) +\n      ', ' +\n      exprToString(expr['map']) +\n      ')'\n    )\n  }\n\n  if ('foreach' in expr) {\n    return (\n      'Foreach(' +\n      exprToString(expr['collection']) +\n      ', ' +\n      exprToString(expr['foreach']) +\n      ')'\n    )\n  }\n\n  var keys = Object.keys(expr)\n  var fn = keys[0]\n  fn = convertToCamelCase(fn)\n\n  // The filter prevents zero arity functions from having a null argument\n  // This only works under the assumptions\n  // that there are no functions where a single 'null' argument makes sense.\n  var args = keys\n    .filter(k => expr[k] !== null || keys.length > 1)\n    .map(k => exprToString(expr[k], fn))\n    .join(', ')\n\n  return fn + '(' + args + ')'\n}\n\nExpr.toString = exprToString\n\nmodule.exports = Expr\n", "'use strict'\n\nvar util = require('./_util')\n\n/**\n * FaunaDB error types. Request errors can originate from the client (e.g. bad\n * method parameters) or from the FaunaDB Server (e.g. invalid queries,\n * timeouts.) Server errors will subclass {@link module:errors~FaunaHTTPError}.\n * Stream errors will subclass {@link module:errors~StreamError}.\n *\n * @module errors\n */\n\n/**\n * The base exception type for all FaunaDB errors.\n *\n * @param {string} message\n * @extends Error\n * @constructor\n */\nfunction FaunaError(name, message, description) {\n  Error.call(this)\n\n  /**\n   * Name of this exception.\n   * @type {string}\n   */\n  this.name = name\n\n  /**\n   * Message for this exception.\n   * @type {string}\n   */\n  this.message = message\n\n  /**\n   * Description for this exception.\n   * @type {string}\n   */\n  this.description = description\n}\n\nutil.inherits(FaunaError, Error)\n\n/**\n * Exception thrown by this client library when an invalid\n * value is provided as a function argument.\n *\n * @extends module:errors~FaunaError\n * @constructor\n */\nfunction InvalidValue(message) {\n  FaunaError.call(this, 'InvalidValue', message)\n}\n\nutil.inherits(InvalidValue, FaunaError)\n\n/**\n * Exception thrown by this client library when an invalid\n * value is provided as a function argument.\n *\n * @extends module:errors~FaunaError\n * @constructor\n */\nfunction InvalidArity(min, max, actual, callerFunc) {\n  var arityInfo = `${callerFunc} function requires ${messageForArity(\n    min,\n    max\n  )} argument(s) but ${actual} were given`\n  var documentationLink = logDocumentationLink(callerFunc)\n\n  FaunaError.call(this, 'InvalidArity', `${arityInfo}\\n${documentationLink}`)\n\n  /**\n   * Minimum number of arguments.\n   * @type {number}\n   */\n  this.min = min\n\n  /**\n   * Maximum number of arguments.\n   * @type {number}\n   */\n  this.max = max\n\n  /**\n   * Actual number of arguments called with.\n   * @type {number}\n   */\n  this.actual = actual\n\n  function messageForArity(min, max) {\n    if (max === null) return 'at least ' + min\n    if (min === null) return 'up to ' + max\n    if (min === max) return min\n    return 'from ' + min + ' to ' + max\n  }\n\n  function logDocumentationLink(functionName) {\n    var docsURL = 'https://docs.fauna.com/fauna/current/api/fql/functions/'\n    return `For more info, see the docs: ${docsURL}${functionName.toLowerCase()}`\n  }\n}\n\nutil.inherits(InvalidArity, FaunaError)\n\n/**\n * Base exception type for errors returned by the FaunaDB server.\n *\n * @param {RequestResult} requestResult\n *\n * @extends module:errors~FaunaError\n * @constructor\n */\nfunction FaunaHTTPError(name, requestResult) {\n  var response = requestResult.responseContent\n  var errors = response.errors\n  var message = errors.length === 0 ? '(empty \"errors\")' : errors[0].code\n  var description =\n    errors.length === 0 ? '(empty \"errors\")' : errors[0].description\n  FaunaError.call(this, name, message, description)\n\n  /**\n   * A wrapped {@link RequestResult} object, containing the request and response\n   * context of the failed request.\n   *\n   * @type {RequestResult}\n   */\n  this.requestResult = requestResult\n}\n\nutil.inherits(FaunaHTTPError, FaunaError)\n\n/**\n * Convenience method to return the errors from the response object.\n *\n * @returns {Object}\n */\nFaunaHTTPError.prototype.errors = function() {\n  return this.requestResult.responseContent.errors\n}\n\n/**\n * Takes a {@link RequestResult} and throws an appropriate exception if\n * it contains a failed request.\n *\n * @param requestResult {RequestResult}\n */\nFaunaHTTPError.raiseForStatusCode = function(requestResult) {\n  var code = requestResult.statusCode\n  if (code < 200 || code >= 300) {\n    switch (code) {\n      case 400:\n        throw new BadRequest(requestResult)\n      case 401:\n        throw new Unauthorized(requestResult)\n      case 403:\n        throw new PermissionDenied(requestResult)\n      case 404:\n        throw new NotFound(requestResult)\n      case 405:\n        throw new MethodNotAllowed(requestResult)\n      case 429:\n        throw new TooManyRequests(requestResult)\n      case 500:\n        throw new InternalError(requestResult)\n      case 503:\n        throw new UnavailableError(requestResult)\n      default:\n        throw new FaunaHTTPError('UnknownError', requestResult)\n    }\n  }\n}\n\n/**\n * A HTTP 400 error.\n *\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction BadRequest(requestResult) {\n  FaunaHTTPError.call(this, 'BadRequest', requestResult)\n}\n\nutil.inherits(BadRequest, FaunaHTTPError)\n\n/**\n * A HTTP 401 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction Unauthorized(requestResult) {\n  FaunaHTTPError.call(this, 'Unauthorized', requestResult)\n}\n\nutil.inherits(Unauthorized, FaunaHTTPError)\n\n/**\n * A HTTP 403 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction PermissionDenied(requestResult) {\n  FaunaHTTPError.call(this, 'PermissionDenied', requestResult)\n}\n\nutil.inherits(PermissionDenied, FaunaHTTPError)\n\n/**\n * A HTTP 404 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction NotFound(requestResult) {\n  FaunaHTTPError.call(this, 'NotFound', requestResult)\n}\n\nutil.inherits(NotFound, FaunaHTTPError)\n\n/**\n * A HTTP 405 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction MethodNotAllowed(requestResult) {\n  FaunaHTTPError.call(this, 'MethodNotAllowed', requestResult)\n}\n\nutil.inherits(MethodNotAllowed, FaunaHTTPError)\n\n/**\n * A HTTP 429 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction TooManyRequests(requestResult) {\n  FaunaHTTPError.call(this, 'TooManyRequests', requestResult)\n}\n\nutil.inherits(TooManyRequests, FaunaHTTPError)\n\n/**\n * A HTTP 500 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction InternalError(requestResult) {\n  FaunaHTTPError.call(this, 'InternalError', requestResult)\n}\n\nutil.inherits(InternalError, FaunaHTTPError)\n\n/**\n * A HTTP 503 error.\n * @param {RequestResult} requestResult\n * @extends module:errors~FaunaHTTPError\n * @constructor\n */\nfunction UnavailableError(requestResult) {\n  FaunaHTTPError.call(this, 'UnavailableError', requestResult)\n}\n\nutil.inherits(UnavailableError, FaunaHTTPError)\n\n/**\n * The base exception type for all stream related errors.\n *\n * @constructor\n * @param {string} name The error class name.\n * @param {string} message The error message.\n * @param {string} description The error detailed description.\n * @extends module:errors~FaunaError\n */\nfunction StreamError(name, message, description) {\n  FaunaError.call(this, name, message, description)\n}\n\nutil.inherits(StreamError, FaunaError)\n\n/**\n * An error thrown by the client when streams are not supported by the current\n * platform.\n *\n * @constructor\n * @param {string} description The error description.\n * @extends module:errors~StreamError\n */\nfunction StreamsNotSupported(description) {\n  FaunaError.call(\n    this,\n    'StreamsNotSupported',\n    'streams not supported',\n    description\n  )\n}\n\nutil.inherits(StreamsNotSupported, StreamError)\n\n/**\n * An Error thrown by the server when something wrong happened with the\n * subscribed stream.\n * @constructor\n * @param {Object} event The error event.\n * @property {Object} event The error event.\n * @extends module:errors~StreamError\n */\nfunction StreamErrorEvent(event) {\n  var error = event.data || {}\n  FaunaError.call(this, 'StreamErrorEvent', error.code, error.description)\n  this.event = event\n}\n\nutil.inherits(StreamErrorEvent, StreamError)\n\n/**\n * An error thrown when attempting to operate on a closed Client instance.\n *\n * @param {string} message The error message.\n * @param {?string} description The error description.\n * @extends module:errors~FaunaError\n * @constructor\n */\nfunction ClientClosed(message, description) {\n  FaunaError.call(this, 'ClientClosed', message, description)\n}\n\nutil.inherits(ClientClosed, FaunaError)\n\nmodule.exports = {\n  FaunaError: FaunaError,\n  ClientClosed: ClientClosed,\n  FaunaHTTPError: FaunaHTTPError,\n  InvalidValue: InvalidValue,\n  InvalidArity: InvalidArity,\n  BadRequest: BadRequest,\n  Unauthorized: Unauthorized,\n  PermissionDenied: PermissionDenied,\n  NotFound: NotFound,\n  MethodNotAllowed: MethodNotAllowed,\n  TooManyRequests: TooManyRequests,\n  InternalError: InternalError,\n  UnavailableError: UnavailableError,\n  StreamError: StreamError,\n  StreamsNotSupported: StreamsNotSupported,\n  StreamErrorEvent: StreamErrorEvent,\n}\n", "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n", "", "'use strict'\n\nvar base64 = require('base64-js')\nvar deprecate = require('util-deprecate')\nvar errors = require('./errors')\nvar Expr = require('./Expr')\nvar util = require('./_util')\nvar nodeUtil = util.isNodeEnv() ? require('util') : null\n\nvar customInspect = nodeUtil && nodeUtil.inspect.custom\nvar stringify = nodeUtil ? nodeUtil.inspect : JSON.stringify\n\n/**\n * FaunaDB value types. Generally, these collections do not need to be instantiated\n * directly; they can be constructed through helper methods in {@link module:query}.\n *\n * Instances of these collections will be returned in responses if the response object\n * contains these values. For example, a FaunaDB response containing\n *`{ \"@ref\": { \"id\": \"123\", \"collection\": { \"@ref\": { \"id\": \"frogs\", \"collection\": { \"@ref\": { \"id\": \"collectiones\" } } } } } }`\n * will be returned as `new values.Ref(\"123\", new values.Ref(\"frogs\", values.Native.COLLECTIONS))`.\n *\n * See the [FaunaDB Query API Documentation](https://app.fauna.com/documentation/reference/queryapi#simple-type)\n * for more information.\n *\n * @module values\n */\n\n/**\n * Base type for FaunaDB value objects.\n *\n * @extends Expr\n * @abstract\n * @constructor\n */\nfunction Value() {}\n\nValue.prototype._isFaunaValue = true\n\nutil.inherits(Value, Expr)\n\n/**\n * FaunaDB ref.\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {string} id\n *   The id portion of the ref.\n * @param {Ref} [collection]\n *   The collection portion of the ref.\n * @param {Ref} [database]\n *   The database portion of the ref.\n *\n * @extends module:values~Value\n * @constructor\n */\nfunction Ref(id, collection, database) {\n  if (!id) throw new errors.InvalidValue('id cannot be null or undefined')\n\n  this.value = { id: id }\n  if (collection) this.value['collection'] = collection\n  if (database) this.value['database'] = database\n}\n\nRef.prototype._isFaunaRef = true\n\nutil.inherits(Ref, Value)\n\n/**\n * Gets the collection part out of the Ref.\n *\n * @member {string}\n * @name module:values~Ref#collection\n */\nObject.defineProperty(Ref.prototype, 'collection', {\n  get: function() {\n    return this.value['collection']\n  },\n})\n\n/**\n * DEPRECATED. Gets the class part out of the Ref.\n *\n * @member {string}\n * @name module:values~Ref#class\n */\nObject.defineProperty(Ref.prototype, 'class', {\n  get: deprecate(function() {\n    return this.value['collection']\n  }, 'class is deprecated, use collection instead'),\n})\n\n/**\n * Gets the database part out of the Ref.\n *\n * @member {Ref}\n * @name module:values~Ref#database\n */\nObject.defineProperty(Ref.prototype, 'database', {\n  get: function() {\n    return this.value['database']\n  },\n})\n\n/**\n * Gets the id part out of the Ref.\n *\n * @member {Ref}\n * @name module:values~Ref#id\n */\nObject.defineProperty(Ref.prototype, 'id', {\n  get: function() {\n    return this.value['id']\n  },\n})\n\n/** @ignore */\nRef.prototype.toJSON = function() {\n  return { '@ref': this.value }\n}\n\nwrapToString(Ref, function() {\n  var constructors = {\n    collections: 'Collection',\n    databases: 'Database',\n    indexes: 'Index',\n    functions: 'Function',\n    roles: 'Role',\n    access_providers: 'AccessProvider',\n  }\n\n  var isNative = function(ref) {\n    return ref.collection === undefined\n  }\n\n  var toString = function(ref) {\n    if (isNative(ref)) {\n      var db = ref.database !== undefined ? ref.database.toString() : ''\n\n      if (ref.id === 'access_providers') return 'AccessProviders(' + db + ')'\n\n      return ref.id.charAt(0).toUpperCase() + ref.id.slice(1) + '(' + db + ')'\n    }\n\n    if (isNative(ref.collection)) {\n      var constructor = constructors[ref.collection.id]\n      if (constructor !== undefined) {\n        var db =\n          ref.database !== undefined ? ', ' + ref.database.toString() : ''\n        return constructor + '(\"' + ref.id + '\"' + db + ')'\n      }\n    }\n\n    return 'Ref(' + toString(ref.collection) + ', \"' + ref.id + '\")'\n  }\n\n  return toString(this)\n})\n\n/** @ignore */\nRef.prototype.valueOf = function() {\n  return this.value\n}\n\n/**\n * Whether these are both Refs and have the same value.\n * @param {any} other\n * @returns {boolean}\n */\nRef.prototype.equals = function(other) {\n  return (\n    (other instanceof Ref ||\n      util.checkInstanceHasProperty(other, '_isFaunaRef')) &&\n    this.id === other.id &&\n    ((this.collection === undefined && other.collection === undefined) ||\n      this.collection.equals(other.collection)) &&\n    ((this.database === undefined && other.database === undefined) ||\n      this.database.equals(other.database))\n  )\n}\n\nvar Native = {\n  COLLECTIONS: new Ref('collections'),\n  INDEXES: new Ref('indexes'),\n  DATABASES: new Ref('databases'),\n  FUNCTIONS: new Ref('functions'),\n  ROLES: new Ref('roles'),\n  KEYS: new Ref('keys'),\n  ACCESS_PROVIDERS: new Ref('access_providers'),\n}\n\nNative.fromName = function(name) {\n  switch (name) {\n    case 'collections':\n      return Native.COLLECTIONS\n    case 'indexes':\n      return Native.INDEXES\n    case 'databases':\n      return Native.DATABASES\n    case 'functions':\n      return Native.FUNCTIONS\n    case 'roles':\n      return Native.ROLES\n    case 'keys':\n      return Native.KEYS\n    case 'access_providers':\n      return Native.ACCESS_PROVIDERS\n  }\n  return new Ref(name)\n}\n\n/**\n * FaunaDB Set.\n * This represents a set returned as part of a response.\n * This looks like `{\"@set\": set_query}`.\n * For query sets see {@link match}, {@link union},\n * {@link intersection}, {@link difference}, and {@link join}.\n *\n * @extends module:values~Value\n * @constructor\n */\nfunction SetRef(value) {\n  /** Raw query object. */\n  this.value = value\n}\n\nutil.inherits(SetRef, Value)\n\nwrapToString(SetRef, function() {\n  return Expr.toString(this.value)\n})\n\n/** @ignore */\nSetRef.prototype.toJSON = function() {\n  return { '@set': this.value }\n}\n\n/** FaunaDB time. See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {string|Date} value If a Date, this is converted to a string.\n * @extends module:values~Value\n * @constructor\n */\nfunction FaunaTime(value) {\n  if (value instanceof Date) {\n    value = value.toISOString()\n  } else if (!(value.charAt(value.length - 1) === 'Z')) {\n    throw new errors.InvalidValue(\"Only allowed timezone is 'Z', got: \" + value)\n  }\n\n  this.value = value\n}\n\nutil.inherits(FaunaTime, Value)\n\n/**\n * Returns the date wrapped by this object.\n * This is lossy as Dates have millisecond rather than nanosecond precision.\n *\n * @member {Date}\n * @name module:values~FaunaTime#date\n */\nObject.defineProperty(FaunaTime.prototype, 'date', {\n  get: function() {\n    return new Date(this.value)\n  },\n})\n\nwrapToString(FaunaTime, function() {\n  return 'Time(\"' + this.value + '\")'\n})\n\n/** @ignore */\nFaunaTime.prototype.toJSON = function() {\n  return { '@ts': this.value }\n}\n\n/** FaunaDB date. See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {string|Date} value\n *   If a Date, this is converted to a string, with time-of-day discarded.\n * @extends module:values~Value\n * @constructor\n */\nfunction FaunaDate(value) {\n  if (value instanceof Date) {\n    // The first 10 characters 'YYYY-MM-DD' are the date portion.\n    value = value.toISOString().slice(0, 10)\n  }\n\n  /**\n   * ISO8601 date.\n   * @type {string}\n   */\n  this.value = value\n}\n\nutil.inherits(FaunaDate, Value)\n\n/**\n * @member {Date}\n * @name module:values~FaunaDate#date\n */\nObject.defineProperty(FaunaDate.prototype, 'date', {\n  get: function() {\n    return new Date(this.value)\n  },\n})\n\nwrapToString(FaunaDate, function() {\n  return 'Date(\"' + this.value + '\")'\n})\n\n/** @ignore */\nFaunaDate.prototype.toJSON = function() {\n  return { '@date': this.value }\n}\n\n/** FaunaDB bytes. See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {Uint8Array|ArrayBuffer|string} value\n *    If ArrayBuffer it's converted to Uint8Array\n *    If string it must be base64 encoded and it's converted to Uint8Array\n * @extends module:values~Value\n * @constructor\n */\nfunction Bytes(value) {\n  if (value instanceof ArrayBuffer) {\n    this.value = new Uint8Array(value)\n  } else if (typeof value === 'string') {\n    this.value = base64.toByteArray(value)\n  } else if (value instanceof Uint8Array) {\n    this.value = value\n  } else {\n    throw new errors.InvalidValue(\n      'Bytes type expect argument to be either Uint8Array|ArrayBuffer|string, got: ' +\n        stringify(value)\n    )\n  }\n}\n\nutil.inherits(Bytes, Value)\n\nwrapToString(Bytes, function() {\n  return 'Bytes(\"' + base64.fromByteArray(this.value) + '\")'\n})\n\n/** @ignore */\nBytes.prototype.toJSON = function() {\n  return { '@bytes': base64.fromByteArray(this.value) }\n}\n\n/** FaunaDB query. See the [docs](https://app.fauna.com/documentation/reference/queryapi#special-type).\n *\n * @param {any} value\n * @extends module:values~Value\n * @constructor\n */\nfunction Query(value) {\n  this.value = value\n}\n\nutil.inherits(Query, Value)\n\nwrapToString(Query, function() {\n  return 'Query(' + Expr.toString(this.value) + ')'\n})\n\n/** @ignore */\nQuery.prototype.toJSON = function() {\n  return { '@query': this.value }\n}\n\n/** @ignore */\nfunction wrapToString(type, fn) {\n  type.prototype.toString = fn\n  type.prototype.inspect = fn\n\n  if (customInspect) {\n    type.prototype[customInspect] = fn\n  }\n}\n\nmodule.exports = {\n  Value: Value,\n  Ref: Ref,\n  Native: Native,\n  SetRef: SetRef,\n  FaunaTime: FaunaTime,\n  FaunaDate: FaunaDate,\n  Bytes: Bytes,\n  Query: Query,\n}\n", "/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n", "'use strict'\n\nvar annotate = require('fn-annotate')\nvar deprecate = require('util-deprecate')\nvar Expr = require('./Expr')\nvar errors = require('./errors')\nvar values = require('./values')\nvar objectAssign = require('object-assign')\nvar util = require('./_util')\n\n/**\n * This module contains functions used to construct FaunaDB Queries.\n *\n * See the [FaunaDB Query API Documentation](https://app.fauna.com/documentation/reference/queryapi)\n * for per-function documentation.\n *\n * @module query\n */\n\n/**\n * @typedef {(Expr|string|number|boolean|Object)} module:query~ExprTerm\n */\n\n/**\n * @typedef {(module:query~ExprTerm|Array<module:query~ExprTerm>)} module:query~ExprArg\n */\n\n// Type helpers\n\n/**\n * If one parameter is provided, constructs a literal Ref value.\n * The string `collections/widget/123` will be equivalent to `new values.Ref('123', new values.Ref('widget', values.Native.COLLECTIONS))`\n *\n * If two are provided, constructs a Ref() function that, when evaluated, returns a Ref value.\n *\n * @param {string|module:query~ExprArg} ref|cls\n *   Alone, the ref in path form. Combined with `id`, must be a collection ref.\n * @param {module:query~ExprArg} [id]\n *   A numeric id of the given collection.\n * @return {Expr}\n */\nfunction Ref() {\n  arity.between(1, 2, arguments, Ref.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ '@ref': wrap(arguments[0]) })\n    case 2:\n      return new Expr({ ref: wrap(arguments[0]), id: wrap(arguments[1]) })\n  }\n}\n\n/**\n * @param {Uint8Array|ArrayBuffer|module:query~ExprArg} bytes\n *   A base64 encoded string or a byte array\n * @return {Expr}\n */\nfunction Bytes(bytes) {\n  arity.exact(1, arguments, Bytes.name)\n  return new values.Bytes(bytes)\n}\n\n// Basic forms\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} msg\n *   The message to send back to the client.\n * @return {Expr}\n * */\nfunction Abort(msg) {\n  arity.exact(1, arguments, Abort.name)\n  return new Expr({ abort: wrap(msg) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} timestamp\n *   An Expr that will evaluate to a Time.\n * @param {module:query~ExprArg} expr\n *   The Expr to run at the given snapshot time.\n * @return {Expr}\n * */\nfunction At(timestamp, expr) {\n  arity.exact(2, arguments, At.name)\n  return new Expr({ at: wrap(timestamp), expr: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} bindings\n *   A set of bindings to use within the given expression.\n * @param {module:query~ExprArg} in\n *   The expression to run with the given bindings.\n * @return {Expr}\n * */\nfunction Let(vars, expr) {\n  arity.exact(2, arguments, Let.name)\n  var bindings = []\n\n  if (Array.isArray(vars)) {\n    bindings = vars.map(function(item) {\n      return wrapValues(item)\n    })\n  } else {\n    bindings = Object.keys(vars)\n      .filter(function(k) {\n        return vars[k] !== undefined\n      })\n      .map(function(k) {\n        var b = {}\n        b[k] = wrap(vars[k])\n        return b\n      })\n  }\n\n  if (typeof expr === 'function') {\n    if (Array.isArray(vars)) {\n      var expr_vars = []\n\n      vars.forEach(function(item) {\n        Object.keys(item).forEach(function(name) {\n          expr_vars.push(Var(name))\n        })\n      })\n\n      expr = expr.apply(null, expr_vars)\n    } else {\n      expr = expr.apply(\n        null,\n        Object.keys(vars).map(function(name) {\n          return Var(name)\n        })\n      )\n    }\n  }\n\n  return new Expr({ let: bindings, in: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} varName\n *   The name of the bound var.\n * @return {Expr}\n * */\nfunction Var(varName) {\n  arity.exact(1, arguments, Var.name)\n  return new Expr({ var: wrap(varName) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {module:query~ExprArg} condition\n *   An expression that returns a boolean.\n * @param {module:query~ExprArg} then\n *   The expression to run if condition is true.\n * @param {module:query~ExprArg} else\n *   The expression to run if the condition is false.\n * @return {Expr}\n * */\nfunction If(condition, then, _else) {\n  arity.exact(3, arguments, If.name)\n  return new Expr({ if: wrap(condition), then: wrap(then), else: wrap(_else) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {...module:query~ExprArg} args\n *   A series of expressions to run.\n * @return {Expr}\n * */\nfunction Do() {\n  arity.min(1, arguments, Do.name)\n  var args = argsToArray(arguments)\n  return new Expr({ do: wrap(args) })\n}\n\n/** See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * @param {...module:query~ExprArg} fields\n *   The object to be escaped.\n * @return {Expr}\n * */\nvar objectFunction = function(fields) {\n  arity.exact(1, arguments, objectFunction.name)\n  return new Expr({ object: wrapValues(fields) })\n}\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * Directly produces a FaunaDB Lambda expression as described in the FaunaDB reference\n * documentation.\n *\n * @param {module:query~ExprArg} var\n *   The names of the variables to be bound in this lambda expression.\n * @param {module:query~ExprArg} expr\n *   The lambda expression.\n * @return {Expr}\n */\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * Takes a Javascript function, and will transform it\n * into the appropriate FaunaDB query. For example:\n *\n * ```\n * Lambda(function(a) { return Add(a, a); });\n * // Returns { lambda: 'a', expr: { add: [{ var: a }, { var: a }] } }\n * ```\n * Note that the driver will handle wrapping all usages of the lambda's bound\n * variables with the {@link modules:query~Var} function.\n *\n * @param {function} func\n *   Takes the provided function and produces the appropriate FaunaDB query expression.\n * @return {Expr}\n *\n */ function Lambda() {\n  arity.between(1, 2, arguments, Lambda.name)\n  switch (arguments.length) {\n    case 1:\n      var value = arguments[0]\n      if (typeof value === 'function') {\n        return _lambdaFunc(value)\n      } else if (\n        value instanceof Expr ||\n        util.checkInstanceHasProperty(value, '_isFaunaExpr')\n      ) {\n        return value\n      } else {\n        throw new errors.InvalidValue(\n          'Lambda function takes either a Function or an Expr.'\n        )\n      }\n    case 2:\n      var var_name = arguments[0]\n      var expr = arguments[1]\n\n      return _lambdaExpr(var_name, expr)\n  }\n}\n\n/**\n * @private\n */\nfunction _lambdaFunc(func) {\n  var vars = annotate(func)\n  switch (vars.length) {\n    case 0:\n      throw new errors.InvalidValue(\n        'Provided Function must take at least 1 argument.'\n      )\n    case 1:\n      return _lambdaExpr(vars[0], func(Var(vars[0])))\n    default:\n      return _lambdaExpr(\n        vars,\n        func.apply(\n          null,\n          vars.map(function(name) {\n            return Var(name)\n          })\n        )\n      )\n  }\n}\n\n/**\n * @private\n */\nfunction _lambdaExpr(var_name, expr) {\n  return new Expr({ lambda: wrap(var_name), expr: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * Invokes a given function passing in the provided arguments\n *\n * ```\n * Call(Ref(\"functions/a_function\"), 1, 2)\n * ```\n *\n * @param {module:query~ExprArg} ref\n *   The ref of the UserDefinedFunction to call\n * @param {...module:query~ExprArg} args\n *   A series of values to pass as arguments to the UDF.\n * @return {Expr}\n * */\nfunction Call(ref) {\n  arity.min(1, arguments, Call.name)\n  var args = argsToArray(arguments)\n  args.shift()\n  return new Expr({ call: wrap(ref), arguments: wrap(varargs(args)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#basic-forms).\n *\n * Constructs a `@query` type using the Lambda() or a function.\n *\n * ```\n * Query(Lambda(['a', 'b'], Add(Var('a'), Var('b'))))\n * Query(function (a, b) { return Add(a, b) })\n * ```\n *\n * @param {module:query~ExprArg|function} lambda\n *   A function to escape as a query.\n * @return {Expr}\n * */\nfunction Query(lambda) {\n  arity.exact(1, arguments, Query.name)\n  return new Expr({ query: wrap(lambda) })\n}\n\n// Collection functions\n\n/** See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection to be mapped over.\n * @param {module:query~ExprArg|function} lambda\n *   A function to be called for each element of the collection.\n * @return {Expr}\n * */\nfunction Map(collection, lambda_expr) {\n  arity.exact(2, arguments, Map.name)\n  return new Expr({ map: wrap(lambda_expr), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection to be iterated over.\n * @param {module:query~ExprArg|function} lambda\n *   A function to be called for each element of the collection.\n * @return {Expr}\n * */\nfunction Foreach(collection, lambda_expr) {\n  arity.exact(2, arguments, Foreach.name)\n  return new Expr({ foreach: wrap(lambda_expr), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection to be filtered.\n * @param {module:query~ExprArg|function} lambda\n *   A function that returns a boolean used to filter unwanted values.\n * @return {Expr}\n * */\nfunction Filter(collection, lambda_expr) {\n  arity.exact(2, arguments, Filter.name)\n  return new Expr({ filter: wrap(lambda_expr), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} number\n *   An expression resulting in the number of elements to take from the collection.\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n * */\nfunction Take(number, collection) {\n  arity.exact(2, arguments, Take.name)\n  return new Expr({ take: wrap(number), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} number\n *   An expression resulting in the number of elements to drop from the collection.\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n * */\nfunction Drop(number, collection) {\n  arity.exact(2, arguments, Drop.name)\n  return new Expr({ drop: wrap(number), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} elements\n *   An expression resulting in a collection of elements to prepend to the given collection.\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n */\nfunction Prepend(elements, collection) {\n  arity.exact(2, arguments, Prepend.name)\n  return new Expr({ prepend: wrap(elements), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} elements\n *   An expression resulting in a collection of elements to append to the given collection.\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n */\nfunction Append(elements, collection) {\n  arity.exact(2, arguments, Append.name)\n  return new Expr({ append: wrap(elements), collection: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n */\nfunction IsEmpty(collection) {\n  arity.exact(1, arguments, IsEmpty.name)\n  return new Expr({ is_empty: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#collections).\n *\n * @param {module:query~ExprArg} collection\n *   An expression resulting in a collection.\n * @return {Expr}\n */\nfunction IsNonEmpty(collection) {\n  arity.exact(1, arguments, IsNonEmpty.name)\n  return new Expr({ is_nonempty: wrap(collection) })\n}\n\n// Type check functions\n\n/**\n * Check if the expression is a number.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isnumber\">IsNumber</a>\n */\nfunction IsNumber(expr) {\n  arity.exact(1, arguments, IsNumber.name)\n  return new Expr({ is_number: wrap(expr) })\n}\n\n/**\n * Check if the expression is a double.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isdouble\">IsDouble</a>\n */\nfunction IsDouble(expr) {\n  arity.exact(1, arguments, IsDouble.name)\n  return new Expr({ is_double: wrap(expr) })\n}\n\n/**\n * Check if the expression is an integer.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isinteger\">IsInteger</a>\n */\nfunction IsInteger(expr) {\n  arity.exact(1, arguments, IsInteger.name)\n  return new Expr({ is_integer: wrap(expr) })\n}\n\n/**\n * Check if the expression is a boolean.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isboolean\">IsBoolean</a>\n */\nfunction IsBoolean(expr) {\n  arity.exact(1, arguments, IsBoolean.name)\n  return new Expr({ is_boolean: wrap(expr) })\n}\n\n/**\n * Check if the expression is null.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isnull\">IsNull</a>\n */\nfunction IsNull(expr) {\n  arity.exact(1, arguments, IsNull.name)\n  return new Expr({ is_null: wrap(expr) })\n}\n\n/**\n * Check if the expression is a byte array.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isbytes\">IsBytes</a>\n */\nfunction IsBytes(expr) {\n  arity.exact(1, arguments, IsBytes.name)\n  return new Expr({ is_bytes: wrap(expr) })\n}\n\n/**\n * Check if the expression is a timestamp.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/istimestamp\">IsTimestamp</a>\n */\nfunction IsTimestamp(expr) {\n  arity.exact(1, arguments, IsTimestamp.name)\n  return new Expr({ is_timestamp: wrap(expr) })\n}\n\n/**\n * Check if the expression is a date.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isdate\">IsDate</a>\n */\nfunction IsDate(expr) {\n  arity.exact(1, arguments, IsDate.name)\n  return new Expr({ is_date: wrap(expr) })\n}\n\n/**\n * Check if the expression is a string.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isstring\">IsString</a>\n */\nfunction IsString(expr) {\n  arity.exact(1, arguments, IsString.name)\n  return new Expr({ is_string: wrap(expr) })\n}\n\n/**\n * Check if the expression is an array.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isarray\">IsArray</a>\n */\nfunction IsArray(expr) {\n  arity.exact(1, arguments, IsArray.name)\n  return new Expr({ is_array: wrap(expr) })\n}\n\n/**\n * Check if the expression is an object.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isobject\">IsObject</a>\n */\nfunction IsObject(expr) {\n  arity.exact(1, arguments, IsObject.name)\n  return new Expr({ is_object: wrap(expr) })\n}\n\n/**\n * Check if the expression is a reference.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isref\">IsRef</a>\n */\nfunction IsRef(expr) {\n  arity.exact(1, arguments, IsRef.name)\n  return new Expr({ is_ref: wrap(expr) })\n}\n\n/**\n * Check if the expression is a set.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isset\">IsSet</a>\n */\nfunction IsSet(expr) {\n  arity.exact(1, arguments, IsSet.name)\n  return new Expr({ is_set: wrap(expr) })\n}\n\n/**\n * Check if the expression is a document (either a reference or an instance).\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isdoc\">IsDoc</a>\n */\nfunction IsDoc(expr) {\n  arity.exact(1, arguments, IsDoc.name)\n  return new Expr({ is_doc: wrap(expr) })\n}\n\n/**\n * Check if the expression is a lambda.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/islambda\">IsLambda</a>\n */\nfunction IsLambda(expr) {\n  arity.exact(1, arguments, IsLambda.name)\n  return new Expr({ is_lambda: wrap(expr) })\n}\n\n/**\n * Check if the expression is a collection.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/iscollection\">IsCollection</a>\n */\nfunction IsCollection(expr) {\n  arity.exact(1, arguments, IsCollection.name)\n  return new Expr({ is_collection: wrap(expr) })\n}\n\n/**\n * Check if the expression is a database.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isdatabase\">IsDatabase</a>\n */\nfunction IsDatabase(expr) {\n  arity.exact(1, arguments, IsDatabase.name)\n  return new Expr({ is_database: wrap(expr) })\n}\n\n/**\n * Check if the expression is an index.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isindex\">IsIndex</a>\n */\nfunction IsIndex(expr) {\n  arity.exact(1, arguments, IsIndex.name)\n  return new Expr({ is_index: wrap(expr) })\n}\n\n/**\n * Check if the expression is a function.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isfunction\">IsFunction</a>\n */\nfunction IsFunction(expr) {\n  arity.exact(1, arguments, IsFunction.name)\n  return new Expr({ is_function: wrap(expr) })\n}\n\n/**\n * Check if the expression is a key.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/iskey\">IsKey</a>\n */\nfunction IsKey(expr) {\n  arity.exact(1, arguments, IsKey.name)\n  return new Expr({ is_key: wrap(expr) })\n}\n\n/**\n * Check if the expression is a token.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/istoken\">IsToken</a>\n */\nfunction IsToken(expr) {\n  arity.exact(1, arguments, IsToken.name)\n  return new Expr({ is_token: wrap(expr) })\n}\n\n/**\n * Check if the expression is credentials.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/iscredentials\">IsCredentials</a>\n */\nfunction IsCredentials(expr) {\n  arity.exact(1, arguments, IsCredentials.name)\n  return new Expr({ is_credentials: wrap(expr) })\n}\n\n/**\n * Check if the expression is a role.\n *\n * @param {module:query~ExprArg} expr\n *   The expression to check\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/isrole\">IsRole</a>\n */\nfunction IsRole(expr) {\n  arity.exact(1, arguments, IsRole.name)\n  return new Expr({ is_role: wrap(expr) })\n}\n\n// Read functions\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n *\n * @param {module:query~ExprArg} ref\n *   An expression resulting in either a Ref or SetRef.\n * @param {?module:query~ExprArg} ts\n *   The snapshot time at which to get the document.\n * @return {Expr}\n */\nfunction Get(ref, ts) {\n  arity.between(1, 2, arguments, Get.name)\n  ts = util.defaults(ts, null)\n\n  return new Expr(params({ get: wrap(ref) }, { ts: wrap(ts) }))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n *\n * @param {module:query~ExprArg} secret\n *   The key or token secret to lookup.\n * @return {Expr}\n */\nfunction KeyFromSecret(secret) {\n  arity.exact(1, arguments, KeyFromSecret.name)\n  return new Expr({ key_from_secret: wrap(secret) })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/reduce).\n *\n * @param {module:query~ExprArg} lambda\n *   The accumulator function\n * @param {module:query~ExprArg} initial\n *   The initial value\n * @param {module:query~ExprArg} collection\n *   The colleciton to be reduced\n * @return {Expr}\n */\nfunction Reduce(lambda, initial, collection) {\n  arity.exact(3, arguments, Reduce.name)\n  return new Expr({\n    reduce: wrap(lambda),\n    initial: wrap(initial),\n    collection: wrap(collection),\n  })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n * You may want to utilize {@link Client#paginate} to obtain a {@link PageHelper},\n * rather than using this query function directly.\n *\n * @param {module:query~ExprArg} set\n *   An expression resulting in a SetRef to page over.\n * @param {?Object} opts\n *  An object representing options for pagination.\n *    - size: Maximum number of results to return.\n *    - after: Return the next page of results after this cursor (inclusive).\n *    - before: Return the previous page of results before this cursor (exclusive).\n *    - sources: If true, include the source sets along with each element.\n * @return {Expr}\n */\nfunction Paginate(set, opts) {\n  arity.between(1, 2, arguments, Paginate.name)\n  opts = util.defaults(opts, {})\n\n  return new Expr(objectAssign({ paginate: wrap(set) }, wrapValues(opts)))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n *\n * @param {module:query~ExprArg} ref\n *   An expression resulting in a Ref.\n * @param {?module:query~ExprArg} ts\n *   The snapshot time at which to check for the document's existence.\n * @return {Expr}\n */\nfunction Exists(ref, ts) {\n  arity.between(1, 2, arguments, Exists.name)\n  ts = util.defaults(ts, null)\n\n  return new Expr(params({ exists: wrap(ref) }, { ts: wrap(ts) }))\n}\n\n// Write functions\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref (usually a CollectionRef) to create.\n * @param {?module:query~ExprArg} params\n *   An object representing the parameters of the document.\n * @return {Expr}\n */\nfunction Create(collection_ref, params) {\n  arity.between(1, 2, arguments, Create.name)\n  return new Expr({ create: wrap(collection_ref), params: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to update.\n * @param {module:query~ExprArg} params\n *   An object representing the parameters of the document.\n * @return {Expr}\n */\nfunction Update(ref, params) {\n  arity.exact(2, arguments, Update.name)\n  return new Expr({ update: wrap(ref), params: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to replace.\n * @param {module:query~ExprArg} params\n *   An object representing the parameters of the document.\n * @return {Expr}\n */\nfunction Replace(ref, params) {\n  arity.exact(2, arguments, Replace.name)\n  return new Expr({ replace: wrap(ref), params: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to delete.\n * @return {Expr}\n */\nfunction Delete(ref) {\n  arity.exact(1, arguments, Delete.name)\n  return new Expr({ delete: wrap(ref) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to insert against\n * @param {module:query~ExprArg} ts\n *   The valid time of the inserted event\n * @param {module:query~ExprArg} action\n *   Whether the event should be a Create, Update, or Delete.\n * @param {module:query~ExprArg} params\n *   If this is a Create or Update, the parameters of the document.\n * @return {Expr}\n */\nfunction Insert(ref, ts, action, params) {\n  arity.exact(4, arguments, Insert.name)\n  return new Expr({\n    insert: wrap(ref),\n    ts: wrap(ts),\n    action: wrap(action),\n    params: wrap(params),\n  })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref of the document whose event should be removed.\n * @param {module:query~ExprArg} ts\n *   The valid time of the event.\n * @param {module:query~ExprArg} action\n *   The event action (Create, Update, or Delete) that should be removed.\n * @return {Expr}\n */\nfunction Remove(ref, ts, action) {\n  arity.exact(3, arguments, Remove.name)\n  return new Expr({ remove: wrap(ref), ts: wrap(ts), action: wrap(action) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a class.\n *     - name (required): the name of the class to create\n * @return {Expr}\n *\n * @deprecated use CreateCollection instead\n */\nfunction CreateClass(params) {\n  arity.exact(1, arguments, CreateClass.name)\n  return new Expr({ create_class: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a collection.\n *     - name (required): the name of the collection to create\n * @return {Expr}\n */\nfunction CreateCollection(params) {\n  arity.exact(1, arguments, CreateCollection.name)\n  return new Expr({ create_collection: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a database.\n *     - name (required): the name of the database to create\n * @return {Expr}\n */\nfunction CreateDatabase(params) {\n  arity.exact(1, arguments, CreateDatabase.name)\n  return new Expr({ create_database: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create an index.\n *     - name (required): the name of the index to create\n *     - source: One or more source objects describing source collections and (optional) field bindings.\n *     - terms: An array of term objects describing the fields to be indexed. Optional\n *     - values: An array of value objects describing the fields to be covered. Optional\n *     - unique: If true, maintains a uniqueness constraint on combined terms and values. Optional\n *     - partitions: The number of sub-partitions within each term. Optional\n * @return {Expr}\n */\nfunction CreateIndex(params) {\n  arity.exact(1, arguments, CreateIndex.name)\n  return new Expr({ create_index: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a new key\n *     - database: Ref of the database the key will be scoped to. Optional.\n *     - role: The role of the new key\n * @return {Expr}\n */\nfunction CreateKey(params) {\n  arity.exact(1, arguments, CreateKey.name)\n  return new Expr({ create_key: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a new user defined function.\n *     - name: The name of the function\n *     - body: A lambda function (escaped with `query`).\n * @return {Expr}\n */\nfunction CreateFunction(params) {\n  arity.exact(1, arguments, CreateFunction.name)\n  return new Expr({ create_function: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a new role.\n *     - name: The name of the role\n *     - privileges: An array of privileges\n *     - membership: An array of membership bindings\n * @return {Expr}\n */\nfunction CreateRole(params) {\n  arity.exact(1, arguments, CreateRole.name)\n  return new Expr({ create_role: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#write-functions).\n *\n * @param {module:query~ExprArg} params\n *   An object of parameters used to create a new access provider.\n *     - name: A valid schema name\n *     - issuer: A unique string\n *     - jwks_uri: A valid HTTPS URI\n *     - roles: An array of role/predicate pairs where the predicate returns a boolean.\n *                   The array can also contain Role references.\n * @return {Expr}\n */\nfunction CreateAccessProvider(params) {\n  arity.exact(1, arguments, CreateAccessProvider.name)\n  return new Expr({ create_access_provider: wrap(params) })\n}\n\n// Sets\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref of the document for which to retrieve the singleton set.\n * @return {Expr}\n */\nfunction Singleton(ref) {\n  arity.exact(1, arguments, Singleton.name)\n  return new Expr({ singleton: wrap(ref) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} ref\n *   A Ref or SetRef to retrieve an event set from.\n * @return {Expr}\n */\nfunction Events(ref_set) {\n  arity.exact(1, arguments, Events.name)\n  return new Expr({ events: wrap(ref_set) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} index\n *   The Ref of the index to match against.\n * @param {...module:query~ExprArg} terms\n *   A list of terms used in the match.\n * @return {Expr}\n */\nfunction Match(index) {\n  arity.min(1, arguments, Match.name)\n  var args = argsToArray(arguments)\n  args.shift()\n  return new Expr({ match: wrap(index), terms: wrap(varargs(args)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {...module:query~ExprArg} sets\n *   A list of SetRefs to union together.\n * @return {Expr}\n */\nfunction Union() {\n  arity.min(1, arguments, Union.name)\n  return new Expr({ union: wrap(varargs(arguments)) })\n}\n\n/**\n * Merge two or more objects..\n *\n * @param {...module:query~ExprArg} merge merge the first object.\n * @param {...module:query~ExprArg} _with the second object or a list of objects\n * @param {...module:query~ExprArg} lambda a lambda to resolve possible conflicts\n * @return {Expr}\n * */\nfunction Merge(merge, _with, lambda) {\n  arity.between(2, 3, arguments, Merge.name)\n  return new Expr(\n    params({ merge: wrap(merge), with: wrap(_with) }, { lambda: wrap(lambda) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {...module:query~ExprArg} sets\n *   A list of SetRefs to intersect.\n * @return {Expr}\n * */\nfunction Intersection() {\n  arity.min(1, arguments, Intersection.name)\n  return new Expr({ intersection: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {...module:query~ExprArg} sets\n *   A list of SetRefs to diff.\n * @return {Expr}\n * */\nfunction Difference() {\n  arity.min(1, arguments, Difference.name)\n  return new Expr({ difference: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} set\n *   A SetRef to remove duplicates from.\n * @return {Expr}\n * */\nfunction Distinct(set) {\n  arity.exact(1, arguments, Distinct.name)\n  return new Expr({ distinct: wrap(set) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#sets).\n *\n * @param {module:query~ExprArg} source\n *   A SetRef of the source set\n * @param {module:query~ExprArg|function} target\n *   A Lambda that will accept each element of the source Set and return a Set\n * @return {Expr}\n */\nfunction Join(source, target) {\n  arity.exact(2, arguments, Join.name)\n  return new Expr({ join: wrap(source), with: wrap(target) })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/range).\n *\n * @param {module:query~ExprArg} set\n *   A SetRef of the source set\n * @param {module:query~ExprArg} from\n *   The lower bound\n * @param {module:query~ExprArg} to\n *   The upper bound\n * @return {Expr}\n */\nfunction Range(set, from, to) {\n  arity.exact(3, arguments, Range.name)\n  return new Expr({ range: wrap(set), from: wrap(from), to: wrap(to) })\n}\n\n// Authentication\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @param {module:query~ExprArg} ref\n *   A Ref with credentials to authenticate against\n * @param {module:query~ExprArg} params\n *   An object of parameters to pass to the login function\n *     - password: The password used to login\n * @return {Expr}\n * */\nfunction Login(ref, params) {\n  arity.exact(2, arguments, Login.name)\n  return new Expr({ login: wrap(ref), params: wrap(params) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @param {module:query~ExprArg} delete_tokens\n *   If true, log out all tokens associated with the current session.\n * @return {Expr}\n */\nfunction Logout(delete_tokens) {\n  arity.exact(1, arguments, Logout.name)\n  return new Expr({ logout: wrap(delete_tokens) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @param {module:query~ExprArg} ref\n *   The Ref to check the password against.\n * @param {module:query~ExprArg} password\n *   The credentials password to check.\n * @return {Expr}\n */\nfunction Identify(ref, password) {\n  arity.exact(2, arguments, Identify.name)\n  return new Expr({ identify: wrap(ref), password: wrap(password) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction Identity() {\n  arity.exact(0, arguments, Identity.name)\n  return new Expr({ identity: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction CurrentIdentity() {\n  arity.exact(0, arguments, CurrentIdentity.name)\n  return new Expr({ current_identity: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction HasIdentity() {\n  arity.exact(0, arguments, HasIdentity.name)\n  return new Expr({ has_identity: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\n\nfunction HasCurrentIdentity() {\n  arity.exact(0, arguments, HasCurrentIdentity.name)\n  return new Expr({ has_current_identity: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction CurrentToken() {\n  arity.exact(0, arguments, CurrentToken.name)\n  return new Expr({ current_token: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#authentication).\n *\n * @return {Expr}\n */\nfunction HasCurrentToken() {\n  arity.exact(0, arguments, HasCurrentToken.name)\n  return new Expr({ has_current_token: null })\n}\n\n// String functions\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} strings - A list of strings to concatenate.\n * @param {string} separator  - The separator to use between each string.\n * @return {string} a single combined string\n */\nfunction Concat(strings, separator) {\n  arity.min(1, arguments, Concat.name)\n  separator = util.defaults(separator, null)\n  return new Expr(\n    params({ concat: wrap(strings) }, { separator: wrap(separator) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} string - The string to casefold.\n * @param {string} normalizer - The algorithm to use. One of: NFKCCaseFold, NFC, NFD, NFKC, NFKD.\n * @return {string} a normalized string\n */\nfunction Casefold(string, normalizer) {\n  arity.min(1, arguments, Casefold.name)\n  return new Expr(\n    params({ casefold: wrap(string) }, { normalizer: wrap(normalizer) })\n  )\n}\n\n/**\n * Returns true if the string contains the given substring, or false if otherwise\n *\n * @param {string} value  - the string to evaluate\n * @param {string} search - the substring to search for\n * @return {boolean}      - was the search result found\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/containsstr\">FaunaDB ContainsStr Function</a>\n */\nfunction ContainsStr(value, search) {\n  arity.exact(2, arguments, ContainsStr.name)\n  return new Expr({ containsstr: wrap(value), search: wrap(search) })\n}\n\n/**\n * Returns true if the string contains the given pattern, or false if otherwise\n *\n * @param {string} value   - the string to evaluate\n * @param {string} pattern - the pattern to search for\n * @return {boolean}       - was the regex search result found\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/containsstrregex\">FaunaDB ContainsStrRegex Function</a>\n */\nfunction ContainsStrRegex(value, pattern) {\n  arity.exact(2, arguments, ContainsStrRegex.name)\n  return new Expr({ containsstrregex: wrap(value), pattern: wrap(pattern) })\n}\n\n/**\n * Returns true if the string starts with the given prefix value, or false if otherwise\n *\n * @param {string} value   - the string to evaluate\n * @param {string} search  - the prefix to search for\n * @return {boolean}       - does `value` start with `search`\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/startswith\">FaunaDB StartsWith Function</a>\n */\nfunction StartsWith(value, search) {\n  arity.exact(2, arguments, StartsWith.name)\n  return new Expr({ startswith: wrap(value), search: wrap(search) })\n}\n\n/**\n * Returns true if the string ends with the given suffix value, or false if otherwise\n *\n * @param {string} value   - the string to evaluate\n * @param {string} search  - the suffix to search for\n * @return {boolean}       - does `value` end with `search`\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/endswith\">FaunaDB EndsWith Function</a>\n */\nfunction EndsWith(value, search) {\n  arity.exact(2, arguments, EndsWith.name)\n  return new Expr({ endswith: wrap(value), search: wrap(search) })\n}\n\n/**\n * It takes a string and returns a regex which matches the input string verbatim.\n *\n * @param value      - the string to analyze\n * @return {string}  - a regex which matches the input string verbatim\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/regexescape\">FaunaDB RegexEscape Function</a>\n */\nfunction RegexEscape(value) {\n  arity.exact(1, arguments, RegexEscape.name)\n  return new Expr({ regexescape: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to search.\n * @param {string} find - Find the first position of this string in the search string\n * @param {int} start - An optional start offset into the search string\n * @return {int} location of the found string or -1 if not found\n */\nfunction FindStr(value, find, start) {\n  arity.between(2, 3, arguments, FindStr.name)\n  start = util.defaults(start, null)\n  return new Expr(\n    params({ findstr: wrap(value), find: wrap(find) }, { start: wrap(start) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to search.\n * @param {string} pattern - Find the first position of this pattern in the search string using a java regular expression syntax\n * @param {int} start - An optional start offset into the search string\n * @param {int} numResults - An optional number of results to return, max 1024\n * @return {Array} an array of object describing where the search pattern was located\n */\nfunction FindStrRegex(value, pattern, start, numResults) {\n  arity.between(2, 4, arguments, FindStrRegex.name)\n  start = util.defaults(start, null)\n  return new Expr(\n    params(\n      { findstrregex: wrap(value), pattern: wrap(pattern) },\n      { start: wrap(start), num_results: wrap(numResults) }\n    )\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to calculate the length in codepoints.\n * @return {int} the length of the string in codepoints\n */\nfunction Length(value) {\n  arity.exact(1, arguments, Length.name)\n  return new Expr({ length: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to LowerCase.\n * @return {string} the string converted to lowercase\n */\nfunction LowerCase(value) {\n  arity.exact(1, arguments, LowerCase.name)\n  return new Expr({ lowercase: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to trim leading white space.\n * @return {string} the string with leading white space removed\n */\nfunction LTrim(value) {\n  arity.exact(1, arguments, LTrim.name)\n  return new Expr({ ltrim: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {module:query~ExprArg} terms\n *   A document from which to produce ngrams.\n * @param {?Object} opts\n *   An object of options\n *     - min: The minimum ngram size.\n *     - max: The maximum ngram size.\n * @return {Array|Value}\n */\nfunction NGram(terms, min, max) {\n  arity.between(1, 3, arguments, NGram.name)\n  min = util.defaults(min, null)\n  max = util.defaults(max, null)\n\n  return new Expr(\n    params({ ngram: wrap(terms) }, { min: wrap(min), max: wrap(max) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to repeat.\n * @param {int} number - The number of times to repeat the string\n * @return {string} a string which was repeated\n */\nfunction Repeat(value, number) {\n  arity.between(1, 2, arguments, Repeat.name)\n  number = util.defaults(number, null)\n  return new Expr(params({ repeat: wrap(value) }, { number: wrap(number) }))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to search.\n * @param {string} find - The string to find in the search string\n * @param {string} replace - The string to replace in the search string\n * @return {String} all the occurrences of find substituted with replace string\n */\nfunction ReplaceStr(value, find, replace) {\n  arity.exact(3, arguments, ReplaceStr.name)\n  return new Expr({\n    replacestr: wrap(value),\n    find: wrap(find),\n    replace: wrap(replace),\n  })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - A string to search.\n * @param {string} pattern - The pattern to find in the search string using a java regular expression syntax\n * @param {string} replace - The string to replace in the search string\n * @param {boolean} first - Replace all or just the first\n * @return {string} all the occurrences of find pattern substituted with replace string\n */\nfunction ReplaceStrRegex(value, pattern, replace, first) {\n  arity.between(3, 4, arguments, ReplaceStrRegex.name)\n  first = util.defaults(first, null)\n  return new Expr(\n    params(\n      {\n        replacestrregex: wrap(value),\n        pattern: wrap(pattern),\n        replace: wrap(replace),\n      },\n      { first: wrap(first) }\n    )\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to remove white space from the end.\n * @return {string} the string with trailing whitespaces removed\n */\nfunction RTrim(value) {\n  arity.exact(1, arguments, RTrim.name)\n  return new Expr({ rtrim: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {int} num - The string of N Space(s).\n * @return {string} a string with spaces\n */\nfunction Space(num) {\n  arity.exact(1, arguments, Space.name)\n  return new Expr({ space: wrap(num) })\n}\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value  The string to SubString.\n * @param {int} start  The position the first character of the return string begins at\n * @param {int} length  An optional length, if omitted then returns to the end of string\n * @return {string}\n */\nfunction SubString(value, start, length) {\n  arity.between(1, 3, arguments, SubString.name)\n  start = util.defaults(start, null)\n  length = util.defaults(length, null)\n  return new Expr(\n    params(\n      { substring: wrap(value) },\n      { start: wrap(start), length: wrap(length) }\n    )\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to TitleCase.\n * @return {string}  A string converted to titlecase\n */\nfunction TitleCase(value) {\n  arity.exact(1, arguments, TitleCase.name)\n  return new Expr({ titlecase: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to Trim.\n * @return {string} a string with leading and trailing whitespace removed\n */\nfunction Trim(value) {\n  arity.exact(1, arguments, Trim.name)\n  return new Expr({ trim: wrap(value) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#string-functions).\n *\n * @param {string} value - The string to Uppercase.\n * @return {string} An uppercase string\n */\nfunction UpperCase(value) {\n  arity.exact(1, arguments, UpperCase.name)\n  return new Expr({ uppercase: wrap(value) })\n}\n\n/**\n * Format values into a string.\n *\n * @param  {string}  string string with format specifiers\n * @param  {array}   values list of values to format\n * @return {string}         a string\n */\nfunction Format(string) {\n  arity.min(1, arguments, Format.name)\n  var args = argsToArray(arguments)\n  args.shift()\n  return new Expr({ format: wrap(string), values: wrap(varargs(args)) })\n}\n\n// Time and date functions\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#time-and-date).\n *\n * @param {module:query~ExprArg} string\n *   A string to converted to a time object.\n * @return {Expr}\n */\nfunction Time(string) {\n  arity.exact(1, arguments, Time.name)\n  return new Expr({ time: wrap(string) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#time-and-date).\n *\n * @param {module:query~ExprArg} number\n *   The number of `unit`s from Epoch\n * @param {module:query~ExprArg} unit\n *   The unit of `number`. One of second, millisecond, microsecond, nanosecond.\n * @return {Expr}\n */\nfunction Epoch(number, unit) {\n  arity.exact(2, arguments, Epoch.name)\n  return new Expr({ epoch: wrap(number), unit: wrap(unit) })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/timeadd).\n *\n * Returns a new time or date with the offset in terms of the unit\n * added.\n *\n * @param base the base time or data\n * @param offset the number of units\n * @param unit the unit type\n * @return {Expr}\n */\nfunction TimeAdd(base, offset, unit) {\n  arity.exact(3, arguments, TimeAdd.name)\n  return new Expr({\n    time_add: wrap(base),\n    offset: wrap(offset),\n    unit: wrap(unit),\n  })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/timesubtract).\n *\n * Returns a new time or date with the offset in terms of the unit\n * subtracted.\n *\n * @param base the base time or data\n * @param offset the number of units\n * @param unit the unit type\n * @return {Expr}\n */\nfunction TimeSubtract(base, offset, unit) {\n  arity.exact(3, arguments, TimeSubtract.name)\n  return new Expr({\n    time_subtract: wrap(base),\n    offset: wrap(offset),\n    unit: wrap(unit),\n  })\n}\n\n/**\n * See the [docs](https://docs.fauna.com/fauna/current/api/fql/functions/timediff).\n *\n * Returns the number of intervals in terms of the unit between\n * two times or dates. Both start and finish must be of the same\n * type.\n *\n * @param start the starting time or date, inclusive\n * @param finish the ending time or date, exclusive\n * @param unit the unit type\n * @return {Expr}\n */\nfunction TimeDiff(start, finish, unit) {\n  arity.exact(3, arguments, TimeDiff.name)\n  return new Expr({\n    time_diff: wrap(start),\n    other: wrap(finish),\n    unit: wrap(unit),\n  })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#time-and-date).\n *\n * @param {module:query~ExprArg} string\n *   A string to convert to a Date object\n * @return {Expr}\n */\nfunction Date(string) {\n  arity.exact(1, arguments, Date.name)\n  return new Expr({ date: wrap(string) })\n}\n\n/**\n * Returns the current snapshot time.\n *\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/now\">Now function</a>\n */\nfunction Now() {\n  arity.exact(0, arguments, Now.name)\n  return new Expr({ now: wrap(null) })\n}\n\n// Miscellaneous functions\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @deprecated use NewId instead\n * @return {Expr}\n */\nfunction NextId() {\n  arity.exact(0, arguments, NextId.name)\n  return new Expr({ next_id: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @return {Expr}\n */\nfunction NewId() {\n  arity.exact(0, arguments, NewId.name)\n  return new Expr({ new_id: null })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the database.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the database's scope.\n * @return {Expr}\n */\nfunction Database(name, scope) {\n  arity.between(1, 2, arguments, Database.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ database: wrap(name) })\n    case 2:\n      return new Expr({ database: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the index.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the index's scope.\n * @return {Expr}\n */\nfunction Index(name, scope) {\n  arity.between(1, 2, arguments, Index.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ index: wrap(name) })\n    case 2:\n      return new Expr({ index: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the class.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the class's scope.\n * @return {Expr}\n *\n * @deprecated Class is deprecated, use Collection instead\n */\nfunction Class(name, scope) {\n  arity.between(1, 2, arguments, Class.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ class: wrap(name) })\n    case 2:\n      return new Expr({ class: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the collection.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the collection's scope.\n * @return {Expr}\n */\nfunction Collection(name, scope) {\n  arity.between(1, 2, arguments, Collection.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ collection: wrap(name) })\n    case 2:\n      return new Expr({ collection: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the user defined function.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the user defined function's scope.\n * @return {Expr}\n */\nfunction FunctionFn(name, scope) {\n  arity.between(1, 2, arguments, FunctionFn.name)\n  switch (arguments.length) {\n    case 1:\n      return new Expr({ function: wrap(name) })\n    case 2:\n      return new Expr({ function: wrap(name), scope: wrap(scope) })\n  }\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} name\n *   The name of the role.\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the role's scope.\n * @return {Expr}\n */\nfunction Role(name, scope) {\n  arity.between(1, 2, arguments, Role.name)\n  scope = util.defaults(scope, null)\n  return new Expr(params({ role: wrap(name) }, { scope: wrap(scope) }))\n}\n\n/**\n *\n * @param {module:query~ExprArg} scope\n *   The Ref of the database set's scope.\n * @return {Expr}\n */\nfunction AccessProviders(scope) {\n  arity.max(1, arguments, AccessProviders.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ access_providers: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `classes` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the class set's scope.\n * @return {Expr}\n */\nfunction Classes(scope) {\n  arity.max(1, arguments, Classes.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ classes: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `collections` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the collection set's scope.\n * @return {Expr}\n */\nfunction Collections(scope) {\n  arity.max(1, arguments, Collections.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ collections: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `databases` functions that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the database set's scope.\n * @return {Expr}\n */\nfunction Databases(scope) {\n  arity.max(1, arguments, Databases.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ databases: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs an `indexes` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the index set's scope.\n * @return {Expr}\n */\nfunction Indexes(scope) {\n  arity.max(1, arguments, Indexes.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ indexes: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `functions` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the user defined function set's scope.\n * @return {Expr}\n */\nfunction Functions(scope) {\n  arity.max(1, arguments, Functions.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ functions: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `roles` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the role set's scope.\n * @return {Expr}\n */\nfunction Roles(scope) {\n  arity.max(1, arguments, Roles.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ roles: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `keys` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the key set's scope.\n * @return {Expr}\n */\nfunction Keys(scope) {\n  arity.max(1, arguments, Keys.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ keys: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `tokens` function that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the token set's scope.\n * @return {Expr}\n */\nfunction Tokens(scope) {\n  arity.max(1, arguments, Tokens.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ tokens: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * Constructs a `credentials` functions that, when evaluated, returns a Ref value.\n *\n * @param {module:query~ExprArg} [scope]\n *   The Ref of the credential set's scope.\n * @return {Expr}\n */\nfunction Credentials(scope) {\n  arity.max(1, arguments, Credentials.name)\n  scope = util.defaults(scope, null)\n  return new Expr({ credentials: wrap(scope) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of expressions to check for equivalence.\n * @return {Expr}\n */\nfunction Equals() {\n  arity.min(1, arguments, Equals.name)\n  return new Expr({ equals: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} path\n *   An array representing a path to check for the existence of.\n * @param {module:query~ExprArg} in\n *   An object to search against.\n * @return {Expr}\n *\n * @deprecated use ContainsPath instead\n */\nfunction Contains(path, _in) {\n  arity.exact(2, arguments, Contains.name)\n  return new Expr({ contains: wrap(path), in: wrap(_in) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} value\n *   Represent the value we want to search for.\n * @param {module:query~ExprArg} in\n *   An object we will search for the value passed in.\n * @return {Expr}\n */\nfunction ContainsValue(value, _in) {\n  arity.exact(2, arguments, ContainsValue.name)\n  return new Expr({ contains_value: wrap(value), in: wrap(_in) })\n}\n\n/**\n * @param {string} field\n *   A field name we want to confirm exists.\n * @param {module:query~ExprArg} obj\n *   An object to search against.\n * @return {Expr}\n */\nfunction ContainsField(field, obj) {\n  arity.exact(2, arguments, ContainsField.name)\n  return new Expr({ contains_field: wrap(field), in: wrap(obj) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} path\n *   An array representing a path to check for the existence of.\n * @param {module:query~ExprArg} in\n *   An object to search against.\n * @return {Expr}\n */\nfunction ContainsPath(path, _in) {\n  arity.exact(2, arguments, ContainsPath.name)\n  return new Expr({ contains_path: wrap(path), in: wrap(_in) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} path\n *   An array representing a path to pull from an object.\n * @param {module:query~ExprArg} from\n *   The object to select from\n * @param {?module:query~ExprArg} default\n *   A default value if the path does not exist.\n * @return {Expr}\n */\nfunction Select(path, from, _default) {\n  arity.between(2, 3, arguments, Select.name)\n  var exprObj = { select: wrap(path), from: wrap(from) }\n  if (_default !== undefined) {\n    exprObj.default = wrap(_default)\n  }\n  return new Expr(exprObj)\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#miscellaneous-functions).\n *\n * @param {module:query~ExprArg} path\n *   An array representing a path to pull from an object.\n * @param {module:query~ExprArg} from\n *   The object to select from\n * @return {Expr}\n *\n * @deprecated avoid using\n */\nfunction SelectAll(path, from) {\n  arity.exact(2, arguments, SelectAll.name)\n  return new Expr({ select_all: wrap(path), from: wrap(from) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to provide the absolute value.\n * @return {Expr}\n */\nfunction Abs(expr) {\n  arity.exact(1, arguments, Abs.name)\n  return new Expr({ abs: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to sum together.\n * @return {Expr}\n */\nfunction Add() {\n  arity.min(1, arguments, Add.name)\n  return new Expr({ add: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to bitwise and together.\n * @return {Expr}\n */\nfunction BitAnd() {\n  arity.min(1, arguments, BitAnd.name)\n  return new Expr({ bitand: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to provide the bitwise not.\n * @return {Expr}\n */\nfunction BitNot(expr) {\n  arity.exact(1, arguments, BitNot.name)\n  return new Expr({ bitnot: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to bitwise Or'd together.\n * @return {Expr}\n */\nfunction BitOr() {\n  arity.min(1, arguments, BitOr.name)\n  return new Expr({ bitor: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to bitwise Xor'd together.\n * @return {Expr}\n */\nfunction BitXor() {\n  arity.min(1, arguments, BitXor.name)\n  return new Expr({ bitxor: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The least integer that is greater than or equal to the number\n * @return {Expr}\n */\nfunction Ceil(expr) {\n  arity.exact(1, arguments, Ceil.name)\n  return new Expr({ ceil: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to compute the quotient of.\n * @return {Expr}\n */\nfunction Divide() {\n  arity.min(1, arguments, Divide.name)\n  return new Expr({ divide: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The greatest integer that is less than or equal to the number\n * @return {Expr}\n */\nfunction Floor(expr) {\n  arity.exact(1, arguments, Floor.name)\n  return new Expr({ floor: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to multiply together.\n * @return {Expr}\n */\nfunction Max() {\n  arity.min(1, arguments, Max.name)\n  return new Expr({ max: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to multiply together.\n * @return {Expr}\n */\nfunction Min() {\n  arity.min(1, arguments, Min.name)\n  return new Expr({ min: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to compute the quotient of. The remainder will be returned.\n * @return {Expr}\n */\nfunction Modulo() {\n  arity.min(1, arguments, Modulo.name)\n  return new Expr({ modulo: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to multiply together.\n * @return {Expr}\n */\nfunction Multiply() {\n  arity.min(1, arguments, Multiply.name)\n  return new Expr({ multiply: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to round.\n * @param {...module:query~ExprArg} terms\n *   An optional precision\n * @return {Expr}\n */\nfunction Round(value, precision) {\n  arity.min(1, arguments, Round.name)\n  precision = util.defaults(precision, null)\n  return new Expr(\n    params({ round: wrap(value) }, { precision: wrap(precision) })\n  )\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of numbers to compute the difference of.\n * @return {Expr}\n */\nfunction Subtract() {\n  arity.min(1, arguments, Subtract.name)\n  return new Expr({ subtract: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The sign of the number is returned as positive 1, zero 0 , negative -1\n * @return {Expr}\n */\nfunction Sign(expr) {\n  arity.exact(1, arguments, Sign.name)\n  return new Expr({ sign: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The square root of the number\n * @return {Expr}\n */\nfunction Sqrt(expr) {\n  arity.exact(1, arguments, Sqrt.name)\n  return new Expr({ sqrt: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to truncate.\n * @param {...module:query~ExprArg} terms\n *   An optional precision\n * @return {Expr}\n */\nfunction Trunc(value, precision) {\n  arity.min(1, arguments, Trunc.name)\n  precision = util.defaults(precision, null)\n  return new Expr(\n    params({ trunc: wrap(value) }, { precision: wrap(precision) })\n  )\n}\n\n/**\n *\n * Count the number of elements in the collection.\n *\n * @param {array}    - array of items\n * @return {integer} - number of items in the collection\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/count\">Count function</a>\n */\nfunction Count(collection) {\n  arity.exact(1, arguments, Count.name)\n  return new Expr({ count: wrap(collection) })\n}\n\n/**\n *\n * Sum the elements in the collection.\n *\n * @param {array} - collection of numbers\n * @return {integer} - total of all numbers in collection\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/sum\">Sum function</a>\n */\nfunction Sum(collection) {\n  arity.exact(1, arguments, Sum.name)\n  return new Expr({ sum: wrap(collection) })\n}\n\n/**\n *\n * Returns the mean of all elements in the collection.\n *\n * @param {array} - collection the numbers\n * @return {float} - the mean of all numbers in the collection\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/mean\">Mean function</a>\n */\nfunction Mean(collection) {\n  arity.exact(1, arguments, Mean.name)\n  return new Expr({ mean: wrap(collection) })\n}\n\n/**\n *\n * Evaluates to true if any element of the collection is true.\n *\n * @param {array} - collection the collection\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/any\">Any function</a>\n */\nfunction Any(collection) {\n  arity.exact(1, arguments, Any.name)\n  return new Expr({ any: wrap(collection) })\n}\n\n/**\n *\n * Evaluates to true if all elements of the collection are true.\n *\n * @param {array} - collection the collection\n * @return {Expr}\n * @see <a href=\"https://docs.fauna.com/fauna/current/api/fql/functions/all\">All function</a>\n */\nfunction All(collection) {\n  arity.exact(1, arguments, All.name)\n  return new Expr({ all: wrap(collection) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The arc cosine of the number\n * @return {Expr}\n */\nfunction Acos(expr) {\n  arity.exact(1, arguments, Acos.name)\n  return new Expr({ acos: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The arc sine of the number\n * @return {Expr}\n */\nfunction Asin(expr) {\n  arity.exact(1, arguments, Asin.name)\n  return new Expr({ asin: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The arc tangent of the number\n * @return {Expr}\n */\nfunction Atan(expr) {\n  arity.exact(1, arguments, Atan.name)\n  return new Expr({ atan: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The cosine of a number\n * @return {Expr}\n */\nfunction Cos(expr) {\n  arity.exact(1, arguments, Cos.name)\n  return new Expr({ cos: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The hyperbolic cosine of the number\n * @return {Expr}\n */\nfunction Cosh(expr) {\n  arity.exact(1, arguments, Cosh.name)\n  return new Expr({ cosh: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   Take radians and convert it to degrees 360 degrees = 2 * pi radians\n * @return {Expr}\n */\nfunction Degrees(expr) {\n  arity.exact(1, arguments, Degrees.name)\n  return new Expr({ degrees: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The e raised to an exponent number\n * @return {Expr}\n */\nfunction Exp(expr) {\n  arity.exact(1, arguments, Exp.name)\n  return new Expr({ exp: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A side of the right triangle\n * @param {...module:query~ExprArg} terms\n *   The second side of a right triange, defaults to the first side\n * @return {Expr}\n */\nfunction Hypot(value, side) {\n  arity.min(1, arguments, Hypot.name)\n  side = util.defaults(side, null)\n  return new Expr(params({ hypot: wrap(value) }, { b: wrap(side) }))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The natural log of the number\n * @return {Expr}\n */\nfunction Ln(expr) {\n  arity.exact(1, arguments, Ln.name)\n  return new Expr({ ln: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The log base 10 of a number\n * @return {Expr}\n */\nfunction Log(expr) {\n  arity.exact(1, arguments, Log.name)\n  return new Expr({ log: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A numbers to raise to the power.\n * @param {...module:query~ExprArg} terms\n *   An optional exponent\n * @return {Expr}\n */\nfunction Pow(value, exponent) {\n  arity.min(1, arguments, Pow.name)\n  exponent = util.defaults(exponent, null)\n  return new Expr(params({ pow: wrap(value) }, { exp: wrap(exponent) }))\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   Take degrees and convert the number to radians 2 * pi = 360 degrees\n * @return {Expr}\n */\nfunction Radians(expr) {\n  arity.exact(1, arguments, Radians.name)\n  return new Expr({ radians: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The sine of a number\n * @return {Expr}\n */\nfunction Sin(expr) {\n  arity.exact(1, arguments, Sin.name)\n  return new Expr({ sin: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The hyperbolic sine of a number\n * @return {Expr}\n */\nfunction Sinh(expr) {\n  arity.exact(1, arguments, Sinh.name)\n  return new Expr({ sinh: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The Tangent of a number\n * @return {Expr}\n */\nfunction Tan(expr) {\n  arity.exact(1, arguments, Tan.name)\n  return new Expr({ tan: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#mathematical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   The hyberbolic tangent of a number\n * @return {Expr}\n */\nfunction Tanh(expr) {\n  arity.exact(1, arguments, Tanh.name)\n  return new Expr({ tanh: wrap(expr) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of terms to compare.\n * @return {Expr}\n */\nfunction LT() {\n  arity.min(1, arguments, LT.name)\n  return new Expr({ lt: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of terms to compare.\n * @return {Expr}\n */\nfunction LTE() {\n  arity.min(1, arguments, LTE.name)\n  return new Expr({ lte: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of terms to compare.\n * @return {Expr}\n */\nfunction GT() {\n  arity.min(1, arguments, GT.name)\n  return new Expr({ gt: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection of terms to compare.\n * @return {Expr}\n */\nfunction GTE() {\n  arity.min(1, arguments, GTE.name)\n  return new Expr({ gte: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection to compute the conjunction of.\n * @return {Expr}\n */\nfunction And() {\n  arity.min(1, arguments, And.name)\n  return new Expr({ and: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {...module:query~ExprArg} terms\n *   A collection to compute the disjunction of.\n * @return {Expr}\n */\nfunction Or() {\n  arity.min(1, arguments, Or.name)\n  return new Expr({ or: wrap(varargs(arguments)) })\n}\n\n/**\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi#logical-functions).\n *\n * @param {module:query~ExprArg} boolean\n *   A boolean to produce the negation of.\n * @return {Expr}\n */\nfunction Not(boolean) {\n  arity.exact(1, arguments, Not.name)\n  return new Expr({ not: wrap(boolean) })\n}\n\n/**\n * Converts an expression to a string literal.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a string.\n * @return {Expr}\n */\nfunction ToString(expr) {\n  arity.exact(1, arguments, ToString.name)\n  return new Expr({ to_string: wrap(expr) })\n}\n\n/**\n * Converts an expression to a number literal.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a number.\n * @return {Expr}\n */\nfunction ToNumber(expr) {\n  arity.exact(1, arguments, ToNumber.name)\n  return new Expr({ to_number: wrap(expr) })\n}\n\n/**\n * Converts an expression to an Object.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to an Object.\n * @return {Expr}\n */\nfunction ToObject(expr) {\n  arity.exact(1, arguments, ToObject.name)\n  return new Expr({ to_object: wrap(expr) })\n}\n\n/**\n * Converts an expression to an Array.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to an Array.\n * @return {Expr}\n */\nfunction ToArray(expr) {\n  arity.exact(1, arguments, ToArray.name)\n  return new Expr({ to_array: wrap(expr) })\n}\n\n/**\n * Converts an expression to a double value, if possible.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a double.\n * @return {Expr}\n */\nfunction ToDouble(expr) {\n  arity.exact(1, arguments, ToDouble.name)\n  return new Expr({ to_double: wrap(expr) })\n}\n\n/**\n * Converts an expression to an integer value, if possible.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to an integer.\n * @return {Expr}\n */\nfunction ToInteger(expr) {\n  arity.exact(1, arguments, ToInteger.name)\n  return new Expr({ to_integer: wrap(expr) })\n}\n\n/**\n * Converts an expression to a time literal.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a time.\n * @return {Expr}\n */\nfunction ToTime(expr) {\n  arity.exact(1, arguments, ToTime.name)\n  return new Expr({ to_time: wrap(expr) })\n}\n\n/**\n * Converts an expression evaluating to a time to seconds since epoch.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to seconds numeric value.\n * @return {Expr}\n */\nfunction ToSeconds(expr) {\n  arity.exact(1, arguments, ToSeconds.name)\n  return new Expr({ to_seconds: wrap(expr) })\n}\n\n/**\n * Converts a time expression to milliseconds since the UNIX epoch.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to millisecond numeric value.\n * @return {Expr}\n */\nfunction ToMillis(expr) {\n  arity.exact(1, arguments, ToMillis.name)\n  return new Expr({ to_millis: wrap(expr) })\n}\n\n/**\n * Converts a time expression to microseconds since the UNIX epoch.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to microsecond numeric value.\n * @return {Expr}\n */\nfunction ToMicros(expr) {\n  arity.exact(1, arguments, ToMicros.name)\n  return new Expr({ to_micros: wrap(expr) })\n}\n\n/**\n * Returns a time expression's day of the week following ISO-8601 convention, from 1 (Monday) to 7 (Sunday).\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to day of week.\n * @return {Expr}\n */\nfunction DayOfWeek(expr) {\n  arity.exact(1, arguments, DayOfWeek.name)\n  return new Expr({ day_of_week: wrap(expr) })\n}\n\n/**\n * Returns a time expression's day of the year, from 1 to 365, or 366 in a leap year.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to day of year.\n * @return {Expr}\n */\nfunction DayOfYear(expr) {\n  arity.exact(1, arguments, DayOfYear.name)\n  return new Expr({ day_of_year: wrap(expr) })\n}\n\n/**\n * Returns a time expression's day of the month, from 1 to 31.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to day of month.\n * @return {Expr}\n */\nfunction DayOfMonth(expr) {\n  arity.exact(1, arguments, DayOfMonth.name)\n  return new Expr({ day_of_month: wrap(expr) })\n}\n\n/**\n * Returns a time expression's second of the minute, from 0 to 59.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a hour.\n * @return {Expr}\n */\nfunction Hour(expr) {\n  arity.exact(1, arguments, Hour.name)\n  return new Expr({ hour: wrap(expr) })\n}\n\n/**\n * Returns a time expression's second of the minute, from 0 to 59.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a month.\n * @return {Expr}\n */\nfunction Minute(expr) {\n  arity.exact(1, arguments, Minute.name)\n  return new Expr({ minute: wrap(expr) })\n}\n\n/**\n * Returns a time expression's second of the minute, from 0 to 59.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a month.\n * @return {Expr}\n */\nfunction Second(expr) {\n  arity.exact(1, arguments, Second.name)\n  return new Expr({ second: wrap(expr) })\n}\n\n/**\n * Returns a time expression's month of the year, from 1 to 12.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a month.\n * @return {Expr}\n */\nfunction Month(expr) {\n  arity.exact(1, arguments, Month.name)\n  return new Expr({ month: wrap(expr) })\n}\n\n/**\n * Returns the time expression's year, following the ISO-8601 standard.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a year.\n * @return {Expr}\n */\nfunction Year(expr) {\n  arity.exact(1, arguments, Year.name)\n  return new Expr({ year: wrap(expr) })\n}\n\n/**\n * Converts an expression to a date literal.\n *\n * @param {module:query~ExprArg} expression\n *   An expression to convert to a date.\n * @return {Expr}\n */\nfunction ToDate(expr) {\n  arity.exact(1, arguments, ToDate.name)\n  return new Expr({ to_date: wrap(expr) })\n}\n\n/**\n * Move database to a new hierarchy.\n *\n * @param {string}  from database reference to be moved.\n * @param {string}  to new parent database reference.\n * @return {Expr}   The expression wrapping the provided object.\n * @see <a href=\"https://app.fauna.com/documentation/reference/queryapi#write-functions\">FaunaDB Write Functions</a>\n */\nfunction MoveDatabase(from, to) {\n  arity.exact(2, arguments, MoveDatabase.name)\n  return new Expr({ move_database: wrap(from), to: wrap(to) })\n}\n\n/**\n * Returns a set of all documents in the given collection.\n * A set must be paginated in order to retrieve its values.\n *\n * @param collection a reference to the collection. Type: Ref\n * @return a new {@link Expr} instance\n * @see #Paginate(Expr)\n */\nfunction Documents(collection) {\n  arity.exact(1, arguments, Documents.name)\n  return new Expr({ documents: wrap(collection) })\n}\n\n/**\n *\n * @param {module:query~ExprArg} expr\n *  An expression (i.e. Set, Page, or Array) to reverse\n * @return {Expr}\n */\nfunction Reverse(expr) {\n  arity.exact(1, arguments, Reverse.name)\n  return new Expr({ reverse: wrap(expr) })\n}\n\n/**\n *\n * @param {module:query~ExprArg} name\n * A string representing an AccessProvider's name\n * @return {Expr}\n */\nfunction AccessProvider(name) {\n  arity.exact(1, arguments, AccessProvider.name)\n  return new Expr({ access_provider: wrap(name) })\n}\n\n// Helpers\n\n/**\n * @ignore\n */\nfunction arity(min, max, args, callerFunc) {\n  if (\n    (min !== null && args.length < min) ||\n    (max !== null && args.length > max)\n  ) {\n    throw new errors.InvalidArity(min, max, args.length, callerFunc)\n  }\n}\n\narity.exact = function(n, args, callerFunc) {\n  arity(n, n, args, callerFunc)\n}\narity.max = function(n, args, callerFunc) {\n  arity(null, n, args, callerFunc)\n}\narity.min = function(n, args, callerFunc) {\n  arity(n, null, args, callerFunc)\n}\narity.between = function(min, max, args, callerFunc) {\n  arity(min, max, args, callerFunc)\n}\n\n/** Adds optional parameters to the query.\n *\n * @ignore\n * */\nfunction params(mainParams, optionalParams) {\n  for (var key in optionalParams) {\n    var val = optionalParams[key]\n    if (val !== null && val !== undefined) {\n      mainParams[key] = val\n    }\n  }\n  return mainParams\n}\n\n/**\n * Called on rest arguments.\n * This ensures that a single value passed is not put in an array, so\n * `query.add([1, 2])` will work as well as `query.add(1, 2)`.\n *\n * @ignore\n */\nfunction varargs(values) {\n  var valuesAsArr = Array.isArray(values)\n    ? values\n    : Array.prototype.slice.call(values)\n  return values.length === 1 ? values[0] : valuesAsArr\n}\n\n/**\n * @ignore\n */\nfunction argsToArray(args) {\n  var rv = []\n  rv.push.apply(rv, args)\n  return rv\n}\n\n/**\n * Wraps an object as an Expression. This will automatically wrap any bare objects with\n * the appropriate {@link object} escaping.\n * @param {Object} obj\n *  The object to be wrapped as an Expression.\n * @returns {Expr}\n *   The expression wrapping the provided object.\n * @private\n */\nfunction wrap(obj) {\n  arity.exact(1, arguments, wrap.name)\n  if (obj === null) {\n    return null\n  } else if (\n    obj instanceof Expr ||\n    util.checkInstanceHasProperty(obj, '_isFaunaExpr')\n  ) {\n    return obj\n  } else if (typeof obj === 'symbol') {\n    return obj.toString().replace(/Symbol\\((.*)\\)/, function(str, symbol) {\n      return symbol\n    })\n  } else if (typeof obj === 'function') {\n    return Lambda(obj)\n  } else if (Array.isArray(obj)) {\n    return new Expr(\n      obj.map(function(elem) {\n        return wrap(elem)\n      })\n    )\n  } else if (obj instanceof Uint8Array || obj instanceof ArrayBuffer) {\n    return new values.Bytes(obj)\n  } else if (typeof obj === 'object') {\n    return new Expr({ object: wrapValues(obj) })\n  } else {\n    return obj\n  }\n}\n\n/**\n * Wraps all of the values of a provided Object, while leaving the parent object unwrapped.\n * @param {Object} obj\n *  The object whose values are to be wrapped as Expressions.\n * @returns {Object}\n *  A copy of the provided object, with the values wrapped as Expressions.\n * @private\n */\nfunction wrapValues(obj) {\n  if (obj !== null) {\n    var rv = {}\n\n    Object.keys(obj).forEach(function(key) {\n      rv[key] = wrap(obj[key])\n    })\n\n    return rv\n  } else {\n    return null\n  }\n}\n\nmodule.exports = {\n  Ref: Ref,\n  Bytes: Bytes,\n  Abort: Abort,\n  At: At,\n  Let: Let,\n  Var: Var,\n  If: If,\n  Do: Do,\n  Object: objectFunction,\n  Lambda: Lambda,\n  Call: Call,\n  Query: Query,\n  Map: Map,\n  Foreach: Foreach,\n  Filter: Filter,\n  Take: Take,\n  Drop: Drop,\n  Prepend: Prepend,\n  Append: Append,\n  IsEmpty: IsEmpty,\n  IsNonEmpty: IsNonEmpty,\n  IsNumber: IsNumber,\n  IsDouble: IsDouble,\n  IsInteger: IsInteger,\n  IsBoolean: IsBoolean,\n  IsNull: IsNull,\n  IsBytes: IsBytes,\n  IsTimestamp: IsTimestamp,\n  IsDate: IsDate,\n  IsString: IsString,\n  IsArray: IsArray,\n  IsObject: IsObject,\n  IsRef: IsRef,\n  IsSet: IsSet,\n  IsDoc: IsDoc,\n  IsLambda: IsLambda,\n  IsCollection: IsCollection,\n  IsDatabase: IsDatabase,\n  IsIndex: IsIndex,\n  IsFunction: IsFunction,\n  IsKey: IsKey,\n  IsToken: IsToken,\n  IsCredentials: IsCredentials,\n  IsRole: IsRole,\n  Get: Get,\n  KeyFromSecret: KeyFromSecret,\n  Reduce: Reduce,\n  Paginate: Paginate,\n  Exists: Exists,\n  Create: Create,\n  Update: Update,\n  Replace: Replace,\n  Delete: Delete,\n  Insert: Insert,\n  Remove: Remove,\n  CreateClass: deprecate(\n    CreateClass,\n    'CreateClass() is deprecated, use CreateCollection() instead'\n  ),\n  CreateCollection: CreateCollection,\n  CreateDatabase: CreateDatabase,\n  CreateIndex: CreateIndex,\n  CreateKey: CreateKey,\n  CreateFunction: CreateFunction,\n  CreateRole: CreateRole,\n  CreateAccessProvider: CreateAccessProvider,\n  Singleton: Singleton,\n  Events: Events,\n  Match: Match,\n  Union: Union,\n  Merge: Merge,\n  Intersection: Intersection,\n  Difference: Difference,\n  Distinct: Distinct,\n  Join: Join,\n  Range: Range,\n  Login: Login,\n  Logout: Logout,\n  Identify: Identify,\n  Identity: deprecate(\n    Identity,\n    'Identity() is deprecated, use CurrentIdentity() instead'\n  ),\n  CurrentIdentity: CurrentIdentity,\n  HasIdentity: deprecate(\n    HasIdentity,\n    'HasIdentity() is deprecated, use HasCurrentIdentity() instead'\n  ),\n  HasCurrentIdentity: HasCurrentIdentity,\n  CurrentToken: CurrentToken,\n  HasCurrentToken: HasCurrentToken,\n  Concat: Concat,\n  Casefold: Casefold,\n  ContainsStr: ContainsStr,\n  ContainsStrRegex: ContainsStrRegex,\n  StartsWith: StartsWith,\n  EndsWith: EndsWith,\n  FindStr: FindStr,\n  FindStrRegex: FindStrRegex,\n  Length: Length,\n  LowerCase: LowerCase,\n  LTrim: LTrim,\n  NGram: NGram,\n  Repeat: Repeat,\n  ReplaceStr: ReplaceStr,\n  ReplaceStrRegex: ReplaceStrRegex,\n  RegexEscape: RegexEscape,\n  RTrim: RTrim,\n  Space: Space,\n  SubString: SubString,\n  TitleCase: TitleCase,\n  Trim: Trim,\n  UpperCase: UpperCase,\n  Format: Format,\n  Time: Time,\n  TimeAdd: TimeAdd,\n  TimeSubtract: TimeSubtract,\n  TimeDiff: TimeDiff,\n  Epoch: Epoch,\n  Date: Date,\n  Now: Now,\n  NextId: deprecate(NextId, 'NextId() is deprecated, use NewId() instead'),\n  NewId: NewId,\n  Database: Database,\n  Index: Index,\n  Class: deprecate(Class, 'Class() is deprecated, use Collection() instead'),\n  Collection: Collection,\n  Function: FunctionFn,\n  Role: Role,\n  AccessProviders: AccessProviders,\n  Classes: deprecate(\n    Classes,\n    'Classes() is deprecated, use Collections() instead'\n  ),\n  Collections: Collections,\n  Databases: Databases,\n  Indexes: Indexes,\n  Functions: Functions,\n  Roles: Roles,\n  Keys: Keys,\n  Tokens: Tokens,\n  Credentials: Credentials,\n  Equals: Equals,\n  Contains: deprecate(\n    Contains,\n    'Contains() is deprecated, use ContainsPath() instead'\n  ),\n  ContainsPath: ContainsPath,\n  ContainsField: ContainsField,\n  ContainsValue: ContainsValue,\n  Select: Select,\n  SelectAll: deprecate(SelectAll, 'SelectAll() is deprecated. Avoid use.'),\n  Abs: Abs,\n  Add: Add,\n  BitAnd: BitAnd,\n  BitNot: BitNot,\n  BitOr: BitOr,\n  BitXor: BitXor,\n  Ceil: Ceil,\n  Divide: Divide,\n  Floor: Floor,\n  Max: Max,\n  Min: Min,\n  Modulo: Modulo,\n  Multiply: Multiply,\n  Round: Round,\n  Subtract: Subtract,\n  Sign: Sign,\n  Sqrt: Sqrt,\n  Trunc: Trunc,\n  Count: Count,\n  Sum: Sum,\n  Mean: Mean,\n  Any: Any,\n  All: All,\n  Acos: Acos,\n  Asin: Asin,\n  Atan: Atan,\n  Cos: Cos,\n  Cosh: Cosh,\n  Degrees: Degrees,\n  Exp: Exp,\n  Hypot: Hypot,\n  Ln: Ln,\n  Log: Log,\n  Pow: Pow,\n  Radians: Radians,\n  Sin: Sin,\n  Sinh: Sinh,\n  Tan: Tan,\n  Tanh: Tanh,\n  LT: LT,\n  LTE: LTE,\n  GT: GT,\n  GTE: GTE,\n  And: And,\n  Or: Or,\n  Not: Not,\n  ToString: ToString,\n  ToNumber: ToNumber,\n  ToObject: ToObject,\n  ToArray: ToArray,\n  ToDouble: ToDouble,\n  ToInteger: ToInteger,\n  ToTime: ToTime,\n  ToSeconds: ToSeconds,\n  ToMicros: ToMicros,\n  ToMillis: ToMillis,\n  DayOfMonth: DayOfMonth,\n  DayOfWeek: DayOfWeek,\n  DayOfYear: DayOfYear,\n  Second: Second,\n  Minute: Minute,\n  Hour: Hour,\n  Month: Month,\n  Year: Year,\n  ToDate: ToDate,\n  MoveDatabase: MoveDatabase,\n  Documents: Documents,\n  Reverse: Reverse,\n  AccessProvider: AccessProvider,\n  wrap: wrap,\n}\n", "'use strict'\n\nvar values = require('./values')\n\nfunction toJSON(object, pretty) {\n  pretty = typeof pretty !== 'undefined' ? pretty : false\n\n  if (pretty) {\n    return JSON.stringify(object, null, '  ')\n  } else {\n    return JSON.stringify(object)\n  }\n}\n\nfunction parseJSON(json) {\n  return JSON.parse(json, json_parse)\n}\n\n/*\n * Parses a line-separated JSON stream. For backwards compatibility with\n * concatenated JSON objects, it attempts to parse the received content as a\n * JSON object. Failures should occur when partial or multiple line-separated\n * JSON objects are received. Upon a parsing failure, attempt paring the\n * received content as line-separated JSON objects.\n *\n * See https://en.wikipedia.org/wiki/JSON_streaming#Line-delimited_JSON\n * See https://en.wikipedia.org/wiki/JSON_streaming#Concatenated_JSON\n *\n * @private\n */\nfunction parseJSONStreaming(content) {\n  var values = []\n\n  try {\n    values.push(parseJSON(content))\n    content = '' // whole content parsed\n  } catch (err) {\n    while (true) {\n      var pos = content.indexOf('\\n') + 1 // include \\n\n      if (pos <= 0) {\n        break\n      }\n      var slice = content.slice(0, pos).trim()\n      if (slice.length > 0) {\n        // discards empty slices due to leading \\n\n        values.push(parseJSON(slice))\n      }\n      content = content.slice(pos)\n    }\n  }\n\n  return {\n    values: values,\n    buffer: content,\n  }\n}\n\nfunction json_parse(_, val) {\n  if (typeof val !== 'object' || val === null) {\n    return val\n  } else if ('@ref' in val) {\n    var ref = val['@ref']\n\n    if (!('collection' in ref) && !('database' in ref)) {\n      return values.Native.fromName(ref['id'])\n    }\n\n    var col = json_parse('collection', ref['collection'])\n    var db = json_parse('database', ref['database'])\n\n    return new values.Ref(ref['id'], col, db)\n  } else if ('@obj' in val) {\n    return val['@obj']\n  } else if ('@set' in val) {\n    return new values.SetRef(val['@set'])\n  } else if ('@ts' in val) {\n    return new values.FaunaTime(val['@ts'])\n  } else if ('@date' in val) {\n    return new values.FaunaDate(val['@date'])\n  } else if ('@bytes' in val) {\n    return new values.Bytes(val['@bytes'])\n  } else if ('@query' in val) {\n    return new values.Query(val['@query'])\n  } else {\n    return val\n  }\n}\n\nmodule.exports = {\n  toJSON: toJSON,\n  parseJSON: parseJSON,\n  parseJSONStreaming: parseJSONStreaming,\n}\n", "'use strict'\n\nvar query = require('./query')\nvar objectAssign = require('object-assign')\n\n/**\n * A FaunaDB Lambda expression to be passed into one of the collection\n * functions: Map or Filter.\n *\n * @callback PageHelper~collectionFunction\n * @param {any} var\n *   The variable passed in by FaunaDB when this Lambda\n *   function is executed.\n * @return {Expr}\n *   The FaunaDB query expression to be returned by this Lambda.\n */\n\n/**\n * @callback PageHelper~eachFunction\n * @param {Object} page\n *   A page returned by FaunaDB's Paginate function.\n */\n\n/**\n * A wrapper that provides a helpful API for consuming FaunaDB pages.\n *\n * Generally this is constructed through the {@link Client#paginate} method.\n *\n * The {@link PageHelper#map} and {@link PageHelper#filter} methods will wrap the underlying query with a Map\n * and Filter query function, respectively. These will be executed on the server when a promise-returning function\n * is called.\n *\n * The {@link PageHelper#each} and {@link PageHelper#eachReverse} functions dispatch queries to FaunaDB, and return Promises\n * representing the completion of those queries. The callbacks provided to these functions are executed locally when the\n * queries return.\n *\n * The {@link PageHelper#nextPage} and {@link PageHelper#previousPage} functions also dispatch queries to FaunaDB,\n * but return their responses in a wrapped Promise.\n *\n * @param {Client} client\n *   The FaunaDB client used to paginate.\n * @param {Object} set\n *   The set to paginate.\n * @param {?Object} params\n *   Parameters to be passed to the FaunaDB Paginate function.\n * @param {?Object} options\n *   Object that configures the current pagination, overriding FaunaDB client options.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @constructor\n */\nfunction PageHelper(client, set, params, options) {\n  if (params === undefined) {\n    params = {}\n  }\n\n  if (options === undefined) {\n    options = {}\n  }\n\n  this.reverse = false\n  this.params = {}\n\n  this.before = undefined\n  this.after = undefined\n\n  objectAssign(this.params, params)\n\n  var cursorParams = this.params.cursor || this.params\n\n  if ('before' in cursorParams) {\n    this.before = cursorParams.before\n    delete cursorParams.before\n  } else if ('after' in cursorParams) {\n    this.after = cursorParams.after\n    delete cursorParams.after\n  }\n\n  this.options = {}\n  objectAssign(this.options, options)\n\n  this.client = client\n  this.set = set\n\n  /**\n   * @member {Array.<Function>}\n   * @type {Array.<Function>}\n   * @private\n   */\n  this._faunaFunctions = []\n}\n\n/**\n * Wraps the set to be paginated with a FaunaDB Map function.\n * As this function is executed on the server, the `lambda` param must\n * return a valid query expression.\n *\n * @param {PageHelper~collectionFunction} lambda\n *   The Lambda expression to be passed into the Map function.\n * @return {PageHelper}\n *\n */\nPageHelper.prototype.map = function(lambda) {\n  var rv = this._clone()\n  rv._faunaFunctions.push(function(q) {\n    return query.Map(q, lambda)\n  })\n  return rv\n}\n\n/**\n * Wraps the set to be paginated with a FaunaDB Filter funciton.\n * As this function is executed on the server, the `lambda` param must\n * return a valid query expression.\n *\n * @param {PageHelper~collectionFunction} lambda\n *   The lambda expression to be passed into the Filter function.\n * @return {PageHelper}\n */\nPageHelper.prototype.filter = function(lambda) {\n  var rv = this._clone()\n  rv._faunaFunctions.push(function(q) {\n    return query.Filter(q, lambda)\n  })\n  return rv\n}\n\n/**\n * Executes the provided function for each page.\n *\n * @param {PageHelper~eachFunction} lambda\n *   A function to be executed for each page.\n * @returns {external:Promise.<void>}\n */\nPageHelper.prototype.each = function(lambda) {\n  return this._retrieveNextPage(this.after, false).then(\n    this._consumePages(lambda, false)\n  )\n}\n\n/**\n * Executes the provided function for each page, in the reverse direction.\n * @param {PageHelper~eachFunction} lambda\n * @returns {external:Promise.<void>}\n */\nPageHelper.prototype.eachReverse = function(lambda) {\n  return this._retrieveNextPage(this.before, true).then(\n    this._consumePages(lambda, true)\n  )\n}\n\n/**\n * Queries for the previous page from the current cursor point; this mutates\n * the state of the PageHelper when the query completes, updating the internal\n * cursor state to that of the returned page.\n *\n * @returns {external:Promise.<object>}\n */\nPageHelper.prototype.previousPage = function() {\n  var self = this\n  return this._retrieveNextPage(this.before, true).then(\n    this._adjustCursors.bind(self)\n  )\n}\n\n/**\n * Queries for the next page from the current cursor point; this mutates\n * the state of the PageHelper when the query completes, updating the internal\n * cursor state to that of the returned page.\n *\n * @returns {external:Promise.<object>}\n */\nPageHelper.prototype.nextPage = function() {\n  var self = this\n  return this._retrieveNextPage(this.after, false).then(\n    this._adjustCursors.bind(self)\n  )\n}\n\nPageHelper.prototype._adjustCursors = function(page) {\n  if (page.after !== undefined) {\n    this.after = page.after\n  }\n\n  if (page.before !== undefined) {\n    this.before = page.before\n  }\n\n  return page.data\n}\n\nPageHelper.prototype._consumePages = function(lambda, reverse) {\n  var self = this\n  return function(page) {\n    var data = []\n    page.data.forEach(function(item) {\n      if (item.document) {\n        item.instance = item.document\n      }\n      if (item.value && item.value.document) {\n        item.value.instance = item.value.document\n      }\n      data.push(item)\n    })\n    lambda(data)\n\n    var nextCursor\n    if (reverse) {\n      nextCursor = page.before\n    } else {\n      nextCursor = page.after\n    }\n\n    if (nextCursor !== undefined) {\n      return self\n        ._retrieveNextPage(nextCursor, reverse)\n        .then(self._consumePages(lambda, reverse))\n    } else {\n      return Promise.resolve()\n    }\n  }\n}\n\n/**\n *\n * @returns {external:Promise.<Object>}\n * @private\n */\nPageHelper.prototype._retrieveNextPage = function(cursor, reverse) {\n  var opts = {}\n  objectAssign(opts, this.params)\n  var cursorOpts = opts.cursor || opts\n\n  if (cursor !== undefined) {\n    if (reverse) {\n      cursorOpts.before = cursor\n    } else {\n      cursorOpts.after = cursor\n    }\n  } else {\n    if (reverse) {\n      cursorOpts.before = null\n    }\n  }\n\n  var q = query.Paginate(this.set, opts)\n\n  if (this._faunaFunctions.length > 0) {\n    this._faunaFunctions.forEach(function(lambda) {\n      q = lambda(q)\n    })\n  }\n\n  return this.client.query(q, this.options)\n}\n\n/**\n * @private\n * @returns {PageHelper}\n */\nPageHelper.prototype._clone = function() {\n  return Object.create(PageHelper.prototype, {\n    client: { value: this.client },\n    set: { value: this.set },\n    _faunaFunctions: { value: this._faunaFunctions },\n    before: { value: this.before },\n    after: { value: this.after },\n    params: { value: this.params },\n  })\n}\n\nmodule.exports = PageHelper\n", "'use strict'\n\n/**\n * A structure containing the request and response context for a given FaunaDB request.\n * Provided to an observer function optionally defined in the {@link Client} constructor.\n *\n * @param {'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE'} method\n *   The HTTP method used in the request.\n * @param {string} path\n *   The path that was queried. Relative to the client's domain.\n * @param {string} query\n *   URL query parameters. Only set if `method` is \"GET\".\n * @param {Object} requestRaw\n *   The JSON request string.\n * @param {Object} requestContent\n *   The request data.\n * @param {string} responseRaw\n *   The unparsed response data, as a string.\n * @param {object | FaunaHttpErrorResponseContent} responseContent\n *   The response data parsed as JSON.\n * @param {number} statusCode\n *   The HTTP response status code.\n * @param {object} responseHeaders\n *   The HTTP headers returned in the response.\n * @param {number} startTime\n *   The time the request was issued by the client.\n * @param {number} endTime\n *   The time the response was received by the client.\n * @constructor\n */\nfunction RequestResult(\n  method,\n  path,\n  query,\n  requestRaw,\n  requestContent,\n  responseRaw,\n  responseContent,\n  statusCode,\n  responseHeaders,\n  startTime,\n  endTime\n) {\n  /** @type {'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE'} */\n  this.method = method\n\n  /** @type {string} */\n  this.path = path\n\n  /**\n   * URL query. Null unless `method == 'get'`.\n   * *Not* related to {@link Client.query}.\n   * @type {object}\n   */\n  this.query = query\n\n  /** @type {string} */\n  this.requestRaw = requestRaw\n\n  /** @type {object} */\n  this.requestContent = requestContent\n\n  /** @type {string} */\n  this.responseRaw = responseRaw\n\n  /**\n   * Parsed value returned by the server.\n   * Includes \"resource\" wrapper dict, or may be an FaunaHttpErrorResponseContent instead\n   * @type {object | FaunaHttpErrorResponseContent}\n   */\n  this.responseContent = responseContent\n\n  /** @type {number} */\n  this.statusCode = statusCode\n\n  /** @type {object} */\n  this.responseHeaders = responseHeaders\n\n  /** @type {number} */\n  this.startTime = startTime\n\n  /** @type {number} */\n  this.endTime = endTime\n}\n\n/**\n * `this.endTime - this.startTime`: Time taken in milliseconds.\n * @type {number}\n */\nObject.defineProperty(RequestResult.prototype, 'timeTaken', {\n  get: function() {\n    return this.endTime - this.startTime\n  },\n})\n\nmodule.exports = RequestResult\n", "'use strict'\nvar util = require('../_util')\n\n/**\n * Thrown by HttpClient when request hits specified timeout.\n *\n * @param {?string} message\n * @extends Error\n * @constructor\n */\nfunction TimeoutError(message) {\n  Error.call(this)\n\n  this.message = message || 'Request aborted due to timeout'\n  this.isTimeoutError = true\n}\n\nutil.inherits(TimeoutError, Error)\n\n/**\n * Thrown by HttpClient when request is aborted via Signal interface.\n *\n * @param {?string} message\n * @extends Error\n * @constructor\n */\nfunction AbortError(message) {\n  Error.call(this)\n\n  this.message = message || 'Request aborted'\n  this.isAbortError = true\n}\n\nutil.inherits(AbortError, Error)\n\nmodule.exports = {\n  TimeoutError: TimeoutError,\n  AbortError: AbortError,\n}\n", "", "'use strict'\nvar http2 = require('http2')\nvar errors = require('./errors')\nvar faunaErrors = require('../errors')\nvar util = require('../_util')\n\nvar STREAM_PREFIX = 'stream::'\n\n/**\n * Http client adapter built around NodeJS http2 module.\n *\n * @constructor\n * @param {object} options Http2Adapter options.\n * @param {number} options.http2SessionIdleTime The time (in milliseconds) that\n * an HTTP2 session may live when there's no activity.\n * @private\n */\nfunction Http2Adapter(options) {\n  /**\n   * Identifies a type of adapter.\n   *\n   * @type {string}\n   */\n  this.type = 'http2'\n  /**\n   * Serves for reusing http2 sessions between multiple calls.\n   *\n   * @type {object}\n   * @private\n   */\n  this._sessionMap = {}\n  /**\n   * The time (in ms) that an HTTP2 session may live when there's no activity.\n   *\n   * @type {number}\n   * @private\n   */\n  this._http2SessionIdleTime = options.http2SessionIdleTime\n  /**\n   * Indicates whether the .close method has been called.\n   *\n   * @type {boolean}\n   * @private\n   */\n  this._closed = false\n}\n\n/**\n * Resolves ClientHttp2Session to be reused across multiple requests.\n *\n * @param {string} origin Request origin to connect to.\n * @param {?boolean} isStreaming Whether it's a streaming request. A separate session\n * is created for streaming requests to avoid shared resources with regular\n * ones for the purpose of reliability.\n * @returns {object} An interface to operate with HTTP2 session.\n */\nHttp2Adapter.prototype._resolveSessionFor = function(origin, isStreaming) {\n  var sessionKey = isStreaming ? STREAM_PREFIX + origin : origin\n\n  if (this._sessionMap[sessionKey]) {\n    return this._sessionMap[sessionKey]\n  }\n\n  var self = this\n  var timerId = null\n  var ongoingRequests = 0\n\n  var cleanup = function() {\n    self._cleanupSessionFor(origin, isStreaming)\n  }\n\n  var clearInactivityTimeout = function() {\n    if (timerId) {\n      clearTimeout(timerId)\n      timerId = null\n    }\n  }\n\n  var setInactivityTimeout = function() {\n    clearInactivityTimeout()\n\n    if (self._http2SessionIdleTime === Infinity) {\n      return\n    }\n\n    var onTimeout = function() {\n      timerId = null\n\n      if (ongoingRequests === 0) {\n        cleanup()\n      }\n    }\n\n    timerId = setTimeout(onTimeout, self._http2SessionIdleTime)\n  }\n\n  var close = function(force) {\n    clearInactivityTimeout()\n\n    var shouldDestroy = force || isStreaming\n\n    if (shouldDestroy) {\n      session.destroy()\n\n      return Promise.resolve()\n    }\n\n    return new Promise(function(resolve) {\n      session.close(resolve)\n    })\n  }\n\n  var onRequestStart = function() {\n    ++ongoingRequests\n    clearInactivityTimeout()\n  }\n\n  var onRequestEnd = function() {\n    --ongoingRequests\n\n    var noOngoingRequests = ongoingRequests === 0\n    var isSessionClosed = self._closed || session.closed || session.destroyed\n\n    if (noOngoingRequests && !isSessionClosed) {\n      setInactivityTimeout()\n    }\n  }\n\n  var session = http2\n    .connect(origin)\n    .once('error', cleanup)\n    .once('goaway', cleanup)\n  var sessionInterface = {\n    session: session,\n    close: close,\n    onRequestStart: onRequestStart,\n    onRequestEnd: onRequestEnd,\n  }\n\n  this._sessionMap[sessionKey] = sessionInterface\n\n  return sessionInterface\n}\n\n/**\n * Performs cleanup for broken session.\n *\n * @param {string} origin Request origin to connect to.\n * @param {?boolean} isStreaming Whether it's a streaming request.\n * @returns {void}\n */\nHttp2Adapter.prototype._cleanupSessionFor = function(origin, isStreaming) {\n  var sessionKey = isStreaming ? STREAM_PREFIX + origin : origin\n\n  if (this._sessionMap[sessionKey]) {\n    this._sessionMap[sessionKey].session.close()\n    delete this._sessionMap[sessionKey]\n  }\n}\n\n/**\n * Issues http requests using http2 module.\n *\n * @param {object} options Request options.\n * @param {string} options.origin Request origin.\n * @param {string} options.path Request path.\n * @param {?object} options.query Request query.\n * @param {string} options.method Request method.\n * @param {?object} options.headers Request headers.\n * @param {?string} options.body Request body utf8 string.\n * @params {?object} options.streamConsumer Stream consumer.\n * @param {?object} options.signal Abort signal object.\n * @param {?number} options.timeout Request timeout.\n * @returns {Promise} Request result.\n */\nHttp2Adapter.prototype.execute = function(options) {\n  if (this._closed) {\n    return Promise.reject(\n      new faunaErrors.ClientClosed(\n        'The Client has already been closed',\n        'No subsequent requests can be issued after the .close method is called. ' +\n          'Consider creating a new Client instance'\n      )\n    )\n  }\n\n  var self = this\n  var isStreaming = options.streamConsumer != null\n\n  return new Promise(function(resolvePromise, rejectPromise) {\n    var isPromiseSettled = false\n    var isCanceled = false\n\n    var resolve = function(value) {\n      isPromiseSettled = true\n      resolvePromise(value)\n    }\n\n    // If an error has occurred after the Promise is settled\n    // we need to call streamConsumer.onError instead of reject function.\n    // Possible scenario is aborting request when stream is already being consumed.\n    var rejectOrOnError = function(error) {\n      var remapped = remapHttp2Error({ error, isClosed: self._closed })\n\n      if (isPromiseSettled && isStreaming) {\n        return options.streamConsumer.onError(remapped)\n      }\n\n      isPromiseSettled = true\n      rejectPromise(remapped)\n    }\n\n    var onSettled = function() {\n      sessionInterface.onRequestEnd()\n\n      if (options.signal) {\n        options.signal.removeEventListener('abort', onAbort)\n      }\n    }\n\n    var onError = function(error) {\n      onSettled()\n      rejectOrOnError(error)\n    }\n\n    var onAbort = function() {\n      isCanceled = true\n      onSettled()\n      request.close(http2.constants.NGHTTP2_CANCEL)\n      rejectOrOnError(new errors.AbortError())\n    }\n\n    var onTimeout = function() {\n      isCanceled = true\n      onSettled()\n      request.close(http2.constants.NGHTTP2_CANCEL)\n      rejectOrOnError(new errors.TimeoutError())\n    }\n\n    var onResponse = function(responseHeaders) {\n      var status = responseHeaders[http2.constants.HTTP2_HEADER_STATUS]\n      var isOkStatus = status >= 200 && status < 400\n      var processStream = isOkStatus && isStreaming\n      var responseBody = ''\n\n      var onData = function(chunk) {\n        if (processStream) {\n          return options.streamConsumer.onData(chunk)\n        }\n\n        responseBody += chunk\n      }\n\n      var onEnd = function() {\n        if (!isCanceled) {\n          onSettled()\n        }\n\n        if (!processStream) {\n          return resolve({\n            body: responseBody,\n            headers: responseHeaders,\n            status: status,\n          })\n        }\n\n        // Call .onError with TypeError only if the request hasn't been canceled\n        // and the Client hasn't been closed in order to align on how\n        // FetchAdapter works - it throws the TypeError due to underlying fetch API mechanics.\n        if (!isCanceled && !self._closed) {\n          options.streamConsumer.onError(new TypeError('network error'))\n        }\n      }\n\n      if (processStream) {\n        resolve({\n          // Syntactic stream representation.\n          body: '[stream]',\n          headers: responseHeaders,\n          status: status,\n        })\n      }\n\n      request.on('data', onData).on('end', onEnd)\n    }\n\n    try {\n      var pathname =\n        (options.path[0] === '/' ? options.path : '/' + options.path) +\n        util.querystringify(options.query, '?')\n      var requestHeaders = Object.assign({}, options.headers, {\n        [http2.constants.HTTP2_HEADER_PATH]: pathname,\n        [http2.constants.HTTP2_HEADER_METHOD]: options.method,\n      })\n      var sessionInterface = self._resolveSessionFor(\n        options.origin,\n        isStreaming\n      )\n      var request = sessionInterface.session\n        .request(requestHeaders)\n        .setEncoding('utf8')\n        .on('error', onError)\n        .on('response', onResponse)\n\n      sessionInterface.onRequestStart()\n\n      // Set up timeout only if no signal provided.\n      if (!options.signal && options.timeout) {\n        request.setTimeout(options.timeout, onTimeout)\n      }\n\n      if (options.signal) {\n        options.signal.addEventListener('abort', onAbort)\n      }\n\n      if (options.body != null) {\n        request.write(options.body)\n      }\n\n      request.end()\n    } catch (error) {\n      self._cleanupSessionFor(options.origin, isStreaming)\n      rejectOrOnError(error)\n    }\n  })\n}\n\n/**\n * Moves to the closed state, cleans up ongoing HTTP2 sessions if any.\n *\n * @param {?object} opts Close options.\n * @param {?boolean} opts.force Whether to force resources clean up.\n * @returns {Promise<void>}\n */\nHttp2Adapter.prototype.close = function(opts) {\n  opts = opts || {}\n\n  this._closed = true\n\n  var noop = function() {}\n\n  return Promise.all(\n    Object.values(this._sessionMap).map(function(sessionInterface) {\n      return sessionInterface.close(opts.force)\n    })\n  ).then(noop)\n}\n\n/**\n * Remaps internal NodeJS error into ClientClosed one.\n *\n * @private\n * @param {Error} error Error object.\n * @returns {Error} Remapped error.\n */\nfunction remapHttp2Error({ error, isClosed }) {\n  var shouldRemap =\n    isClosed &&\n    (error.code === 'ERR_HTTP2_GOAWAY_SESSION' ||\n      error.code === 'ERR_HTTP2_STREAM_CANCEL')\n\n  if (shouldRemap) {\n    return new faunaErrors.ClientClosed(\n      'The request is aborted due to the Client#close call'\n    )\n  }\n\n  return error\n}\n\nmodule.exports = Http2Adapter\n", "/**\n * @typedef {object} PrivateData\n * @property {EventTarget} eventTarget The event target.\n * @property {{type:string}} event The original event object.\n * @property {number} eventPhase The current event phase.\n * @property {EventTarget|null} currentTarget The current event target.\n * @property {boolean} canceled The flag to prevent default.\n * @property {boolean} stopped The flag to stop propagation.\n * @property {boolean} immediateStopped The flag to stop propagation immediately.\n * @property {Function|null} passiveListener The listener if the current listener is passive. Otherwise this is null.\n * @property {number} timeStamp The unix time.\n * @private\n */\n\n/**\n * Private data for event wrappers.\n * @type {WeakMap<Event, PrivateData>}\n * @private\n */\nconst privateData = new WeakMap()\n\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrappers = new WeakMap()\n\n/**\n * Get private data.\n * @param {Event} event The event object to get private data.\n * @returns {PrivateData} The private data of the event.\n * @private\n */\nfunction pd(event) {\n    const retv = privateData.get(event)\n    console.assert(\n        retv != null,\n        \"'this' is expected an Event object, but got\",\n        event\n    )\n    return retv\n}\n\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data {PrivateData} private data.\n */\nfunction setCancelFlag(data) {\n    if (data.passiveListener != null) {\n        if (\n            typeof console !== \"undefined\" &&\n            typeof console.error === \"function\"\n        ) {\n            console.error(\n                \"Unable to preventDefault inside passive event listener invocation.\",\n                data.passiveListener\n            )\n        }\n        return\n    }\n    if (!data.event.cancelable) {\n        return\n    }\n\n    data.canceled = true\n    if (typeof data.event.preventDefault === \"function\") {\n        data.event.preventDefault()\n    }\n}\n\n/**\n * @see https://dom.spec.whatwg.org/#interface-event\n * @private\n */\n/**\n * The event wrapper.\n * @constructor\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Event|{type:string}} event The original event to wrap.\n */\nfunction Event(eventTarget, event) {\n    privateData.set(this, {\n        eventTarget,\n        event,\n        eventPhase: 2,\n        currentTarget: eventTarget,\n        canceled: false,\n        stopped: false,\n        immediateStopped: false,\n        passiveListener: null,\n        timeStamp: event.timeStamp || Date.now(),\n    })\n\n    // https://heycam.github.io/webidl/#Unforgeable\n    Object.defineProperty(this, \"isTrusted\", { value: false, enumerable: true })\n\n    // Define accessors\n    const keys = Object.keys(event)\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i]\n        if (!(key in this)) {\n            Object.defineProperty(this, key, defineRedirectDescriptor(key))\n        }\n    }\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEvent.prototype = {\n    /**\n     * The type of this event.\n     * @type {string}\n     */\n    get type() {\n        return pd(this).event.type\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get target() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get currentTarget() {\n        return pd(this).currentTarget\n    },\n\n    /**\n     * @returns {EventTarget[]} The composed path of this event.\n     */\n    composedPath() {\n        const currentTarget = pd(this).currentTarget\n        if (currentTarget == null) {\n            return []\n        }\n        return [currentTarget]\n    },\n\n    /**\n     * Constant of NONE.\n     * @type {number}\n     */\n    get NONE() {\n        return 0\n    },\n\n    /**\n     * Constant of CAPTURING_PHASE.\n     * @type {number}\n     */\n    get CAPTURING_PHASE() {\n        return 1\n    },\n\n    /**\n     * Constant of AT_TARGET.\n     * @type {number}\n     */\n    get AT_TARGET() {\n        return 2\n    },\n\n    /**\n     * Constant of BUBBLING_PHASE.\n     * @type {number}\n     */\n    get BUBBLING_PHASE() {\n        return 3\n    },\n\n    /**\n     * The target of this event.\n     * @type {number}\n     */\n    get eventPhase() {\n        return pd(this).eventPhase\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopPropagation() {\n        const data = pd(this)\n\n        data.stopped = true\n        if (typeof data.event.stopPropagation === \"function\") {\n            data.event.stopPropagation()\n        }\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopImmediatePropagation() {\n        const data = pd(this)\n\n        data.stopped = true\n        data.immediateStopped = true\n        if (typeof data.event.stopImmediatePropagation === \"function\") {\n            data.event.stopImmediatePropagation()\n        }\n    },\n\n    /**\n     * The flag to be bubbling.\n     * @type {boolean}\n     */\n    get bubbles() {\n        return Boolean(pd(this).event.bubbles)\n    },\n\n    /**\n     * The flag to be cancelable.\n     * @type {boolean}\n     */\n    get cancelable() {\n        return Boolean(pd(this).event.cancelable)\n    },\n\n    /**\n     * Cancel this event.\n     * @returns {void}\n     */\n    preventDefault() {\n        setCancelFlag(pd(this))\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     */\n    get defaultPrevented() {\n        return pd(this).canceled\n    },\n\n    /**\n     * The flag to be composed.\n     * @type {boolean}\n     */\n    get composed() {\n        return Boolean(pd(this).event.composed)\n    },\n\n    /**\n     * The unix time of this event.\n     * @type {number}\n     */\n    get timeStamp() {\n        return pd(this).timeStamp\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     * @deprecated\n     */\n    get srcElement() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The flag to stop event bubbling.\n     * @type {boolean}\n     * @deprecated\n     */\n    get cancelBubble() {\n        return pd(this).stopped\n    },\n    set cancelBubble(value) {\n        if (!value) {\n            return\n        }\n        const data = pd(this)\n\n        data.stopped = true\n        if (typeof data.event.cancelBubble === \"boolean\") {\n            data.event.cancelBubble = true\n        }\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     * @deprecated\n     */\n    get returnValue() {\n        return !pd(this).canceled\n    },\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag(pd(this))\n        }\n    },\n\n    /**\n     * Initialize this event object. But do nothing under event dispatching.\n     * @param {string} type The event type.\n     * @param {boolean} [bubbles=false] The flag to be possible to bubble up.\n     * @param {boolean} [cancelable=false] The flag to be possible to cancel.\n     * @deprecated\n     */\n    initEvent() {\n        // Do nothing.\n    },\n}\n\n// `constructor` is not enumerable.\nObject.defineProperty(Event.prototype, \"constructor\", {\n    value: Event,\n    configurable: true,\n    writable: true,\n})\n\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof window !== \"undefined\" && typeof window.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, window.Event.prototype)\n\n    // Make association for wrappers.\n    wrappers.set(window.Event.prototype, Event)\n}\n\n/**\n * Get the property descriptor to redirect a given property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to redirect the property.\n * @private\n */\nfunction defineRedirectDescriptor(key) {\n    return {\n        get() {\n            return pd(this).event[key]\n        },\n        set(value) {\n            pd(this).event[key] = value\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Get the property descriptor to call a given method property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to call the method property.\n * @private\n */\nfunction defineCallDescriptor(key) {\n    return {\n        value() {\n            const event = pd(this).event\n            return event[key].apply(event, arguments)\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define new wrapper class.\n * @param {Function} BaseEvent The base wrapper class.\n * @param {Object} proto The prototype of the original event.\n * @returns {Function} The defined wrapper class.\n * @private\n */\nfunction defineWrapper(BaseEvent, proto) {\n    const keys = Object.keys(proto)\n    if (keys.length === 0) {\n        return BaseEvent\n    }\n\n    /** CustomEvent */\n    function CustomEvent(eventTarget, event) {\n        BaseEvent.call(this, eventTarget, event)\n    }\n\n    CustomEvent.prototype = Object.create(BaseEvent.prototype, {\n        constructor: { value: CustomEvent, configurable: true, writable: true },\n    })\n\n    // Define accessors.\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i]\n        if (!(key in BaseEvent.prototype)) {\n            const descriptor = Object.getOwnPropertyDescriptor(proto, key)\n            const isFunc = typeof descriptor.value === \"function\"\n            Object.defineProperty(\n                CustomEvent.prototype,\n                key,\n                isFunc\n                    ? defineCallDescriptor(key)\n                    : defineRedirectDescriptor(key)\n            )\n        }\n    }\n\n    return CustomEvent\n}\n\n/**\n * Get the wrapper class of a given prototype.\n * @param {Object} proto The prototype of the original event to get its wrapper.\n * @returns {Function} The wrapper class.\n * @private\n */\nfunction getWrapper(proto) {\n    if (proto == null || proto === Object.prototype) {\n        return Event\n    }\n\n    let wrapper = wrappers.get(proto)\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapper(Object.getPrototypeOf(proto)), proto)\n        wrappers.set(proto, wrapper)\n    }\n    return wrapper\n}\n\n/**\n * Wrap a given event to management a dispatching.\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Object} event The event to wrap.\n * @returns {Event} The wrapper instance.\n * @private\n */\nexport function wrapEvent(eventTarget, event) {\n    const Wrapper = getWrapper(Object.getPrototypeOf(event))\n    return new Wrapper(eventTarget, event)\n}\n\n/**\n * Get the immediateStopped flag of a given event.\n * @param {Event} event The event to get.\n * @returns {boolean} The flag to stop propagation immediately.\n * @private\n */\nexport function isStopped(event) {\n    return pd(event).immediateStopped\n}\n\n/**\n * Set the current event phase of a given event.\n * @param {Event} event The event to set current target.\n * @param {number} eventPhase New event phase.\n * @returns {void}\n * @private\n */\nexport function setEventPhase(event, eventPhase) {\n    pd(event).eventPhase = eventPhase\n}\n\n/**\n * Set the current target of a given event.\n * @param {Event} event The event to set current target.\n * @param {EventTarget|null} currentTarget New current target.\n * @returns {void}\n * @private\n */\nexport function setCurrentTarget(event, currentTarget) {\n    pd(event).currentTarget = currentTarget\n}\n\n/**\n * Set a passive listener of a given event.\n * @param {Event} event The event to set current target.\n * @param {Function|null} passiveListener New passive listener.\n * @returns {void}\n * @private\n */\nexport function setPassiveListener(event, passiveListener) {\n    pd(event).passiveListener = passiveListener\n}\n", "import {\n    isStopped,\n    setCurrentTarget,\n    setEventPhase,\n    setPassiveListener,\n    wrapEvent,\n} from \"./event.mjs\"\n\n/**\n * @typedef {object} ListenerNode\n * @property {Function} listener\n * @property {1|2|3} listenerType\n * @property {boolean} passive\n * @property {boolean} once\n * @property {ListenerNode|null} next\n * @private\n */\n\n/**\n * @type {WeakMap<object, Map<string, ListenerNode>>}\n * @private\n */\nconst listenersMap = new WeakMap()\n\n// Listener types\nconst CAPTURE = 1\nconst BUBBLE = 2\nconst ATTRIBUTE = 3\n\n/**\n * Check whether a given value is an object or not.\n * @param {any} x The value to check.\n * @returns {boolean} `true` if the value is an object.\n */\nfunction isObject(x) {\n    return x !== null && typeof x === \"object\" //eslint-disable-line no-restricted-syntax\n}\n\n/**\n * Get listeners.\n * @param {EventTarget} eventTarget The event target to get.\n * @returns {Map<string, ListenerNode>} The listeners.\n * @private\n */\nfunction getListeners(eventTarget) {\n    const listeners = listenersMap.get(eventTarget)\n    if (listeners == null) {\n        throw new TypeError(\n            \"'this' is expected an EventTarget object, but got another value.\"\n        )\n    }\n    return listeners\n}\n\n/**\n * Get the property descriptor for the event attribute of a given event.\n * @param {string} eventName The event name to get property descriptor.\n * @returns {PropertyDescriptor} The property descriptor.\n * @private\n */\nfunction defineEventAttributeDescriptor(eventName) {\n    return {\n        get() {\n            const listeners = getListeners(this)\n            let node = listeners.get(eventName)\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    return node.listener\n                }\n                node = node.next\n            }\n            return null\n        },\n\n        set(listener) {\n            if (typeof listener !== \"function\" && !isObject(listener)) {\n                listener = null // eslint-disable-line no-param-reassign\n            }\n            const listeners = getListeners(this)\n\n            // Traverse to the tail while removing old value.\n            let prev = null\n            let node = listeners.get(eventName)\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    // Remove old value.\n                    if (prev !== null) {\n                        prev.next = node.next\n                    } else if (node.next !== null) {\n                        listeners.set(eventName, node.next)\n                    } else {\n                        listeners.delete(eventName)\n                    }\n                } else {\n                    prev = node\n                }\n\n                node = node.next\n            }\n\n            // Add new value.\n            if (listener !== null) {\n                const newNode = {\n                    listener,\n                    listenerType: ATTRIBUTE,\n                    passive: false,\n                    once: false,\n                    next: null,\n                }\n                if (prev === null) {\n                    listeners.set(eventName, newNode)\n                } else {\n                    prev.next = newNode\n                }\n            }\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define an event attribute (e.g. `eventTarget.onclick`).\n * @param {Object} eventTargetPrototype The event target prototype to define an event attrbite.\n * @param {string} eventName The event name to define.\n * @returns {void}\n */\nfunction defineEventAttribute(eventTargetPrototype, eventName) {\n    Object.defineProperty(\n        eventTargetPrototype,\n        `on${eventName}`,\n        defineEventAttributeDescriptor(eventName)\n    )\n}\n\n/**\n * Define a custom EventTarget with event attributes.\n * @param {string[]} eventNames Event names for event attributes.\n * @returns {EventTarget} The custom EventTarget.\n * @private\n */\nfunction defineCustomEventTarget(eventNames) {\n    /** CustomEventTarget */\n    function CustomEventTarget() {\n        EventTarget.call(this)\n    }\n\n    CustomEventTarget.prototype = Object.create(EventTarget.prototype, {\n        constructor: {\n            value: CustomEventTarget,\n            configurable: true,\n            writable: true,\n        },\n    })\n\n    for (let i = 0; i < eventNames.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, eventNames[i])\n    }\n\n    return CustomEventTarget\n}\n\n/**\n * EventTarget.\n *\n * - This is constructor if no arguments.\n * - This is a function which returns a CustomEventTarget constructor if there are arguments.\n *\n * For example:\n *\n *     class A extends EventTarget {}\n *     class B extends EventTarget(\"message\") {}\n *     class C extends EventTarget(\"message\", \"error\") {}\n *     class D extends EventTarget([\"message\", \"error\"]) {}\n */\nfunction EventTarget() {\n    /*eslint-disable consistent-return */\n    if (this instanceof EventTarget) {\n        listenersMap.set(this, new Map())\n        return\n    }\n    if (arguments.length === 1 && Array.isArray(arguments[0])) {\n        return defineCustomEventTarget(arguments[0])\n    }\n    if (arguments.length > 0) {\n        const types = new Array(arguments.length)\n        for (let i = 0; i < arguments.length; ++i) {\n            types[i] = arguments[i]\n        }\n        return defineCustomEventTarget(types)\n    }\n    throw new TypeError(\"Cannot call a class as a function\")\n    /*eslint-enable consistent-return */\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEventTarget.prototype = {\n    /**\n     * Add a given listener to this event target.\n     * @param {string} eventName The event name to add.\n     * @param {Function} listener The listener to add.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    addEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n        if (typeof listener !== \"function\" && !isObject(listener)) {\n            throw new TypeError(\"'listener' should be a function or an object.\")\n        }\n\n        const listeners = getListeners(this)\n        const optionsIsObj = isObject(options)\n        const capture = optionsIsObj\n            ? Boolean(options.capture)\n            : Boolean(options)\n        const listenerType = capture ? CAPTURE : BUBBLE\n        const newNode = {\n            listener,\n            listenerType,\n            passive: optionsIsObj && Boolean(options.passive),\n            once: optionsIsObj && Boolean(options.once),\n            next: null,\n        }\n\n        // Set it as the first node if the first node is null.\n        let node = listeners.get(eventName)\n        if (node === undefined) {\n            listeners.set(eventName, newNode)\n            return\n        }\n\n        // Traverse to the tail while checking duplication..\n        let prev = null\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                // Should ignore duplication.\n                return\n            }\n            prev = node\n            node = node.next\n        }\n\n        // Add it.\n        prev.next = newNode\n    },\n\n    /**\n     * Remove a given listener from this event target.\n     * @param {string} eventName The event name to remove.\n     * @param {Function} listener The listener to remove.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    removeEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n\n        const listeners = getListeners(this)\n        const capture = isObject(options)\n            ? Boolean(options.capture)\n            : Boolean(options)\n        const listenerType = capture ? CAPTURE : BUBBLE\n\n        let prev = null\n        let node = listeners.get(eventName)\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                if (prev !== null) {\n                    prev.next = node.next\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next)\n                } else {\n                    listeners.delete(eventName)\n                }\n                return\n            }\n\n            prev = node\n            node = node.next\n        }\n    },\n\n    /**\n     * Dispatch a given event.\n     * @param {Event|{type:string}} event The event to dispatch.\n     * @returns {boolean} `false` if canceled.\n     */\n    dispatchEvent(event) {\n        if (event == null || typeof event.type !== \"string\") {\n            throw new TypeError('\"event.type\" should be a string.')\n        }\n\n        // If listeners aren't registered, terminate.\n        const listeners = getListeners(this)\n        const eventName = event.type\n        let node = listeners.get(eventName)\n        if (node == null) {\n            return true\n        }\n\n        // Since we cannot rewrite several properties, so wrap object.\n        const wrappedEvent = wrapEvent(this, event)\n\n        // This doesn't process capturing phase and bubbling phase.\n        // This isn't participating in a tree.\n        let prev = null\n        while (node != null) {\n            // Remove this listener if it's once\n            if (node.once) {\n                if (prev !== null) {\n                    prev.next = node.next\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next)\n                } else {\n                    listeners.delete(eventName)\n                }\n            } else {\n                prev = node\n            }\n\n            // Call this listener\n            setPassiveListener(\n                wrappedEvent,\n                node.passive ? node.listener : null\n            )\n            if (typeof node.listener === \"function\") {\n                try {\n                    node.listener.call(this, wrappedEvent)\n                } catch (err) {\n                    if (\n                        typeof console !== \"undefined\" &&\n                        typeof console.error === \"function\"\n                    ) {\n                        console.error(err)\n                    }\n                }\n            } else if (\n                node.listenerType !== ATTRIBUTE &&\n                typeof node.listener.handleEvent === \"function\"\n            ) {\n                node.listener.handleEvent(wrappedEvent)\n            }\n\n            // Break if `event.stopImmediatePropagation` was called.\n            if (isStopped(wrappedEvent)) {\n                break\n            }\n\n            node = node.next\n        }\n        setPassiveListener(wrappedEvent, null)\n        setEventPhase(wrappedEvent, 0)\n        setCurrentTarget(wrappedEvent, null)\n\n        return !wrappedEvent.defaultPrevented\n    },\n}\n\n// `constructor` is not enumerable.\nObject.defineProperty(EventTarget.prototype, \"constructor\", {\n    value: EventTarget,\n    configurable: true,\n    writable: true,\n})\n\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (\n    typeof window !== \"undefined\" &&\n    typeof window.EventTarget !== \"undefined\"\n) {\n    Object.setPrototypeOf(EventTarget.prototype, window.EventTarget.prototype)\n}\n\nexport { defineEventAttribute, EventTarget }\nexport default EventTarget\n", "import {\n    // Event,\n    EventTarget,\n    // Type,\n    defineEventAttribute,\n} from \"event-target-shim\"\n\n// Known Limitation\n//   Use `any` because the type of `AbortSignal` in `lib.dom.d.ts` is wrong and\n//   to make assignable our `AbortSignal` into that.\n//   https://github.com/Microsoft/TSJS-lib-generator/pull/623\ntype Events = {\n    abort: any // Event & Type<\"abort\">\n}\ntype EventAttributes = {\n    onabort: any // Event & Type<\"abort\">\n}\n\n/**\n * The signal class.\n * @see https://dom.spec.whatwg.org/#abortsignal\n */\nexport default class AbortSignal extends EventTarget<Events, EventAttributes> {\n    /**\n     * AbortSignal cannot be constructed directly.\n     */\n    public constructor() {\n        super()\n        throw new TypeError(\"AbortSignal cannot be constructed directly\")\n    }\n\n    /**\n     * Returns `true` if this `AbortSignal`'s `AbortController` has signaled to abort, and `false` otherwise.\n     */\n    public get aborted(): boolean {\n        const aborted = abortedFlags.get(this)\n        if (typeof aborted !== \"boolean\") {\n            throw new TypeError(\n                `Expected 'this' to be an 'AbortSignal' object, but got ${\n                    this === null ? \"null\" : typeof this\n                }`,\n            )\n        }\n        return aborted\n    }\n}\ndefineEventAttribute(AbortSignal.prototype, \"abort\")\n\n/**\n * Create an AbortSignal object.\n */\nexport function createAbortSignal(): AbortSignal {\n    const signal = Object.create(AbortSignal.prototype)\n    EventTarget.call(signal)\n    abortedFlags.set(signal, false)\n    return signal\n}\n\n/**\n * Abort a given signal.\n */\nexport function abortSignal(signal: AbortSignal): void {\n    if (abortedFlags.get(signal) !== false) {\n        return\n    }\n\n    abortedFlags.set(signal, true)\n    signal.dispatchEvent<\"abort\">({ type: \"abort\" })\n}\n\n/**\n * Aborted flag for each instances.\n */\nconst abortedFlags = new WeakMap<AbortSignal, boolean>()\n\n// Properties should be enumerable.\nObject.defineProperties(AbortSignal.prototype, {\n    aborted: { enumerable: true },\n})\n\n// `toString()` should return `\"[object AbortSignal]\"`\nif (typeof Symbol === \"function\" && typeof Symbol.toStringTag === \"symbol\") {\n    Object.defineProperty(AbortSignal.prototype, Symbol.toStringTag, {\n        configurable: true,\n        value: \"AbortSignal\",\n    })\n}\n", "import AbortSignal, { abortSignal, createAbortSignal } from \"./abort-signal\"\n\n/**\n * The AbortController.\n * @see https://dom.spec.whatwg.org/#abortcontroller\n */\nexport default class AbortController {\n    /**\n     * Initialize this controller.\n     */\n    public constructor() {\n        signals.set(this, createAbortSignal())\n    }\n\n    /**\n     * Returns the `AbortSignal` object associated with this object.\n     */\n    public get signal(): AbortSignal {\n        return getSignal(this)\n    }\n\n    /**\n     * Abort and signal to any observers that the associated activity is to be aborted.\n     */\n    public abort(): void {\n        abortSignal(getSignal(this))\n    }\n}\n\n/**\n * Associated signals.\n */\nconst signals = new WeakMap<AbortController, AbortSignal>()\n\n/**\n * Get the associated signal of a given controller.\n */\nfunction getSignal(controller: AbortController): AbortSignal {\n    const signal = signals.get(controller)\n    if (signal == null) {\n        throw new TypeError(\n            `Expected 'this' to be an 'AbortController' object, but got ${\n                controller === null ? \"null\" : typeof controller\n            }`,\n        )\n    }\n    return signal\n}\n\n// Properties should be enumerable.\nObject.defineProperties(AbortController.prototype, {\n    signal: { enumerable: true },\n    abort: { enumerable: true },\n})\n\nif (typeof Symbol === \"function\" && typeof Symbol.toStringTag === \"symbol\") {\n    Object.defineProperty(AbortController.prototype, Symbol.toStringTag, {\n        configurable: true,\n        value: \"AbortController\",\n    })\n}\n\nexport { AbortController, AbortSignal }\n", "/*globals require, self, window */\n\"use strict\"\n\nconst ac = require(\"./dist/abort-controller\")\n\n/*eslint-disable @mysticatea/prettier */\nconst g =\n    typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    /* otherwise */ undefined\n/*eslint-enable @mysticatea/prettier */\n\nif (g) {\n    if (typeof g.AbortController === \"undefined\") {\n        g.AbortController = ac.AbortController\n    }\n    if (typeof g.AbortSignal === \"undefined\") {\n        g.AbortSignal = ac.AbortSignal\n    }\n}\n", "", "", "'use strict'\nrequire('abort-controller/polyfill')\nvar util = require('../_util')\nvar faunaErrors = require('../errors')\nvar errors = require('./errors')\n\n/**\n * Http client adapter built around fetch API.\n *\n * @constructor\n * @param {?object} options FetchAdapter options.\n * @param {?boolean} options.keepAlive Whether use keep-alive connection.\n * @param {?boolean} options.isHttps Whether use https connection.\n * @param {?function} options.fetch Fetch compatible API.\n * @private\n */\nfunction FetchAdapter(options) {\n  options = options || {}\n\n  /**\n   * Identifies a type of adapter.\n   *\n   * @type {string}\n   */\n  this.type = 'fetch'\n  /**\n   * Indicates whether the .close method has been called.\n   *\n   * @type {boolean}\n   * @private\n   */\n  this._closed = false\n  this._fetch = util.resolveFetch(options.fetch)\n  /**\n   * A map that tracks ongoing requests to be able to cancel them when\n   * the .close method is called.\n   *\n   * @type {Map<Object, Object>}\n   * @private\n   */\n  this._pendingRequests = new Map()\n\n  if (util.isNodeEnv() && options.keepAlive) {\n    this._keepAliveEnabledAgent = new (options.isHttps\n      ? require('https')\n      : require('http')\n    ).Agent({ keepAlive: true })\n  }\n}\n\n/**\n * Issues http requests using fetch API.\n *\n * @param {object} options Request options.\n * @param {string} options.origin Request origin.\n * @param {string} options.path Request path.\n * @param {?object} options.query Request query.\n * @param {string} options.method Request method.\n * @param {?object} options.headers Request headers.\n * @param {?string} options.body Request body utf8 string.\n * @params {?object} options.streamConsumer Stream consumer.\n * @param {?object} options.signal Abort signal object.\n * @param {?number} options.timeout Request timeout.\n * @returns {Promise} Request result.\n */\nFetchAdapter.prototype.execute = function(options) {\n  if (this._closed) {\n    return Promise.reject(\n      new faunaErrors.ClientClosed(\n        'The Client has already been closed',\n        'No subsequent requests can be issued after the .close method is called. ' +\n          'Consider creating a new Client instance'\n      )\n    )\n  }\n\n  var self = this\n  var timerId = null\n  var isStreaming = options.streamConsumer != null\n  // Use timeout only if no signal provided\n  var useTimeout = !options.signal && !!options.timeout\n  var ctrl = new AbortController()\n  var pendingRequest = {\n    isStreaming: isStreaming,\n    isAbortedByClose: false,\n    // This callback can be set during the .close method call to be notified\n    // on request ending to resolve .close's Promise only after all of the requests complete.\n    onComplete: null,\n  }\n\n  self._pendingRequests.set(ctrl, pendingRequest)\n\n  var onComplete = function() {\n    self._pendingRequests.delete(ctrl)\n\n    if (options.signal) {\n      options.signal.removeEventListener('abort', onAbort)\n    }\n\n    if (pendingRequest.onComplete) {\n      pendingRequest.onComplete()\n    }\n  }\n\n  var onSettle = function() {\n    if (timerId) {\n      clearTimeout(timerId)\n    }\n  }\n\n  var onResponse = function(response) {\n    onSettle()\n\n    var headers = responseHeadersAsObject(response.headers)\n    var processStream = isStreaming && response.ok\n\n    // Regular request - return text content immediately.\n    if (!processStream) {\n      onComplete()\n\n      return response.text().then(function(content) {\n        return {\n          body: content,\n          headers: headers,\n          status: response.status,\n        }\n      })\n    }\n\n    attachStreamConsumer(response, options.streamConsumer, onComplete)\n\n    return {\n      // Syntactic stream representation.\n      body: '[stream]',\n      headers: headers,\n      status: response.status,\n    }\n  }\n\n  var onError = function(error) {\n    onSettle()\n    onComplete()\n\n    return Promise.reject(\n      remapIfAbortError(error, function() {\n        if (!isStreaming && pendingRequest.isAbortedByClose) {\n          return new faunaErrors.ClientClosed(\n            'The request is aborted due to the Client#close ' +\n              'call with the force=true option'\n          )\n        }\n\n        return useTimeout ? new errors.TimeoutError() : new errors.AbortError()\n      })\n    )\n  }\n\n  var onAbort = function() {\n    ctrl.abort()\n  }\n\n  if (useTimeout) {\n    timerId = setTimeout(function() {\n      timerId = null\n      ctrl.abort()\n    }, options.timeout)\n  }\n\n  if (options.signal) {\n    options.signal.addEventListener('abort', onAbort)\n  }\n\n  return this._fetch(\n    util.formatUrl(options.origin, options.path, options.query),\n    {\n      method: options.method,\n      headers: options.headers,\n      body: options.body,\n      agent: this._keepAliveEnabledAgent,\n      signal: ctrl.signal,\n    }\n  )\n    .then(onResponse)\n    .catch(onError)\n}\n\n/**\n * Moves to the closed state, aborts streaming requests.\n * Aborts non-streaming requests if force is true,\n * waits until they complete otherwise.\n *\n * @param {?object} opts Close options.\n * @param {?boolean} opts.force Whether to force resources clean up.\n * @returns {Promise<void>}\n */\nFetchAdapter.prototype.close = function(opts) {\n  opts = opts || {}\n\n  this._closed = true\n\n  var promises = []\n\n  var abortOrWait = function(pendingRequest, ctrl) {\n    var shouldAbort = pendingRequest.isStreaming || opts.force\n\n    if (shouldAbort) {\n      pendingRequest.isAbortedByClose = true\n\n      return ctrl.abort()\n    }\n\n    promises.push(\n      new Promise(function(resolve) {\n        pendingRequest.onComplete = resolve\n      })\n    )\n  }\n\n  this._pendingRequests.forEach(abortOrWait)\n\n  var noop = function() {}\n\n  return Promise.all(promises).then(noop)\n}\n\n/**\n * Attaches streamConsumer specifically either for browser or NodeJS.\n * Minimum browser compatibility based on current code:\n * Chrome                52\n * Edge                  79\n * Firefox               65\n * IE                    NA\n * Opera                 39\n * Safari                10.1\n * Android Webview       52\n * Chrome for Android    52\n * Firefox for Android   65\n * Opera for Android     41\n * Safari on iOS         10.3\n * Samsung Internet      6.0\n *\n * @param {object} response Fetch response.\n * @param {object} consumer StreamConsumer.\n * @param {function} onComplete Callback fired when the stream ends or errors.\n * @private\n */\nfunction attachStreamConsumer(response, consumer, onComplete) {\n  var onError = function(error) {\n    onComplete()\n    consumer.onError(remapIfAbortError(error))\n  }\n\n  if (util.isNodeEnv()) {\n    response.body\n      .on('error', onError)\n      .on('data', consumer.onData)\n      .on('end', function() {\n        onComplete()\n        // To simulate how browsers behave in case of \"end\" event.\n        consumer.onError(new TypeError('network error'))\n      })\n\n    return\n  }\n\n  // ATTENTION: The following code is meant to run in browsers and is not\n  // covered by current test automation. Manual testing on major browsers\n  // is required after making changes to it.\n  try {\n    var reader = response.body.getReader()\n    var decoder = new TextDecoder('utf-8')\n\n    function pump() {\n      return reader.read().then(function(msg) {\n        if (!msg.done) {\n          var chunk = decoder.decode(msg.value, { stream: true })\n\n          consumer.onData(chunk)\n\n          return pump()\n        }\n\n        onComplete()\n        // In case a browser hasn't thrown the \"network error\" on stream's end\n        // we need to force it in order to provide a way to handle stream's\n        // ending.\n        consumer.onError(new TypeError('network error'))\n      })\n    }\n\n    pump().catch(onError)\n  } catch (err) {\n    throw new faunaErrors.StreamsNotSupported(\n      'Please, consider providing a Fetch API-compatible function ' +\n        'with streamable response bodies. ' +\n        err\n    )\n  }\n}\n\n/**\n * Remaps an AbortError thrown by fetch to HttpClient's one\n * for timeout and abort use-cases.\n *\n * @param {Error} error Error object.\n * @param {?function} errorFactory A factory called to construct an abort error.\n * @returns {Error} Remapped or original error.\n * @private\n */\nfunction remapIfAbortError(error, errorFactory) {\n  var isAbortError = error && error.name === 'AbortError'\n\n  if (!isAbortError) {\n    return error\n  }\n\n  if (errorFactory) {\n    return errorFactory()\n  }\n\n  return new errors.AbortError()\n}\n\n/**\n * Converts fetch Headers object into POJO.\n *\n * @param {object} headers Fetch Headers object.\n * @returns {object} Response headers as a plain object.\n * @private\n */\nfunction responseHeadersAsObject(headers) {\n  var result = {}\n\n  for (var header of headers.entries()) {\n    var key = header[0]\n    var value = header[1]\n\n    result[key] = value\n  }\n\n  return result\n}\n\nmodule.exports = FetchAdapter\n", "", "'use strict'\nvar packageJson = require('../../package.json')\nconst { getBrowserOsDetails } = require('../_util')\nvar util = require('../_util')\nvar errors = require('./errors')\n\n/**\n * The driver's internal HTTP client.\n *\n * @constructor\n * @param {Object} options Same as the {@link Client} options.\n * @private\n */\nfunction HttpClient(options) {\n  var isHttps = options.scheme === 'https'\n\n  // If the port is a falsy value - replace it with default one.\n  if (!options.port) {\n    options.port = isHttps ? 443 : 80\n  }\n\n  // HTTP2 adapter is applicable only if it's NodeJS env and\n  // no fetch API override provided (to preserve backward-compatibility).\n  var useHttp2Adapter = !options.fetch && util.isNodeEnv() && isHttp2Supported()\n\n  this._adapter = useHttp2Adapter\n    ? new (require('./http2Adapter'))({\n        http2SessionIdleTime: options.http2SessionIdleTime,\n      })\n    : new (require('./fetchAdapter'))({\n        isHttps: isHttps,\n        fetch: options.fetch,\n        keepAlive: options.keepAlive,\n      })\n  this._baseUrl = options.scheme + '://' + options.domain + ':' + options.port\n  this._secret = options.secret\n  this._headers = Object.assign({}, options.headers, getDefaultHeaders())\n  this._queryTimeout = options.queryTimeout\n  this._lastSeen = null\n  this._timeout = Math.floor(options.timeout * 1000)\n}\n\n/**\n * Returns last seen transaction time.\n *\n * @returns {number} The last seen transaction time.\n */\nHttpClient.prototype.getLastTxnTime = function() {\n  return this._lastSeen\n}\n\n/**\n * Sets the last seen transaction if the given timestamp is greater than then\n * know last seen timestamp.\n *\n * @param {number} time transaction timestamp.\n */\nHttpClient.prototype.syncLastTxnTime = function(time) {\n  if (this._lastSeen == null || this._lastSeen < time) {\n    this._lastSeen = time\n  }\n}\n\n/**\n * Cleans up any held resources.\n *\n * @param {?object} opts Close options.\n * @param {?boolean} opts.force Whether to force resources clean up.\n * @returns {Promise<void>}\n */\nHttpClient.prototype.close = function(opts) {\n  return this._adapter.close(opts)\n}\n\n/**\n * Executes an HTTP request.\n *\n * @param {?object} options Request parameters.\n * @param {?string} options.method Request method.\n * @param {?string} options.path Request path.\n * @param {?string} options.body Request body.\n * @param {?object} options.query Request query.\n * @params {?object} options.streamConsumer Stream consumer, if presented\n * the request will be \"streamed\" into streamConsumer.onData function.\n * @params {function} options.streamConsumer.onData Function called with a chunk of data.\n * @params {function} options.streamConsumer.onError Function called\n * when an error occurred.\n * when the stream is ended.\n * @param {?object} options.signal Abort signal object.\n * @param {?object} options.fetch Fetch API compatible function.\n * @param {?object} options.secret FaunaDB secret.\n * @param {?object} options.queryTimeout FaunaDB query timeout.\n * @returns {Promise} The response promise.\n */\nHttpClient.prototype.execute = function(options) {\n  options = options || {}\n\n  var invalidStreamConsumer =\n    options.streamConsumer &&\n    (typeof options.streamConsumer.onData !== 'function' ||\n      typeof options.streamConsumer.onError !== 'function')\n\n  if (invalidStreamConsumer) {\n    return Promise.reject(new TypeError('Invalid \"streamConsumer\" provided'))\n  }\n\n  var secret = options.secret || this._secret\n  var queryTimeout = options.queryTimeout || this._queryTimeout\n  var headers = this._headers\n\n  headers['Authorization'] = secret && secretHeader(secret)\n  headers['X-Last-Seen-Txn'] = this._lastSeen\n  headers['X-Query-Timeout'] = queryTimeout\n\n  return this._adapter.execute({\n    origin: this._baseUrl,\n    path: options.path || '/',\n    query: options.query,\n    method: options.method || 'GET',\n    headers: util.removeNullAndUndefinedValues(headers),\n    body: options.body,\n    signal: options.signal,\n    timeout: this._timeout,\n    streamConsumer: options.streamConsumer,\n  })\n}\n\nfunction secretHeader(secret) {\n  return 'Bearer ' + secret\n}\n\n/** @ignore */\nfunction getDefaultHeaders() {\n  var driverEnv = {\n    driver: ['javascript', packageJson.version].join('-'),\n  }\n\n  var isServiceWorker\n\n  try {\n    isServiceWorker = global instanceof ServiceWorkerGlobalScope\n  } catch (error) {\n    isServiceWorker = false\n  }\n\n  try {\n    if (util.isNodeEnv()) {\n      driverEnv.runtime = ['nodejs', process.version].join('-')\n      driverEnv.env = util.getNodeRuntimeEnv()\n      var os = require('os')\n      driverEnv.os = [os.platform(), os.release()].join('-')\n    } else if (isServiceWorker) {\n      driverEnv.runtime = 'Service Worker'\n    } else {\n      driverEnv.runtime = util.getBrowserDetails()\n      driverEnv.env = 'browser'\n      driverEnv.os = getBrowserOsDetails()\n    }\n  } catch (_) {}\n\n  var headers = {\n    'X-FaunaDB-API-Version': packageJson.apiVersion,\n  }\n\n  // TODO: api cors must be enabled to accept header X-Driver-Env\n  if (util.isNodeEnv()) {\n    headers['X-Driver-Env'] = Object.keys(driverEnv)\n      .map(key => [key, driverEnv[key].toLowerCase()].join('='))\n      .join('; ')\n  }\n  return headers\n}\n\nfunction isHttp2Supported() {\n  try {\n    require('http2')\n\n    return true\n  } catch (_) {\n    return false\n  }\n}\n\nmodule.exports = {\n  HttpClient: HttpClient,\n  TimeoutError: errors.TimeoutError,\n  AbortError: errors.AbortError,\n}\n", "'use strict'\n\n/** @module stream */\n\n// NOTE: Although implemented in a separate module, streaming shares internal\n// responsibilities with both Client and HTTP interfaces, such as updating last\n// seen transaction timestamp. Therefore, this implementation\n// sometimes breaks encapsulation and calls internal getters and methods. As a\n// general rule: it's okay to call internal methods. You can interpret this\n// as calling for a package visible method in languages with fine-grained\n// visibility control. However, DO NOT change any internal state from outside of\n// its context as it'd most certainly lead to errors.\n\nrequire('abort-controller/polyfill')\nvar RequestResult = require('./RequestResult')\nvar errors = require('./errors')\nvar json = require('./_json')\nvar http = require('./_http')\nvar q = require('./query')\nvar util = require('./_util')\n\nvar DefaultEvents = ['start', 'error', 'version', 'history_rewrite']\nvar DocumentStreamEvents = DefaultEvents.concat(['snapshot'])\n\n/**\n * The internal stream client interface. This class handles the network side of\n * a stream subscription.\n *\n * @constructor\n * @param {Client} client The FaunaDB client.\n * @param {module:query~ExprArg} expression The FQL expression you are subscribing to.\n * @param {module:stream~Options} options The stream options.\n * @param {function} onEvent The stream event's callback function.\n * @private\n */\nfunction StreamClient(client, expression, options, onEvent) {\n  options = util.applyDefaults(options, {\n    fields: null,\n  })\n\n  this._client = client\n  this._onEvent = onEvent\n  this._query = q.wrap(expression)\n  this._urlParams = options.fields ? { fields: options.fields.join(',') } : null\n  this._abort = new AbortController()\n  this._state = 'idle'\n}\n\n/**\n * Takes a snapshot of the current query. Assumes the subscribed query returns a\n * reference.\n */\nStreamClient.prototype.snapshot = function() {\n  var self = this\n  self._client\n    .query(q.Get(self._query))\n    .then(function(doc) {\n      self._onEvent({\n        type: 'snapshot',\n        event: doc,\n      })\n    })\n    .catch(function(error) {\n      self._onEvent({\n        type: 'error',\n        event: error,\n      })\n    })\n}\n\n/** Initiates the stream subscription.  */\nStreamClient.prototype.subscribe = function() {\n  var self = this\n\n  if (self._state === 'idle') {\n    self._state = 'open'\n  } else {\n    throw new Error(\n      'Subscription#start should not be called several times, ' +\n        'consider instantiating a new stream instead.'\n    )\n  }\n\n  var body = JSON.stringify(self._query)\n  var startTime = Date.now()\n  var buffer = ''\n\n  function onResponse(response) {\n    var endTime = Date.now()\n    var parsed\n\n    try {\n      parsed = json.parseJSON(response.body)\n    } catch (_) {\n      parsed = response.body\n    }\n\n    var result = new RequestResult(\n      'POST',\n      'stream',\n      self._urlParams,\n      body,\n      self._query,\n      response.body,\n      parsed,\n      response.status,\n      response.headers,\n      startTime,\n      endTime\n    )\n\n    self._client._handleRequestResult(response, result)\n  }\n\n  function onData(data) {\n    var result = json.parseJSONStreaming(buffer + data)\n\n    buffer = result.buffer\n\n    result.values.forEach(function(event) {\n      if (event.txn !== undefined) {\n        self._client.syncLastTxnTime(event.txn)\n      }\n\n      if (event.event === 'error') {\n        onError(new errors.StreamErrorEvent(event))\n      } else {\n        self._onEvent(event)\n      }\n    })\n  }\n\n  function onError(error) {\n    // AbortError is triggered as result of calling\n    // close() on a Subscription. There's no need to relay this event back up.\n    if (error instanceof http.AbortError) {\n      return\n    }\n\n    self._onEvent({\n      type: 'error',\n      event: error,\n    })\n  }\n\n  self._client._http\n    .execute({\n      method: 'POST',\n      path: 'stream',\n      body: body,\n      query: self._urlParams,\n      signal: this._abort.signal,\n      streamConsumer: {\n        onError: onError,\n        onData: onData,\n      },\n    })\n    .then(onResponse)\n    .catch(onError)\n}\n\n/** Closes the stream subscription by aborting its underlying http request. */\nStreamClient.prototype.close = function() {\n  if (this._state !== 'closed') {\n    this._state = 'closed'\n    this._abort.abort()\n  }\n}\n\n/**\n * Event dispatch interface for stream subscription.\n *\n * @constructor\n * @param {string[]} allowedEvents List of allowed events.\n * @private\n */\nfunction EventDispatcher(allowedEvents) {\n  this._allowedEvents = allowedEvents\n  this._listeners = {}\n}\n\n/** Subscribe to an event\n *\n * @param {string} type The event type.\n * @param {module:stream~Subscription~eventCalllback} callback\n *   The event's callback.\n */\nEventDispatcher.prototype.on = function(type, callback) {\n  if (this._allowedEvents.indexOf(type) === -1) {\n    throw new Error('Unknown event type: ' + type)\n  }\n  if (this._listeners[type] === undefined) {\n    this._listeners[type] = []\n  }\n  this._listeners[type].push(callback)\n}\n\n/**\n * Dispatch the given event to the appropriate listeners.\n *\n * @param {Object} event The event.\n */\nEventDispatcher.prototype.dispatch = function(event) {\n  var listeners = this._listeners[event.type]\n  if (!listeners) {\n    return\n  }\n\n  for (var i = 0; i < listeners.length; i++) {\n    listeners[i].call(null, event.event, event)\n  }\n}\n\n/**\n * Stream's start event. A stream subscription always begins with a start event.\n * Upcoming events are guaranteed to have transaction timestamps equal to or greater than\n * the stream's start timestamp.\n *\n * @event module:stream~Subscription#start\n * @type {object}\n * @property {string} type='start'\n *   The event type.\n * @property {number} txn\n *   The event's transaction timestamp.\n * @property {module:number} event\n *   The stream start timestamp.\n */\n\n/**\n * A version event occurs upon any modifications to the current state of the\n * subscribed document.\n *\n * @event module:stream~Subscription#version\n * @type {object}\n * @property {string} type='version'\n *   The event type.\n * @property {number} txn\n *   The event's transaction timestamp.\n * @property {object} event\n *   The event's data.\n */\n\n/**\n * A history rewrite event occurs upon any modifications to the history of the\n * subscribed document.\n *\n * @event module:stream~Subscription#history_rewrite\n * @type {object}\n * @property {string} type='history_rewrite'\n *   The event type.\n * @property {number} txn\n *   The event's transaction timestamp.\n * @property {object} event\n *   The event's data.\n */\n\n/**\n * A snapshot event. A snapshot event is fired once the `document` stream helper\n * finishes loading the subscribed document's snapshot data. See {@link\n * Client#stream} for more details on the `document` stream helper.\n *\n * @event module:stream~Subscription#snapshot\n * @type {object}\n * @property {string} type='snapshot'\n *   The event type.\n * @property {number} txn\n *   The event's transaction timestamp.\n * @property {object} event\n *   The event's data.\n */\n\n/**\n * An error event is fired both for client and server errors that may occur as\n * a result of a subscription.\n *\n * @event module:stream~Subscription#error\n * @type {object}\n * @property {string} type='error'\n *   The event type.\n * @property {?number} txn\n *   The event's transaction timestamp.\n * @property {Error} event\n *   The underlying error.\n */\n\n/**\n * @typedef {Object} Options\n * @property {string[]} [fields=['action', 'document', 'diff', 'prev']]\n *   The fields event fields to opt-in during stream subscription. Possible\n *   options:\n *   * 'action': The action type\n *   * 'document': The document's data\n *   * 'diff': The difference between 'document' and 'prev'\n *   * 'prev': The event's previous data\n */\n\n/**\n * The callback to be executed when an new event occurs.\n *\n * @callback module:stream~Subscription~eventCalllback\n * @param {any} data The event's data field.\n * @param {object} event The event's entire object.\n */\n\n/**\n * A stream subscription which dispatches events received to the registered\n * listener functions. This class must be constructed via {@link Client#stream}\n * method.\n *\n * @constructor\n * @param {StreamClient} client\n *   Internal stream client interface.\n * @param {EventDispatcher} dispatcher\n *   Internal event dispatcher interface.\n */\nfunction Subscription(client, dispatcher) {\n  this._client = client\n  this._dispatcher = dispatcher\n}\n\n/**\n * Subscribes to an event type.\n *\n * @param {string} event\n *   The event's type.\n * @param {module:stream~Subscription~eventCalllback} callback\n *   A callback function.\n *\n * @returns {module:stream~Subscription} This instance.\n */\nSubscription.prototype.on = function(type, callback) {\n  this._dispatcher.on(type, callback)\n  return this\n}\n\n/**\n * Initiates the underlying subscription network calls.\n * @returns {module:stream~Subscription} This instance.\n */\nSubscription.prototype.start = function() {\n  this._client.subscribe()\n  return this\n}\n\n/**\n * Stops the current subscription and closes the underlying network connection.\n */\nSubscription.prototype.close = function() {\n  this._client.close()\n}\n\n/**\n * Stream API factory function. See {@link Client#stream} for details on how to\n * use stream's public interface.\n * @private\n */\nfunction StreamAPI(client) {\n  var api = function(expression, options) {\n    var dispatcher = new EventDispatcher(DefaultEvents)\n    var streamClient = new StreamClient(client, expression, options, function(\n      event\n    ) {\n      dispatcher.dispatch(event)\n    })\n    return new Subscription(streamClient, dispatcher)\n  }\n\n  api.document = function(expression, options) {\n    var buffer = []\n    var buffering = true\n    var dispatcher = new EventDispatcher(DocumentStreamEvents)\n    var streamClient = new StreamClient(client, expression, options, onEvent)\n\n    function onEvent(event) {\n      switch (event.type) {\n        case 'start':\n          dispatcher.dispatch(event)\n          streamClient.snapshot()\n          break\n        case 'snapshot':\n          resume(event)\n          break\n        case 'error':\n          dispatcher.dispatch(event)\n          break\n        default:\n          if (buffering) {\n            buffer.push(event)\n          } else {\n            dispatcher.dispatch(event)\n          }\n      }\n    }\n\n    function resume(snapshotEvent) {\n      dispatcher.dispatch(snapshotEvent)\n      for (var i = 0; i < buffer.length; i++) {\n        var bufferedEvent = buffer[i]\n        if (bufferedEvent.txn > snapshotEvent.event.ts) {\n          dispatcher.dispatch(bufferedEvent)\n        }\n      }\n      buffering = false\n      buffer = null\n    }\n\n    return new Subscription(streamClient, dispatcher)\n  }\n\n  return api\n}\n\nmodule.exports = {\n  StreamAPI: StreamAPI,\n}\n", "'use strict'\n\nvar packageJson = require('../package.json')\nvar PageHelper = require('./PageHelper')\nvar RequestResult = require('./RequestResult')\nvar errors = require('./errors')\nvar http = require('./_http')\nvar json = require('./_json')\nvar query = require('./query')\nvar stream = require('./stream')\nvar util = require('./_util')\nvar values = require('./values')\n\nvar notifyAboutNewVersion = util.notifyAboutNewVersion()\n\n/**\n * The callback that will be executed after every completed request.\n *\n * @callback Client~observerCallback\n * @param {RequestResult} res\n */\n\n/**\n * **WARNING: This is an experimental feature. There are no guarantees to\n * its API stability and/or service availability. DO NOT USE IT IN\n * PRODUCTION**.\n *\n * Creates a subscription to the result of the given read-only expression. When\n * executed, the expression must only perform reads and produce a single\n * streamable type, such as a reference or a version. Expressions that attempt\n * to perform writes or produce non-streamable types will result in an error.\n * Otherwise, any expression can be used to initiate a stream, including\n * user-defined function calls.\n *\n * The subscription returned by this method does not issue any requests until\n * the {@link module:stream~Subscription#start} method is called. Make sure to\n * subscribe to the events of interest, otherwise the received events are simply\n * ignored. For example:\n *\n * ```\n * client.stream(document.ref)\n *   .on('version', version => console.log(version))\n *   .on('error', error => console.log(error))\n *   .start()\n * ```\n *\n * Please note that streams are not temporal, meaning that there is no option to\n * configure its starting timestamp. The stream will, however, state its initial\n * subscription time via the {@link module:stream~Subscription#event:start}\n * event. A common programming mistake is to read a document, then initiate a\n * subscription. This approach can miss events that occurred between the initial\n * read and the subscription request. To prevent event loss, make sure the\n * subscription has started before performing a data load. The following example\n * buffer events until the document's data is loaded:\n *\n * ```\n * var buffer = []\n * var loaded = false\n *\n * client.stream(document.ref)\n *   .on('start', ts => {\n *     loadData(ts).then(data => {\n *       processData(data)\n *       processBuffer(buffer)\n *       loaded = true\n *     })\n *   })\n *   .on('version', version => {\n *     if (loaded) {\n *       processVersion(version)\n *     } else {\n *       buffer.push(version)\n *     }\n *   })\n *   .start()\n * ```\n *\n * The reduce boilerplate, the `document` helper implements a similar\n * functionality, except it discards events prior to the document's snapshot\n * time. The expression given to this helper must be a reference as it\n * internally runs a {@link module:query~Get} call with it. The example above\n * can be rewritten as:\n *\n * ```\n * client.stream.document(document.ref)\n *   .on('snapshot', data => processData(data))\n *   .on('version', version => processVersion(version))\n *   .start()\n * ```\n *\n * Be aware that streams are not available in all browsers. If the client can't\n * initiate a stream, an error event with the {@link\n * module:errors~StreamsNotSupported} error will be emmited.\n *\n * To stop a subscription, call the {@link module:stream~Subscription#close}\n * method:\n *\n * ```\n * var subscription = client.stream(document.ref)\n *   .on('version', version => processVersion(version))\n *   .start()\n *\n * // ...\n * subscription.close()\n * ```\n *\n * @param {module:query~ExprArg} expression\n *   The expression to subscribe to. Created from {@link module:query}\n *   functions.\n *\n * @param {?module:stream~Options} options\n *   Object that configures the stream.\n *\n * @property {function} document\n *  A document stream helper. See {@link Client#stream} for more information.\n *\n * @see module:stream~Subscription\n *\n * @function\n * @name Client#stream\n * @returns {module:stream~Subscription} A new subscription instance.\n */\n\n/**\n * A client for interacting with FaunaDB.\n *\n * Users will mainly call the {@link Client#query} method to execute queries, or\n * the {@link Client#stream} method to subscribe to streams.\n *\n * See the [FaunaDB Documentation](https://fauna.com/documentation) for detailed examples.\n *\n * All methods return promises containing a JSON object that represents the FaunaDB response.\n * Literal types in the response object will remain as strings, Arrays, and objects.\n * FaunaDB types, such as {@link Ref}, {@link SetRef}, {@link FaunaTime}, and {@link FaunaDate} will\n * be converted into the appropriate object.\n *\n * (So if a response contains `{ \"@ref\": \"collections/frogs/123\" }`,\n * it will be returned as `new Ref(\"collections/frogs/123\")`.)\n *\n * @constructor\n * @param {?Object} options\n *   Object that configures this FaunaDB client.\n * @param {?string} options.domain\n *   Base URL for the FaunaDB server.\n * @param {?{ string: string }} options.headers\n *   Base URL for the FaunaDB server.\n * @param {?('http'|'https')} options.scheme\n *   HTTP scheme to use.\n * @param {?number} options.port\n *   Port of the FaunaDB server.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @param {?number} options.timeout Read timeout in seconds.\n * @param {?Client~observerCallback} options.observer\n *   Callback that will be called after every completed request.\n * @param {?boolean} options.keepAlive\n *   Configures http/https keepAlive option (ignored in browser environments)\n * @param {?fetch} options.fetch\n *   a fetch compatible [API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) for making a request\n * @param {?number} options.queryTimeout\n *   Sets the maximum amount of time (in milliseconds) for query execution on the server\n * @param {?number} options.http2SessionIdleTime\n *   Sets the maximum amount of time (in milliseconds) an HTTP2 session may live\n *   when there's no activity. Must either be a non-negative integer, or Infinity to allow the\n *   HTTP2 session to live indefinitely (use `Client#close` to manually terminate the client).\n *   Only applicable for NodeJS environment (when http2 module is used). Default is 500ms;\n *   can also be configured via the FAUNADB_HTTP2_SESSION_IDLE_TIME environment variable\n *   which has the highest priority and overrides the option passed into the Client constructor.\n * @param {?boolean} options.checkNewVersion\n *   Enabled by default. Prints a message to the terminal when a newer driver is available.\n */\nfunction Client(options) {\n  var http2SessionIdleTime = getHttp2SessionIdleTime()\n\n  options = util.applyDefaults(options, {\n    domain: 'db.fauna.com',\n    scheme: 'https',\n    port: null,\n    secret: null,\n    timeout: 60,\n    observer: null,\n    keepAlive: true,\n    headers: {},\n    fetch: undefined,\n    queryTimeout: null,\n    http2SessionIdleTime: http2SessionIdleTime.value,\n    checkNewVersion: true,\n  })\n  notifyAboutNewVersion(options.checkNewVersion)\n\n  if (http2SessionIdleTime.shouldOverride) {\n    options.http2SessionIdleTime = http2SessionIdleTime.value\n  }\n\n  this._observer = options.observer\n  this._http = new http.HttpClient(options)\n  this.stream = stream.StreamAPI(this)\n}\n\n/**\n * Current API version.\n *\n * @type {string}\n */\nClient.apiVersion = packageJson.apiVersion\n\n/**\n * Executes a query via the FaunaDB Query API.\n * See the [docs](https://app.fauna.com/documentation/reference/queryapi),\n * and the query functions in this documentation.\n * @param expression {module:query~ExprArg}\n *   The query to execute. Created from {@link module:query} functions.\n * @param {?Object} options\n *   Object that configures the current query, overriding FaunaDB client options.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @return {external:Promise<Object>} FaunaDB response object.\n */\nClient.prototype.query = function(expression, options) {\n  return this._execute('POST', '', query.wrap(expression), null, options)\n}\n\n/**\n * Returns a {@link PageHelper} for the given Query expression.\n * This provides a helpful API for paginating over FaunaDB responses.\n * @param expression {Expr}\n *   The Query expression to paginate over.\n * @param params {Object}\n *   Options to be passed to the paginate function. See [paginate](https://app.fauna.com/documentation/reference/queryapi#read-functions).\n * @param options {?Object}\n *   Object that configures the current pagination queries, overriding FaunaDB client options.\n * @param {?string} options.secret FaunaDB secret (see [Reference Documentation](https://app.fauna.com/documentation/intro/security))\n * @returns {PageHelper} A PageHelper that wraps the provided expression.\n */\nClient.prototype.paginate = function(expression, params, options) {\n  params = util.defaults(params, {})\n  options = util.defaults(options, {})\n\n  return new PageHelper(this, expression, params, options)\n}\n\n/**\n * Sends a `ping` request to FaunaDB.\n * @return {external:Promise<string>} Ping response.\n */\nClient.prototype.ping = function(scope, timeout) {\n  return this._execute('GET', 'ping', null, { scope: scope, timeout: timeout })\n}\n\n/**\n * Get the freshest timestamp reported to this client.\n * @returns {number} the last seen transaction time\n */\nClient.prototype.getLastTxnTime = function() {\n  return this._http.getLastTxnTime()\n}\n\n/**\n * Sync the freshest timestamp seen by this client.\n *\n * This has no effect if staler than currently stored timestamp.\n * WARNING: This should be used only when coordinating timestamps across\n *          multiple clients. Moving the timestamp arbitrarily forward into\n *          the future will cause transactions to stall.\n * @param time {number} the last seen transaction time\n */\nClient.prototype.syncLastTxnTime = function(time) {\n  this._http.syncLastTxnTime(time)\n}\n\n/**\n * Closes the client session and cleans up any held resources.\n * By default, it will wait for any ongoing requests to complete on their own;\n * streaming requests are terminated forcibly. Any subsequent requests will\n * error after the .close method is called.\n * Should be used at application termination in order to release any open resources\n * and allow the process to terminate e.g. when the custom http2SessionIdleTime parameter is used.\n *\n * @param {?object} opts Close options.\n * @param {?boolean} opts.force Specifying this property will force any ongoing\n * requests to terminate instead of gracefully waiting until they complete.\n * This may result in an ERR_HTTP2_STREAM_CANCEL error for NodeJS.\n * @returns {Promise<void>}\n */\nClient.prototype.close = function(opts) {\n  return this._http.close(opts)\n}\n\nClient.prototype._execute = function(method, path, data, query, options) {\n  query = util.defaults(query, null)\n\n  if (\n    path instanceof values.Ref ||\n    util.checkInstanceHasProperty(path, '_isFaunaRef')\n  ) {\n    path = path.value\n  }\n\n  if (query !== null) {\n    query = util.removeUndefinedValues(query)\n  }\n\n  var startTime = Date.now()\n  var self = this\n  var body =\n    ['GET', 'HEAD'].indexOf(method) >= 0 ? undefined : JSON.stringify(data)\n\n  return this._http\n    .execute(\n      Object.assign({}, options, {\n        path: path,\n        query: query,\n        method: method,\n        body: body,\n      })\n    )\n    .then(function(response) {\n      var endTime = Date.now()\n      var responseObject = json.parseJSON(response.body)\n      var result = new RequestResult(\n        method,\n        path,\n        query,\n        body,\n        data,\n        response.body,\n        responseObject,\n        response.status,\n        response.headers,\n        startTime,\n        endTime\n      )\n      self._handleRequestResult(response, result, options)\n\n      return responseObject['resource']\n    })\n}\n\nClient.prototype._handleRequestResult = function(response, result, options) {\n  var txnTimeHeaderKey = 'x-txn-time'\n\n  if (response.headers[txnTimeHeaderKey] != null) {\n    this.syncLastTxnTime(parseInt(response.headers[txnTimeHeaderKey], 10))\n  }\n\n  var observers = [this._observer, options && options.observer]\n\n  observers.forEach(observer => {\n    if (typeof observer == 'function') {\n      observer(result, this)\n    }\n  })\n\n  errors.FaunaHTTPError.raiseForStatusCode(result)\n}\n\nfunction getHttp2SessionIdleTime() {\n  var fromEnv = util.getEnvVariable('FAUNADB_HTTP2_SESSION_IDLE_TIME')\n  var parsed =\n    // Allow either \"Infinity\" or parsable integer string.\n    fromEnv === 'Infinity' ? Infinity : parseInt(fromEnv, 10)\n  var useEnvVar = !isNaN(parsed)\n\n  return {\n    shouldOverride: useEnvVar,\n    value: useEnvVar ? parsed : 500,\n  }\n}\n\nmodule.exports = Client\nmodule.exports.resetNotifyAboutNewVersion = function() {\n  notifyAboutNewVersion = util.notifyAboutNewVersion()\n}\n", "'use strict'\n\nvar json = require('./_json')\n\n/**\n * Functions to assist with debug logging.\n * @module clientLogger\n */\n\n/**\n * A user provided log line handler.\n *\n * @callback loggerCallback\n * @param {string} logged\n */\n\n/**\n * Function that can be the `observer` for a {@link Client}.\n * Will call `loggerFunction` with a string representation of each {@link RequestResult}.\n *\n * An example logging string:\n * ```plain\n * Fauna POST /\n * Request JSON: {\n *   \"data\": ...\n * }\n * Response headers: {\n *    \"x-faunadb-host\": ...,\n *    \"x-faunadb-build\": ...,\n *    \"connection\": \"close\",\n *    \"content-length\": ...,\n *    \"content-type\": \"application/json;charset=utf-8\"\n *  }\n * Response JSON: {\n *    \"resource\": {\n *      \"ref\": { ... },\n *      \"class\": { ... },\n *      \"ts\": ...\n *    }\n *  }\n * Response (201): Network latency 13ms\n * ```\n *\n * @param {loggerCallback} loggerFunction\n * @return {Client~observerCallback}\n * @example\n * var client = new Client({\n *   ... other options ...\n *   observer: logger(console.log)\n * })\n * client.ping() // Logs the request and response.\n */\nfunction logger(loggerFunction) {\n  return function(requestResult, client) {\n    return loggerFunction(showRequestResult(requestResult), client)\n  }\n}\n\n/**\n * Convenience function used by {@link logger} to transform a {@link RequestResult}\n * to a string for logging.\n * @param {RequestResult} requestResult\n * @returns {string} string to be logged.\n */\nfunction showRequestResult(requestResult) {\n  var query = requestResult.query,\n    method = requestResult.method,\n    path = requestResult.path,\n    requestContent = requestResult.requestContent,\n    responseHeaders = requestResult.responseHeaders,\n    responseContent = requestResult.responseContent,\n    statusCode = requestResult.statusCode,\n    timeTaken = requestResult.timeTaken\n\n  var out = ''\n\n  function log(str) {\n    out = out + str\n  }\n\n  log('Fauna ' + method + ' /' + path + _queryString(query) + '\\n')\n  if (requestContent != null) {\n    log('  Request JSON: ' + _showJSON(requestContent) + '\\n')\n  }\n  log('  Response headers: ' + _showJSON(responseHeaders) + '\\n')\n  log('  Response JSON: ' + _showJSON(responseContent) + '\\n')\n  log('  Response (' + statusCode + '): Network latency ' + timeTaken + 'ms\\n')\n\n  return out\n}\n\nfunction _indent(str) {\n  var indentStr = '  '\n  return str.split('\\n').join('\\n' + indentStr)\n}\n\nfunction _showJSON(object) {\n  return _indent(json.toJSON(object, true))\n}\n\nfunction _queryString(query) {\n  if (query == null) {\n    return ''\n  }\n\n  var keys = Object.keys(query)\n  if (keys.length === 0) {\n    return ''\n  }\n\n  var pairs = keys.map(function(key) {\n    return key + '=' + query[key]\n  })\n  return '?' + pairs.join('&')\n}\n\nmodule.exports = {\n  logger: logger,\n  showRequestResult: showRequestResult,\n}\n", "var query = require('./src/query')\nvar util = require('./src/_util')\nvar parseJSON = require('./src/_json').parseJSON\n\nmodule.exports = util.mergeObjects(\n  {\n    Client: require('./src/Client'),\n    Expr: require('./src/Expr'),\n    PageHelper: require('./src/PageHelper'),\n    RequestResult: require('./src/RequestResult'),\n\n    clientLogger: require('./src/clientLogger'),\n    errors: require('./src/errors'),\n    values: require('./src/values'),\n    query: query,\n    parseJSON: parseJSON,\n  },\n  query\n)\n", "declare global {\n  interface Array<T> {\n    sortBy(o: Partial<Record<keyof T, keyof typeof sortOps>>): Array<T>;\n  }\n}\n\nconst sortOps = {\n  number: (a: number, b: number) => a - b,\n  \"-number\": (a: number, b: number) => -(a - b),\n  gl: (a: number, b: number) => (a >= 0 ? a - b : b - a),\n  \"abs(number)\": (a: number, b: number) => Math.abs(a) - Math.abs(b),\n  \"-abs(number)\": (a: number, b: number) => -(Math.abs(a) - Math.abs(b)),\n  string: (a: string, b: string) => a.localeCompare(b),\n  date: (a: Date, b: Date) => a.valueOf() - b.valueOf(),\n  noop: () => 0,\n};\n\nArray.prototype.sortBy = function <T>(\n  sortBy: Partial<Record<keyof T, keyof typeof sortOps>>\n) {\n  return sort(this, sortBy);\n};\n\nexport function sort<T>(\n  items: Array<T>,\n  sortBy: Partial<Record<keyof T, keyof typeof sortOps>>\n) {\n  const keys = Object.keys(sortBy);\n  return [...items].sort((a, b) => {\n    let result = 0;\n    keys.some((k) => !!(result = sortOps[sortBy[k]](a[k], b[k])));\n    return result;\n  });\n}\n", "import faunadb from \"faunadb\";\r\nexport const TAXRATE = 0.06;\r\n\r\nexport const isDebug =\r\n  location.href.includes(\"localhost\");\r\n\r\nexport const isOffline =\r\n  true ===\r\n  getGlobalState(\"work_offline\")?.value;\r\n\r\nexport const primaryContact = {\r\n  companyName: \"Little Light Show\",\r\n  fullName: \"Nathan Alix\",\r\n  addressLine1: \"4 Andrea Lane\",\r\n  addressLine2: \"Greenville, SC 29615\",\r\n};\r\n\r\nconst accessKeys = {\r\n  FAUNADB_SERVER_SECRET: \"\",\r\n  FAUNADB_ADMIN_SECRET: \"\",\r\n  FAUNADB_DOMAIN: \"db.us.fauna.com\",\r\n};\r\n\r\nif (globalThis.process?.env) {\r\n  accessKeys.FAUNADB_SERVER_SECRET =\r\n    process.env\r\n      .FAUNADB_SERVER_SECRET as string;\r\n  accessKeys.FAUNADB_ADMIN_SECRET =\r\n    process.env\r\n      .FAUNADB_ADMIN_SECRET as string;\r\n} else if (localStorage) {\r\n  accessKeys.FAUNADB_SERVER_SECRET =\r\n    localStorage.getItem(\r\n      \"FAUNADB_SERVER_SECRET\"\r\n    ) as string;\r\n  accessKeys.FAUNADB_ADMIN_SECRET =\r\n    localStorage.getItem(\r\n      \"FAUNADB_ADMIN_SECRET\"\r\n    ) as string;\r\n\r\n  if (\r\n    !accessKeys.FAUNADB_SERVER_SECRET\r\n  ) {\r\n    const secret =\r\n      prompt(\r\n        \"Provide the FAUNADB_SERVER_SECRET\"\r\n      ) || \"\";\r\n    accessKeys.FAUNADB_SERVER_SECRET =\r\n      secret;\r\n    localStorage.setItem(\r\n      \"FAUNADB_SERVER_SECRET\",\r\n      secret\r\n    );\r\n  }\r\n\r\n  if (!accessKeys.FAUNADB_SERVER_SECRET)\r\n    console.error(\r\n      \"set FAUNADB_SERVER_SECRET in local storage\"\r\n    );\r\n  if (!accessKeys.FAUNADB_ADMIN_SECRET)\r\n    console.error(\r\n      \"set FAUNADB_ADMIN_SECRET in local storage\"\r\n    );\r\n}\r\n\r\nfunction isNetlifyBuildContext() {\r\n  return (\r\n    0 <=\r\n    location.href.indexOf(\"netlify\")\r\n  );\r\n}\r\n\r\nexport const domain =\r\n  accessKeys.FAUNADB_DOMAIN;\r\nexport const FAUNADB_SERVER_SECRET =\r\n  accessKeys.FAUNADB_SERVER_SECRET;\r\nexport const FAUNADB_ADMIN_SECRET =\r\n  accessKeys.FAUNADB_ADMIN_SECRET;\r\nexport const CONTEXT =\r\n  isNetlifyBuildContext()\r\n    ? \"NETLIFY\"\r\n    : \"dev\";\r\nexport const CURRENT_USER =\r\n  localStorage.getItem(\"user\");\r\n\r\nexport function createClient() {\r\n  return new faunadb.Client({\r\n    secret: FAUNADB_SERVER_SECRET,\r\n    domain,\r\n  });\r\n}\r\n\r\nlet globalState: Record<\r\n  string,\r\n  { type: string; value: string }\r\n>;\r\n\r\nfunction forceGlobalState() {\r\n  return (globalState =\r\n    globalState ||\r\n    JSON.parse(\r\n      localStorage.getItem(\r\n        \"__GLOBAL_STATE__\"\r\n      ) || \"{}\"\r\n    ));\r\n}\r\n\r\nexport function setGlobalState(\r\n  key: string,\r\n  value: any\r\n) {\r\n  const state = forceGlobalState();\r\n  const type = typeof value;\r\n  state[key] = { type, value };\r\n  localStorage.setItem(\r\n    \"__GLOBAL_STATE__\",\r\n    JSON.stringify(state)\r\n  );\r\n}\r\n\r\nexport function getGlobalState(\r\n  key: string\r\n): { type: string; value: any } {\r\n  const state = forceGlobalState();\r\n  return state[key];\r\n}\r\n", "import { createClient } from \"../globals.js\";\r\nimport faunadb from \"faunadb\";\r\n\r\nconst { query } = faunadb;\r\nconst q = query;\r\n\r\nexport async function validate() {\r\n  const client = createClient();\r\n  await client.ping();\r\n}\r\n", "export const routes = {\n  home: () => \"/index.html\",\n  identity: ({ context, target }) =>\n    `/app/identity.html?target=${target}&context=${context}`,\n  createInvoice: () =>\n    `/app/invoice/invoice.html`,\n  invoice: (id: string) =>\n    `/app/invoice/invoice.html?id=${id}`,\n  allInvoices: () =>\n    `/app/invoice/invoices.html`,\n  allLedgers: () =>\n    `/app/gl/index.html?print=all`,\n  printLedger: (id: string) =>\n    `/app/gl/index.html?print=${id}`,\n  createLedger: () =>\n    \"/app/gl/index.html\",\n  dashboard: () => \"/app/index.html\",\n  admin: () => \"/app/admin/index.html\",\n};\n", "import { CONTEXT } from \"./globals.js\";\r\nimport { validate } from \"./services/validateAccessToken.js\";\r\nimport { routes } from \"./router.js\";\r\n\r\nexport async function identify() {\r\n  if (!localStorage.getItem(\"user\")) {\r\n    location.href = routes.identity({\r\n      target: location.href,\r\n      context: CONTEXT,\r\n    });\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    await validate();\r\n  } catch (ex) {\r\n    localStorage.setItem(\r\n      \"FAUNADB_SERVER_SECRET\",\r\n      \"\"\r\n    );\r\n    routes.home();\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n", "export function on(\n  domNode: Element,\n  eventName: string,\n  cb: () => void\n) {\n  domNode.addEventListener(\n    eventName,\n    cb\n  );\n}\n\nexport function trigger(\n  domNode: Element,\n  eventName: string\n) {\n  console.log(\"trigger\", eventName);\n  domNode.dispatchEvent(\n    new Event(eventName)\n  );\n}\n", "import {\n  getGlobalState,\n  setGlobalState,\n} from \"../globals.js\";\nimport { on, trigger } from \"./on.js\";\n\nexport function hookupTriggers(\n  domNode: HTMLElement\n) {\n  domNode\n    .querySelectorAll(\"[data-event]\")\n    .forEach((eventItem) => {\n      const eventName = (\n        eventItem as HTMLElement\n      ).dataset[\"event\"];\n\n      if (!eventName)\n        throw \"item must define a data-event\";\n\n      const isInput =\n        isInputElement(eventItem);\n\n      const inputType =\n        getInputType(eventItem);\n\n      const isButton = isButtonElement(\n        eventItem,\n        isInput\n      );\n\n      const isCheckbox =\n        isCheckboxInput(eventItem);\n\n      if (isButton)\n        on(eventItem, \"click\", () => {\n          trigger(domNode, eventName);\n        });\n      else if (isCheckbox)\n        on(eventItem, \"click\", () => {\n          const checked = (\n            eventItem as HTMLInputElement\n          ).checked;\n          trigger(\n            domNode,\n            eventName +\n              (checked ? \":yes\" : \":no\")\n          );\n        });\n      else if (isInput)\n        on(eventItem, \"change\", () => {\n          trigger(domNode, eventName);\n        });\n      else\n        throw `data-event not supported for this item: ${eventItem.outerHTML}`;\n    });\n\n  domNode\n    .querySelectorAll(\"[data-bind]\")\n    .forEach((eventItem) => {\n      const bindTo = (\n        eventItem as HTMLElement\n      ).dataset[\"bind\"];\n\n      if (!bindTo)\n        throw \"item must define a data-bind\";\n\n      const valueInfo =\n        getGlobalState(bindTo);\n\n      if (isCheckboxInput(eventItem)) {\n        (\n          eventItem as HTMLInputElement\n        ).checked = valueInfo.value;\n        on(eventItem, \"change\", () => {\n          setGlobalState(\n            bindTo,\n            (\n              eventItem as HTMLInputElement\n            ).checked\n          );\n        });\n      } else {\n        throw `unimplemented data-bind on element: ${eventItem.outerHTML}`;\n      }\n    });\n}\nfunction isCheckboxInput(\n  eventItem: Element\n) {\n  return (\n    isInputElement(eventItem) &&\n    getInputType(eventItem) ===\n      \"checkbox\"\n  );\n}\n\nfunction isButtonElement(\n  eventItem: Element,\n  isInput: boolean\n) {\n  return (\n    eventItem.tagName === \"BUTTON\" ||\n    (isInput &&\n      getInputType(eventItem) ===\n        \"button\")\n  );\n}\n\nfunction getInputType(\n  eventItem: Element\n) {\n  return (\n    isInputElement(eventItem) &&\n    (eventItem as HTMLInputElement).type\n  );\n}\n\nfunction isInputElement(\n  eventItem: Element\n) {\n  return eventItem.tagName === \"INPUT\";\n}\n", "import { query as q } from \"faunadb\";\r\nimport { sum } from \"../fun/sum.js\";\r\nimport { createClient, TAXRATE } from \"../globals.js\";\r\nimport { Ledger, save as saveLedger, ledgers as loadAllLedgers } from \"./gl.js\";\r\nimport { Invoice, invoices as loadAllInvoices } from \"./invoices.js\";\r\nimport { split } from \"../fun/split\";\r\n\r\nexport async function importInvoicesToGeneralLedger() {\r\n  const invoices = await loadAllInvoices();\r\n  const ledgers = await loadAllLedgers();\r\n  const [invoicesToImport, invoicesToUpdate] = split(\r\n    invoices,\r\n    (i) => !ledgers.find((l) => l.description === `INVOICE ${i.id}`)\r\n  );\r\n\r\n  // update these invoices\r\n  invoicesToUpdate.forEach(async (invoice) => {\r\n    const ledger = ledgers.find(\r\n      (l) => l.description === `INVOICE ${invoice.id}`\r\n    );\r\n    if (!ledger) throw `ledger must exist for invoice: ${invoice.id}`;\r\n    const newLedger = { ...createLedger(invoice), id: ledger.id };\r\n    if (\r\n      JSON.stringify([newLedger.date, newLedger.items]) !==\r\n      JSON.stringify([ledger.date, ledger.items])\r\n    ) {\r\n      await saveLedger({ ...newLedger, id: ledger.id });\r\n    }\r\n  });\r\n\r\n  while (invoicesToImport.length) {\r\n    const invoice = invoicesToImport.shift()!;\r\n    const ledger = createLedger(invoice);\r\n    await saveLedger(ledger);\r\n  }\r\n}\r\n\r\nfunction createLedger(invoice: Invoice) {\r\n  const inventory = sum(invoice.items.map((i) => i.total));\r\n  const tax = inventory * TAXRATE;\r\n  const labor = invoice.labor;\r\n  const rent = invoice.additional > 0 ? invoice.additional : 0;\r\n  const discount = invoice.additional < 0 ? invoice.additional : 0;\r\n  const ledger: Ledger = {\r\n    date: invoice.date,\r\n    description: `INVOICE ${invoice.id}`,\r\n    items: [\r\n      {\r\n        account: \"AR\",\r\n        amount: inventory,\r\n        comment: \"INVENTORY\",\r\n      },\r\n      {\r\n        account: \"INVENTORY\",\r\n        amount: -inventory,\r\n        comment: \"INVENTORY\",\r\n      },\r\n      {\r\n        account: \"AR\",\r\n        amount: tax,\r\n        comment: \"TAX\",\r\n      },\r\n      {\r\n        account: \"TAX\",\r\n        amount: -tax,\r\n        comment: \"TAX\",\r\n      },\r\n      {\r\n        account: \"AR\",\r\n        amount: rent,\r\n        comment: \"RENT\",\r\n      },\r\n      {\r\n        account: \"RENT\",\r\n        amount: -rent,\r\n        comment: \"RENT\",\r\n      },\r\n      {\r\n        account: \"AR\",\r\n        amount: labor,\r\n        comment: \"LABOR\",\r\n      },\r\n      {\r\n        account: \"LABOR\",\r\n        amount: -labor,\r\n        comment: \"LABOR\",\r\n      },\r\n      {\r\n        account: \"AR\",\r\n        amount: discount,\r\n        comment: \"DISCOUNT\",\r\n      },\r\n      {\r\n        account: \"LABOR\",\r\n        amount: -discount,\r\n        comment: \"DISCOUNT\",\r\n      },\r\n    ],\r\n  };\r\n  ledger.items = ledger.items.filter((i) => 0 != i.amount);\r\n  return ledger;\r\n}\r\n\r\nexport async function copyInvoicesFromTodo() {\r\n  const client = createClient();\r\n\r\n  const result = (await client.query(\r\n    q.Map(\r\n      q.Paginate(q.Documents(q.Collection(\"Todos\")), { size: 25 }),\r\n      q.Lambda(\"ref\", q.Get(q.Var(\"ref\")))\r\n    )\r\n  )) as { data: Array<{ data: Invoice }> };\r\n\r\n  const invoices = result.data.map((v) => v.data);\r\n\r\n  invoices.forEach(async (invoice, index) => {\r\n    console.log(\"copying invoice\", invoice);\r\n    const priorKey = invoice.id;\r\n    const id = 1001 + index;\r\n    const result = await client.query(\r\n      q.Create(q.Collection(\"invoices\"), {\r\n        data: { ...invoice, priorKey, id },\r\n      })\r\n    );\r\n  });\r\n}\r\n\r\nexport async function copyGeneralLedgerEntriesFromTodo() {\r\n  const client = createClient();\r\n\r\n  const result = (await client.query(\r\n    q.Map(\r\n      q.Paginate(q.Documents(q.Collection(\"Todos\"))),\r\n      q.Lambda(\"ref\", q.Get(q.Var(\"ref\")))\r\n    )\r\n  )) as { data: Array<{ data: Ledger }> };\r\n\r\n  const records = result.data\r\n    .map((v) => v.data)\r\n    .filter((v) => v.items.length && !!v.items[0].account);\r\n\r\n  records.forEach(async (record) => {\r\n    console.log(\"ledger\", { record });\r\n    await client.query(\r\n      q.Create(q.Collection(\"general_ledger\"), {\r\n        data: record,\r\n      })\r\n    );\r\n  });\r\n}\r\n", "export function sum(values: Array<number>) {\n  if (!values.length) return 0;\n  return values.reduce((a, b) => a + b, 0);\n}\n", "import { query as q } from \"faunadb\";\r\nimport {\r\n  createClient,\r\n  CURRENT_USER,\r\n  isOffline,\r\n} from \"../globals.js\";\r\n\r\nimport { ServiceCache } from \"./ServiceCache.js\";\r\n\r\nconst LEDGER_TABLE = \"general_ledger\";\r\n\r\nconst cache = new ServiceCache<Ledger>(\r\n  LEDGER_TABLE\r\n);\r\n\r\nexport interface LedgerItem {\r\n  comment: string;\r\n  account: string;\r\n  amount: number;\r\n}\r\n\r\nexport interface Ledger {\r\n  id?: string;\r\n  date: number;\r\n  description?: string;\r\n  items: Array<LedgerItem>;\r\n}\r\n\r\nexport async function deleteLedger(\r\n  id: string\r\n) {\r\n  const client = createClient();\r\n  const result = await client.query(\r\n    q.Delete(\r\n      q.Ref(\r\n        q.Collection(LEDGER_TABLE),\r\n        id\r\n      )\r\n    )\r\n  );\r\n  cache.deleteLineItem(id);\r\n  return result;\r\n}\r\n\r\nexport async function save(\r\n  ledger: Ledger & { id?: string }\r\n) {\r\n  if (!CURRENT_USER)\r\n    throw \"user must be signed in\";\r\n\r\n  const client = createClient();\r\n\r\n  if (!ledger.id) {\r\n    if (!isOffline) {\r\n      const result =\r\n        (await client.query(\r\n          q.Create(\r\n            q.Collection(LEDGER_TABLE),\r\n            {\r\n              data: {\r\n                ...ledger,\r\n                user: CURRENT_USER,\r\n                create_date: Date.now(),\r\n              },\r\n            }\r\n          )\r\n        )) as {\r\n          data: Ledger[];\r\n          ref: { id: string };\r\n        };\r\n      ledger.id = result.ref.id;\r\n    } else {\r\n      ledger.id =\r\n        \"ledger_\" +\r\n        Date.now().toFixed();\r\n    }\r\n  } else {\r\n    if (!isOffline) {\r\n      const result =\r\n        (await client.query(\r\n          q.Update(\r\n            q.Ref(\r\n              q.Collection(\r\n                LEDGER_TABLE\r\n              ),\r\n              ledger.id\r\n            ),\r\n            {\r\n              data: {\r\n                ...ledger,\r\n                user: CURRENT_USER,\r\n                update_date: Date.now(),\r\n              },\r\n            }\r\n          )\r\n        )) as { data: any; ref: any };\r\n    }\r\n  }\r\n  cache.updateLineItem(ledger);\r\n}\r\n\r\nexport async function ledgers() {\r\n  if (!CURRENT_USER)\r\n    throw \"user must be signed in\";\r\n\r\n  if (isOffline || !cache.expired())\r\n    return cache.get();\r\n\r\n  const client = createClient();\r\n\r\n  const result: any =\r\n    await client.query(\r\n      q.Map(\r\n        q.Paginate(\r\n          q.Documents(\r\n            q.Collection(LEDGER_TABLE)\r\n          ),\r\n          { size: 100 }\r\n        ),\r\n        q.Lambda(\r\n          \"ref\",\r\n          q.Get(q.Var(\"ref\"))\r\n        )\r\n      )\r\n    );\r\n\r\n  const ledgers = result.data as Array<{\r\n    data: Ledger;\r\n    ref: any;\r\n  }>;\r\n  // copy ref into ledger id\r\n  ledgers.forEach((ledger) => {\r\n    ledger.data.id =\r\n      ledger.ref.value.id;\r\n  });\r\n\r\n  const response = ledgers\r\n    .filter(\r\n      (ledger) =>\r\n        ledger.data.items &&\r\n        ledger.data.items[0] &&\r\n        ledger.data.items[0].account\r\n    )\r\n    .map((ledger) => ledger.data);\r\n\r\n  cache.set(response);\r\n\r\n  return response;\r\n}\r\n\r\nexport async function get(id: string) {\r\n  if (!CURRENT_USER)\r\n    throw \"user must be signed in\";\r\n\r\n  if (isOffline || !cache.expired()) {\r\n    const hit = cache\r\n      .get()\r\n      .find((item) => item.id === id);\r\n    if (hit) return hit;\r\n  }\r\n\r\n  if (isOffline)\r\n    throw `cannot find ledger: ${id}`;\r\n\r\n  const client = createClient();\r\n\r\n  const result = (await client.query(\r\n    q.Get(\r\n      q.Ref(\r\n        q.Collection(LEDGER_TABLE),\r\n        id\r\n      )\r\n    )\r\n  )) as {\r\n    data: Ledger;\r\n    ref: { id: string };\r\n  };\r\n  result.data.id = result.ref.id;\r\n  cache.updateLineItem(result.data);\r\n}\r\n", "export function ticksInSeconds(\n  ticks: number\n) {\n  return ticks / 1000;\n}\n", "import { isDebug } from \"../globals\";\nimport { ticksInSeconds } from \"../fun/ticksInSeconds\";\n\nconst maxAge = isDebug\n  ? 7 * 24 * 3600\n  : 60;\n\nexport class ServiceCache<\n  T extends { id?: string }\n> {\n  clear() {\n    this.lastWrite = 0;\n    this.save();\n  }\n\n  renew() {\n    this.lastWrite = Date.now();\n    this.save();\n  }\n\n  private data: Array<T>;\n  private lastWrite: number;\n\n  constructor(private table: string) {\n    const raw = localStorage.getItem(\n      `table_${this.table}`\n    );\n    if (!raw) {\n      this.data = [];\n      this.lastWrite = 0;\n    } else {\n      const info = JSON.parse(raw) as {\n        lastWrite: number;\n        data: T[];\n      };\n\n      this.lastWrite = info.lastWrite;\n      this.data = info.data;\n    }\n  }\n\n  private save() {\n    localStorage.setItem(\n      `table_${this.table}`,\n      JSON.stringify({\n        lastWrite: this.lastWrite,\n        data: this.data,\n      })\n    );\n  }\n\n  deleteLineItem(id: string) {\n    const index = this.data.findIndex(\n      (i) => i.id === id\n    );\n    this.data.splice(index, 1);\n    this.save();\n  }\n\n  updateLineItem(lineItem: T) {\n    const index = this.data.findIndex(\n      (i) => i.id === lineItem.id\n    );\n    if (-1 < index) {\n      this.data.splice(index, 1);\n    }\n    this.data.push(lineItem);\n    this.save();\n  }\n\n  expired() {\n    const age = ticksInSeconds(\n      Date.now() - this.lastWrite\n    );\n    return maxAge < age;\n  }\n\n  getById(id: string) {\n    return this.data.find(\n      (item) => item.id === id\n    );\n  }\n\n  get() {\n    return this.data;\n  }\n\n  // reset the cache\n  set(data: T[]) {\n    this.lastWrite = Date.now();\n    this.data = data;\n    this.save();\n  }\n}\n", "import { ServiceCache } from \"./ServiceCache.js\";\r\nimport { query as q } from \"faunadb\";\r\nimport {\r\n  createClient,\r\n  CURRENT_USER,\r\n  isOffline,\r\n} from \"../globals.js\";\r\n\r\nconst INVOICE_TABLE = \"invoices\";\r\nconst cache = new ServiceCache<Invoice>(\r\n  INVOICE_TABLE\r\n);\r\n\r\nexport interface InvoiceItem {\r\n  item: string;\r\n  quantity: number;\r\n  price: number;\r\n  total: number;\r\n}\r\n\r\nexport interface Invoice {\r\n  clientname: string;\r\n  date: number;\r\n  labor: number;\r\n  additional: number;\r\n  id: string;\r\n  billto: string;\r\n  telephone?: string;\r\n  email?: string;\r\n  comments?: string;\r\n  items: Array<InvoiceItem>;\r\n  mops: Array<{\r\n    mop: string;\r\n    paid: number;\r\n  }>;\r\n}\r\n\r\nexport async function deleteInvoice(\r\n  id: string\r\n) {\r\n  if (!CURRENT_USER)\r\n    throw \"user must be signed in\";\r\n\r\n  if (!isOffline) {\r\n    const client = createClient();\r\n    const result = await client.query(\r\n      q.Delete(\r\n        q.Ref(\r\n          q.Collection(INVOICE_TABLE),\r\n          id\r\n        )\r\n      )\r\n    );\r\n  }\r\n\r\n  cache.deleteLineItem(id);\r\n}\r\n\r\nexport async function get(id: string) {\r\n  if (!CURRENT_USER)\r\n    throw \"user must be signed in\";\r\n\r\n  if (isOffline || !cache.expired()) {\r\n    const result = cache.getById(id);\r\n    if (result) return result;\r\n  }\r\n\r\n  if (!isOffline) {\r\n    const client = createClient();\r\n    const result = (await client.query(\r\n      q.Get(\r\n        q.Ref(\r\n          q.Collection(INVOICE_TABLE),\r\n          id\r\n        )\r\n      )\r\n    )) as { data: Invoice };\r\n    return result.data;\r\n  }\r\n\r\n  throw `unable to load invoice: ${id}`;\r\n}\r\n\r\nexport async function save(\r\n  invoice: Invoice\r\n) {\r\n  if (!CURRENT_USER)\r\n    throw \"user must be signed in\";\r\n\r\n  const client = createClient();\r\n\r\n  if (!invoice.id) {\r\n    if (!isOffline) {\r\n      const result =\r\n        (await client.query(\r\n          q.Create(\r\n            q.Collection(INVOICE_TABLE),\r\n            {\r\n              data: {\r\n                ...invoice,\r\n                user: CURRENT_USER,\r\n                create_date: Date.now(),\r\n              },\r\n            }\r\n          )\r\n        )) as {\r\n          data: Invoice[];\r\n          ref: { id: string };\r\n        };\r\n      invoice.id = result.ref.id;\r\n    } else {\r\n      invoice.id =\r\n        \"invoice_\" +\r\n        Date.now().toFixed();\r\n    }\r\n  } else {\r\n    if (!isOffline) {\r\n      const result = await client.query(\r\n        q.Update(\r\n          q.Ref(\r\n            q.Collection(INVOICE_TABLE),\r\n            invoice.id\r\n          ),\r\n          {\r\n            data: {\r\n              ...invoice,\r\n              user: CURRENT_USER,\r\n              update_date: Date.now(),\r\n            },\r\n          }\r\n        )\r\n      );\r\n    }\r\n  }\r\n  cache.updateLineItem(invoice);\r\n}\r\n\r\nexport async function invoices() {\r\n  if (!CURRENT_USER)\r\n    throw \"user must be signed in\";\r\n\r\n  if (isOffline || !cache.expired())\r\n    return cache.get();\r\n\r\n  const client = createClient();\r\n\r\n  const result: any =\r\n    await client.query(\r\n      q.Map(\r\n        q.Paginate(\r\n          q.Documents(\r\n            q.Collection(INVOICE_TABLE)\r\n          ),\r\n          { size: 100 }\r\n        ),\r\n        q.Lambda(\r\n          \"ref\",\r\n          q.Get(q.Var(\"ref\"))\r\n        )\r\n      )\r\n    );\r\n\r\n  const invoices =\r\n    result.data as Array<{\r\n      data: Invoice;\r\n      ref: any;\r\n    }>;\r\n\r\n  // copy ref into invoice id\r\n  invoices.forEach((invoice) => {\r\n    invoice.data.id =\r\n      invoice.ref.value.id;\r\n    invoice.data.mops =\r\n      invoice.data.mops || [];\r\n    if (\r\n      invoice.data[\"paid\"] &&\r\n      invoice.data[\"mop\"]\r\n    ) {\r\n      invoice.data.mops.push({\r\n        mop: invoice.data[\"mop\"],\r\n        paid: invoice.data[\"paid\"],\r\n      });\r\n      delete invoice.data[\"paid\"];\r\n      delete invoice.data[\"mop\"];\r\n    }\r\n  });\r\n\r\n  const response = invoices\r\n    .filter(\r\n      (invoice) => invoice.data.items\r\n    )\r\n    .map((invoice) => invoice.data)\r\n    .map((invoice) => {\r\n      invoice.date =\r\n        invoice.date ||\r\n        (invoice as any).create_date;\r\n      invoice.labor =\r\n        (invoice.labor || 0) - 0;\r\n      invoice.additional =\r\n        (invoice.additional || 0) - 0;\r\n      invoice.items.forEach((item) => {\r\n        item.item = (\r\n          item.item || \"\"\r\n        ).toLocaleUpperCase();\r\n        item.quantity =\r\n          (item.quantity || 0) - 0;\r\n        item.price =\r\n          (item.price || 0) - 0;\r\n        item.total =\r\n          (item.total || 0) - 0;\r\n      });\r\n      return invoice;\r\n    })\r\n    .sortBy({ date: \"date\" })\r\n    .reverse();\r\n\r\n  cache.set(response);\r\n  return response;\r\n}\r\n", "export function split<T>(\n  items: Array<T>,\n  test: (item: T) => boolean\n) {\n  const result = [[], []] as [\n    Array<T>,\n    Array<T>\n  ];\n  items.forEach((i) =>\n    result[test(i) ? 0 : 1].push(i)\n  );\n  return result;\n}\n", "export function save(\n  accounts: Record<\n    string,\n    { code: string }\n  >\n) {\n  localStorage.setItem(\n    \"accounts\",\n    JSON.stringify(accounts)\n  );\n}\n\nexport function load() {\n  return JSON.parse(\n    localStorage.getItem(\"accounts\") ||\n      \"{}\"\n  );\n}\n\nexport function forceDatalist() {\n  let dataList = document.querySelector(\n    `#inventory_list`\n  ) as HTMLDataListElement;\n  if (dataList) return dataList;\n  dataList =\n    document.createElement(\"datalist\");\n  dataList.id = \"listOfAccounts\";\n  Object.entries(load())\n    .sort()\n    .forEach(([key, value]) => {\n      const option =\n        document.createElement(\n          \"option\"\n        );\n      option.value = key;\n      dataList.appendChild(option);\n    });\n  document.body.appendChild(dataList);\n  return dataList;\n}\n", "export const modes = {\n  light_mode: \"light\",\n  dark_mode: \"dark\",\n  holiday_mode: \"holiday\",\n};\n\nexport function setMode(mode?: string) {\n  if (!mode)\n    mode =\n      localStorage.getItem(\"mode\") ||\n      \"\";\n\n  localStorage.setItem(\"mode\", mode);\n\n  document.body.classList.remove(\n    ...Object.values(modes)\n  );\n\n  document.body.classList.add(mode);\n}\n", "import \"./fun/sort.js\";\r\n\r\nimport { identify } from \"./identify.js\";\r\nimport { hookupTriggers } from \"./fun/hookupTriggers.js\";\r\n\r\nimport { importInvoicesToGeneralLedger } from \"./services/admin.js\";\r\nimport {\r\n  LedgerItem,\r\n  ledgers as loadAllLedgers,\r\n} from \"./services/gl.js\";\r\nimport {\r\n  save as saveAccounts,\r\n  load as loadAccounts,\r\n} from \"./gl/AccountManager.js\";\r\nimport { on } from \"./fun/on.js\";\r\nimport { ServiceCache } from \"./services/ServiceCache.js\";\r\nimport {\r\n  modes,\r\n  setMode,\r\n} from \"./fun/setMode.js\";\r\n\r\n// not sure what to start with\r\ntype AccountHierarchy = Record<\r\n  string,\r\n  {\r\n    code?: string;\r\n    accounts?: AccountHierarchy;\r\n  }\r\n>;\r\n\r\nconst starterAccounts = [\r\n  \"AP\",\r\n  \"AR\",\r\n  \"CASH\",\r\n  \"INVENTORY\",\r\n  \"LABOR\",\r\n  \"OPEX\",\r\n  \"Phone\",\r\n  \"Rental\",\r\n  \"SALE TAX\",\r\n  \"SALES\",\r\n  \"STORAGE\",\r\n  \"TOOLS\",\r\n  \"Utilities\",\r\n];\r\n\r\nexport async function init() {\r\n  await identify();\r\n  const domNode = document.body;\r\n\r\n  hookupTriggers(domNode);\r\n\r\n  Object.keys(modes).forEach((mode) =>\r\n    on(domNode, mode, () => {\r\n      setMode(modes[mode]);\r\n    })\r\n  );\r\n\r\n  on(\r\n    domNode,\r\n    \"clear-local-storage\",\r\n    () => {\r\n      let cache = new ServiceCache(\r\n        \"invoices\"\r\n      );\r\n      cache.clear();\r\n      cache = new ServiceCache(\r\n        \"general_ledger\"\r\n      );\r\n      cache.clear();\r\n    }\r\n  );\r\n\r\n  on(domNode, \"set-api-key\", () => {\r\n    prompt(\r\n      \"Enter API Key\",\r\n      (secret) => {\r\n        if (!secret) return;\r\n        localStorage.setItem(\r\n          \"FAUNADB_SERVER_SECRET\",\r\n          secret\r\n        );\r\n      }\r\n    );\r\n  });\r\n\r\n  on(\r\n    domNode,\r\n    \"ping-local-storage\",\r\n    () => {\r\n      let cache = new ServiceCache(\r\n        \"invoices\"\r\n      );\r\n      cache.renew();\r\n      cache = new ServiceCache(\r\n        \"general_ledger\"\r\n      );\r\n      cache.renew();\r\n    }\r\n  );\r\n\r\n  on(\r\n    domNode,\r\n    \"invoice-to-gl\",\r\n    async () => {\r\n      if (\r\n        !confirm(\r\n          \"import invoices into general ledger?\"\r\n        )\r\n      )\r\n        return;\r\n      await importInvoicesToGeneralLedger();\r\n    }\r\n  );\r\n\r\n  on(\r\n    domNode,\r\n    \"gl-to-list-of-accounts\",\r\n    async () => {\r\n      const accounts = loadAccounts();\r\n      starterAccounts.forEach(\r\n        (account) =>\r\n          addAccount(accounts, account)\r\n      );\r\n      const ledgers =\r\n        await loadAllLedgers();\r\n      ledgers.forEach((l) =>\r\n        l.items.forEach((item) => {\r\n          addAccount(\r\n            accounts,\r\n            item.account\r\n          );\r\n        })\r\n      );\r\n      saveAccounts(accounts);\r\n    }\r\n  );\r\n\r\n  setMode();\r\n}\r\n\r\nfunction prompt(\r\n  label: string,\r\n  cb: (input: string) => void\r\n) {\r\n  const input =\r\n    document.createElement(\"input\");\r\n  input.placeholder = label;\r\n  document.body.appendChild(input);\r\n  input.onchange = () => {\r\n    cb(input.value.trim());\r\n    input.remove();\r\n  };\r\n}\r\n\r\nfunction addAccount(\r\n  accounts: any,\r\n  item: string\r\n) {\r\n  if (!accounts[item]) {\r\n    accounts[item] = {\r\n      code: item,\r\n    };\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
